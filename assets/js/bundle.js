(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
var arm=function(){this.armCanvas=new PIXI.Container,this.armCanvas.scale.x=-1,this.flipToggle=!1,this.armCanvas.pivot.x=100,this.armCanvas.pivot.y=40,this.armCanvas.position.x=98,this.armCanvas.position.y=42,this.toucanooLayer=new PIXI.Container,this.armCanvas.addChild(this.toucanooLayer),this.clothesLayer=new PIXI.Container,this.armCanvas.addChild(this.clothesLayer),this.armBase=new PIXI.Sprite.fromFrame("a1.png"),this.toucanooLayer.addChild(this.armBase),this.armFlip=new PIXI.Sprite.fromFrame("a2.png"),this.armTshirt=new PIXI.Sprite.fromFrame("a3.png"),this.armTshirt.position.set(-3,3),this.armJumper=new PIXI.Sprite.fromFrame("a4.png"),this.armJumper.position.set(4,0),this.armPjs=new PIXI.Sprite.fromFrame("a5.png"),this.armPjs.position.set(0,-1),this.mask=new PIXI.Graphics,this.mask.lineStyle(1,16767232,1),this.mask.beginFill(9160191,.4),this.mask.moveTo(200,80),this.mask.lineTo(70,80),this.mask.lineTo(70,0),this.mask.lineTo(200,0),this.mask.lineTo(200,80)};arm.prototype.removeAllClothes=function(){for(var s=this.clothesLayer.children.length-1;s>=0;s--)this.clothesLayer.removeChild(this.clothesLayer.children[s]);this.armBase.mask=null,this.armFlip.mask=null},arm.prototype.removeClothesChange=function(){for(var s=this.clothesLayer.children.length-1;s>=0;s--)this.clothesLayer.removeChild(this.clothesLayer.children[s])},arm.prototype.changeArmClothes=function(s){console.log("CHANGING ARMS CLOTHES"),"40"===s?(this.removeClothesChange(),this.clothesLayer.addChild(this.armPjs),this.armBase.mask=this.mask,this.armFlip.mask=this.mask):"7"===s?(this.removeClothesChange(),this.clothesLayer.addChild(this.armJumper),this.armBase.mask=this.mask,this.armFlip.mask=this.mask):"32"===s?(this.removeClothesChange(),this.clothesLayer.addChild(this.armTshirt),this.armBase.mask=this.mask,this.armFlip.mask=this.mask):(this.removeClothesChange(),this.armBase.mask=null,this.armFlip.mask=null)},arm.prototype.toggleArmHand=function(){this.flipToggle?(this.toucanooLayer.removeChild(this.armFlip),this.toucanooLayer.addChild(this.armBase),this.flipToggle=!1):(this.toucanooLayer.removeChild(this.armBase),this.toucanooLayer.addChild(this.armFlip),this.flipToggle=!0)},module.exports=arm;
},{}],2:[function(require,module,exports){
var anime=require("animejs"),body=function(t,h,i,e,s){this.cWidth=e,this.shadow=new PIXI.Graphics,this.shadow.beginFill(4275515),this.shadow.alpha=.2,this.circleL=new PIXI.Circle(e/2+84,2420,56),this.circleR=new PIXI.Circle(e/2-84,2420,56),this.shadow.drawShape(this.circleL),this.shadow.drawShape(this.circleR),this.shadow.scale.set(1,.3),h.addChild(this.shadow),this.torso=new PIXI.Sprite.fromFrame("b2.png"),this.torso.anchor.x=.5,this.torso.anchor.y=.5,this.torso.position.x=e/2,this.torso.position.y=s/2+100,h.addChild(this.torso),this.isBlinking=!1,this.eyeL=new PIXI.Sprite.fromFrame("b5.png"),this.eyeR=new PIXI.Sprite.fromFrame("b5.png"),this.eyeL.anchor.set(.5,.5),this.eyeR.anchor.set(.5,.5),this.eyeL.scale.x=.95,this.eyeL.scale.y=.95,this.eyeL.scale.x=.95,this.eyeR.scale.y=.95,i.addChild(this.eyeL),i.addChild(this.eyeR),this.eyeL.position.set(e/2+32,s/2-40),this.eyeR.position.set(e/2-32,s/2-40),this.smileEyes=!1,this.eyeSL=new PIXI.Sprite.fromFrame("b6.png"),this.eyeSR=new PIXI.Sprite.fromFrame("b6.png"),this.eyeSL.anchor.set(.5,.5),this.eyeSR.anchor.set(.5,.5),this.eyeSL.scale.set(.95,.95),this.eyeSR.scale.set(.95,.95),i.addChild(this.eyeSL),i.addChild(this.eyeSR),this.eyeSL.position.set(e/2+32,s/2-40),this.eyeSR.position.set(e/2-32,s/2-40),this.eyeSL.alpha=0,this.eyeSR.alpha=0,this.eyeBrowL=new PIXI.Sprite.fromFrame("b7.png"),this.eyeBrowR=new PIXI.Sprite.fromFrame("b7.png"),this.eyeBrowL.anchor.set(.5,.5),this.eyeBrowL.scale.set(-1,1),this.eyeBrowR.anchor.set(.5,.5),i.addChild(this.eyeBrowL),i.addChild(this.eyeBrowR),this.eyeBrowL.position.set(e/2+33,s/2-70),this.eyeBrowR.position.set(e/2-33,s/2-70),this.mouthMain=new PIXI.Sprite.fromFrame("b8.png"),this.mouthMain.anchor.set(.5,.5),this.mouthMain.position.set(e/2,s/2+10),i.addChild(this.mouthMain),this.mouthMain.alpha=1,this.mouthSwapped=!1,this.mouthOing=!1,this.mouthO=new PIXI.Sprite.fromFrame("b5.png"),this.mouthO.anchor.set(.5,.5),this.mouthO.scale.set(.75,.75),i.addChild(this.mouthO),this.mouthO.position.set(e/2,s/2+10),this.mouthO.alpha=0,this.mouthC=new PIXI.Sprite.fromFrame("b3.png"),this.mouthC.anchor.set(.5,.5),this.mouthC.scale.set(.95,.95),i.addChild(this.mouthC),this.mouthC.position.set(e/2,s/2+10),this.mouthC.alpha=0};body.prototype.doBlink=function(){var t=this;this.isBlinking?(this.eyeL.scale.y=.95,this.eyeR.scale.y=.95,this.isBlinking=!1):(this.eyeL.scale.y=.2,this.eyeR.scale.y=.2,this.isBlinking=!0,setTimeout(function(){t.doBlink()},80))},body.prototype.swapMouth=function(){var t=this;this.mouthSwapped?(this.mouthC.alpha=0,this.mouthMain.alpha=1,this.mouthO.alpha=0,this.mouthSwapped=!1):(this.mouthC.alpha=1,this.mouthMain.alpha=0,this.mouthO.alpha=0,this.mouthSwapped=!0,setTimeout(function(){t.swapMouth()},1500))},body.prototype.oMouth=function(){var t=this;this.mouthOing?(this.mouthC.alpha=0,this.mouthMain.alpha=1,this.mouthO.alpha=0,this.mouthOing=!1):(this.mouthC.alpha=0,this.mouthMain.alpha=0,this.mouthO.alpha=1,this.mouthOing=!0,setTimeout(function(){t.oMouth()},1500))},body.prototype.sEyes=function(){var t=this;this.smileEyes?(this.eyeSL.alpha=0,this.eyeSR.alpha=0,this.eyeL.alpha=1,this.eyeR.alpha=1,this.smileEyes=!1):(this.eyeSL.alpha=1,this.eyeSR.alpha=1,this.eyeL.alpha=0,this.eyeR.alpha=0,this.smileEyes=!0,setTimeout(function(){t.sEyes()},2500))},module.exports=body;
},{"animejs":9}],3:[function(require,module,exports){
var canvasSizer=function(){this.canvas=document.getElementById("canvas-main"),this.resize=function(s){this.intendedHeight=window.innerHeight-180,this.scale=this.intendedHeight/720,this.screenRatio=window.innerWidth/window.innerHeight,this.smallScreenScale=.78,this.resetScale=1,void 0!==s?"resize"!==s.type?(console.log("reorient"),this.canvas.style.webkitTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.MozTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.msTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.OTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.transform="scale("+this.scale+","+this.scale+")"):(console.log("resize"),this.screenRatio>.65&&window.innerWidth<=360?(this.resetScale=this.smallScreenScale,this.canvas.style.webkitTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.MozTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.msTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.OTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.transform="scale("+this.smallScreenScale+","+this.smallScreenScale+")"):this.screenRatio>.72?(this.canvas.style.webkitTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.MozTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.msTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.OTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.transform="scale("+this.scale+","+this.scale+")"):(this.canvas.style.webkitTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.MozTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.msTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.OTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.transform="scale("+this.resetScale+","+this.resetScale+")")):(console.log("intitial canvas resize "),this.screenRatio>.65&&window.innerWidth<=360?(this.resetScale=this.smallScreenScale,this.canvas.style.webkitTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.MozTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.msTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.OTransform="scale("+this.smallScreenScale+","+this.smallScreenScale+")",this.canvas.style.transform="scale("+this.smallScreenScale+","+this.smallScreenScale+")"):this.screenRatio>.72?(this.canvas.style.webkitTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.MozTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.msTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.OTransform="scale("+this.scale+","+this.scale+")",this.canvas.style.transform="scale("+this.scale+","+this.scale+")"):(this.canvas.style.webkitTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.MozTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.msTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.OTransform="scale("+this.resetScale+","+this.resetScale+")",this.canvas.style.transform="scale("+this.resetScale+","+this.resetScale+")"))},window.addEventListener("resize",function(s){this.resize(s)}.bind(this)),window.addEventListener("orientationchange",function(s){setTimeout(this.resize(s),500)}.bind(this))};module.exports=new canvasSizer;
},{}],4:[function(require,module,exports){
var lory=require("./lory.js").lory,PIXI=require("pixi.js"),anime=require("animejs"),dragula=require("dragula"),body=require("./body.js"),item=require("./item.js"),arm=require("./arm.js"),jsPDF=require("jspdf"),FileSaver=require("filesaver.js-npm"),detectIe=require("detectie"),init=function(){this.canvas=document.getElementById("Pcanvas"),this.renderer=PIXI.autoDetectRenderer(600,720,{transparent:!0,antialias:!1}),this.canvas.appendChild(this.renderer.view),this.renderer.view.setAttribute("class","canvas-class"),this.renderer.view.setAttribute("id","output"),this.iconList=document.getElementById("icons"),this.canvasMain=document.getElementById("canvas-main"),this.brt=new PIXI.BaseRenderTexture(200,80,PIXI.SCALE_MODES.LINEAR,1),this.rt=new PIXI.RenderTexture(this.brt),this.cWidth=600,this.cHeight=720,this.stage=new PIXI.Container,this.viewport=new PIXI.Container,this.viewport.pivot.x=this.cWidth/2,this.viewport.pivot.y=this.cHeight/2,this.viewport.position.x=this.cWidth/2,this.viewport.position.y=this.cHeight/2,this.stage.addChild(this.viewport),this.route=new PIXI.Container,this.route.pivot.x=this.cWidth/2,this.route.pivot.y=this.cHeight,this.route.position.x=this.cWidth/2,this.route.position.y=this.cHeight-40,this.route.skew.x=0,this.route.rotation=0,this.route.scale.y=1,this.viewport.addChild(this.route),this.cape=new PIXI.Sprite.fromFrame("39.png"),this.cape.anchor.set(.5,.5),this.cape.alpha=0,this.route.addChild(this.cape),this.cape.position.set(300,600),this.bodyLayer=new PIXI.Container,this.route.addChild(this.bodyLayer),this.clothesLayer=new PIXI.Container,this.route.addChild(this.clothesLayer),this.armLayer=new PIXI.Container,this.route.addChild(this.armLayer),this.dressLayer=new PIXI.Container,this.route.addChild(this.dressLayer),this.skirtLayer=new PIXI.Container,this.route.addChild(this.skirtLayer),this.accessoriesLayer=new PIXI.Container,this.route.addChild(this.accessoriesLayer),this.faceLayer=new PIXI.Container,this.route.addChild(this.faceLayer),this.itemTextures=[],this.pointsR=[],this.pointsL=[],this.ropeLength=200/19,this.wave={bL:0,bR:0},this.isArmWaving=!1,this.isMainArmLoop=!1,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!1,this.count=0,this.armCount=0,this.isCounting=!0,this.isAnimLooping=!1,this.lastId=0,this.currentId=0,this.name="toucanoo's name",this.startX=0,this.startY=0,this.dX=0,this.dy=0;var t=this;this.removeLast=function(i){var e=t.lastId;"40"===e||"32"===e||"7"===e?(t.removeChildId(t.clothesLayer,e),t.removeAllArmClothes(e)):"5"===e||"45"===e?t.removeChildId(t.dressLayer,e):"1"===e||"8"===e||"18"===e||"22"===e||"29"===e||"37"===e||"46"===e||"52"===e?t.removeChildId(t.accessoriesLayer,e):"2"===e||"11"===e||"21"===e||"25"===e||"48"===e||"55"===e?t.removeChildId(t.accessoriesLayer,e):"6"===e||"10"===e||"20"===e||"31"===e?(type="Shoes",t.removeChildId(t.accessoriesLayer,e)):"3"===e||"27"===e||"33"===e||"38"===e||"47"===e||"13"===e?t.removeChildId(t.faceLayer,e):"30"===e||"26"===e||"28"===e||"42"===e||"49"===e||"54"===e?t.removeChildId(t.faceLayer,e):"39"===e?t.cape.alpha=0:"62"===e?t.removeChildId(t.skirtLayer,e):t.removeChildId(t.accessoriesLayer,e)},this.undoButton=document.getElementById("undo-btn"),this.undoButton.addEventListener("click",function(t){this.removeLast()}.bind(this),!1),this.onStart=function(i){i.preventDefault(),t.dX=0,t.dy=0,t.currentId=i.target.id.toString(),console.log("setting global ID: "+t.currentId),"touchstart"===i.type?(t.startX=i.touches[0].pageX,t.startY=i.touches[0].pageY,console.log("touch! startX:"+t.startX+" startY: "+t.startY)):(t.startX=i.pageX,t.startY=i.pageY,console.log("click! startX:"+t.startX+" startY: "+t.startY),document.body.onmouseup=t.onEnd.bind(t),t.tempStaticIcon=document.getElementById(i.target.id),null===t.tempStaticIcon.onmouseup&&(t.tempStaticIcon.onmouseup=t.onEnd.bind(t)))},this.onMove=function(i){"touchmove"===i.type?(t.dX=t.startX-i.touches[0].pageX,t.dY=t.startY-i.touches[0].pageY):(t.dX=t.startX-i.pageX,t.dY=t.startY-i.pageY)},this.onEnd=function(i){i.preventDefault();var e=(t.viewport,t.currentId);console.log("clicked item ID: "+e);var s=e-1,r=t.itemTextures[s],a=t.canvasMain.getBoundingClientRect(),h=a.left,n=a.top,o=a.width/600,c=0,d=0;console.log("dX:"+t.dX+" dY: "+t.dY),"mouseup"===i.type&&(document.body.onmouseup=null),"touchend"===i.type?(c=(i.changedTouches[0].pageX-h)/o,d=(i.changedTouches[0].pageY-n)/o+50,t.dY>85?(t.lastId=e,t.initBody.oMouth(),setTimeout(function(){t.initBody.sEyes()},700),t.addItem(e,r,c,d)):Math.abs(t.dX)<5&&Math.abs(t.dY)<5?(t.lastId=e,t.initBody.oMouth(),setTimeout(function(){t.initBody.sEyes()},700),t.addItem(e,r,c,d)):0===t.dX&&(t.lastId=e,t.initBody.oMouth(),setTimeout(function(){t.initBody.sEyes()},700),t.addItem(e,r,c,d))):(t.lastId=e,t.initBody.oMouth(),setTimeout(function(){t.initBody.sEyes()},700),c=(i.pageX-h)/o,d=(i.pageY-n)/o+50,t.addItem(e,r,c,d))}};init.prototype.addItem=function(t,i,e,s){var r,a;"40"===t||"32"===t||"7"===t?(r="Clothes",a=new item(t,i,r,this.cWidth,this.cHeight,e,s),this.removeChildType(this.clothesLayer,"Clothes"),this.removeChildType(this.dressLayer,"Clothes"),this.clothesLayer.addChild(a),a.startIntro(),this.changeArms(t)):"5"===t||"45"===t?(r="Clothes",a=new item(t,i,r,this.cWidth,this.cHeight,e,s),this.removeChildType(this.dressLayer,"Clothes"),this.removeChildType(this.clothesLayer,"Clothes"),this.dressLayer.addChild(a),a.startIntro(),this.changeArms(t)):"1"===t||"8"===t||"18"===t||"22"===t||"29"===t||"37"===t||"46"===t||"52"===t?(r="Hair",a=new item(t,i,r,this.cWidth,this.cHeight,e,s),this.removeChildType(this.accessoriesLayer,"Hair"),this.accessoriesLayer.addChild(a),a.startIntro()):"2"===t||"11"===t||"21"===t||"25"===t||"48"===t||"55"===t?(r="Hats",a=new item(t,i,r,this.cWidth,this.cHeight,e,s),this.removeChildType(this.accessoriesLayer,"Hats"),this.accessoriesLayer.addChild(a),a.startIntro()):"6"===t||"10"===t||"20"===t||"31"===t?(r="Shoes",a=new item(t,i,r,this.cWidth,this.cHeight,e,s),this.removeChildType(this.accessoriesLayer,"Shoes"),this.accessoriesLayer.addChild(a),a.startIntro()):"3"===t||"27"===t||"33"===t||"38"===t||"47"===t||"13"===t?(r="FaceLayer",a=new item(t,i,r,this.cWidth,this.cHeight,e,s),this.faceLayer.addChild(a),a.startIntro()):"30"===t||"26"===t||"28"===t||"42"===t||"49"===t||"54"===t?(r="Glasses",a=new item(t,i,r,this.cWidth,this.cHeight,e,s),this.removeChildType(this.faceLayer,"Glasses"),this.faceLayer.addChild(a),a.startIntro()):"39"===t?(r="Low Accessories",this.cape.alpha=1):"62"===t?(r="Skirt",a=new item(t,i,r,this.cWidth,this.cHeight,e,s),this.skirtLayer.addChild(a),a.startIntro()):(r="Accessories",a=new item(t,i,r,this.cWidth,this.cHeight,e,s),this.accessoriesLayer.addChild(a),a.startIntro())},init.prototype.loadTextures=function(){for(var t=1;t<=62;t++){var i=PIXI.Texture.fromFrame(t+".png");this.itemTextures.push(i)}},init.prototype.populatePalette=function(){for(var t=(dragula([this.iconList],{copy:!0,revertOnSpill:!0,removeOnSpill:!0}),1);t<=62;t++){var i=document.createElement("li");i.className="js_slide sprite-icons icons-"+t,i.id=t,i.addEventListener("touchstart",function(t){this.onStart(t)}.bind(this),!1),i.addEventListener("touchmove",function(t){this.onMove(t)}.bind(this),!1),i.addEventListener("touchend",function(t){this.onEnd(t)}.bind(this),!1),i.addEventListener("mousedown",function(t){this.onStart(t)}.bind(this),!1),this.iconList.appendChild(i)}},init.prototype.initSlider=function(t,i){var e,s=document.querySelector(".slider"),r=document.getElementsByClassName("prev")[0];400>=t?e=lory(s,{enableMouseEvents:!1,slidesToScroll:3,rewind:!0}):800>=t&&t>=400?e=lory(s,{enableMouseEvents:!1,slidesToScroll:4,rewind:!0}):t>=800&&(e=lory(s,{enableMouseEvents:!1,slidesToScroll:8,rewind:!0})),this.noBk=function(t){var i=e.returnIndex();console.log(i),r.style.visibility=0===i?"hidden":"visible"},s.addEventListener("after.lory.slide",function(t){this.noBk()}.bind(this))},init.prototype.makeTestFrame=function(){this.stage.removeChild(this.viewport),this.graphics=new PIXI.Graphics,this.graphics.beginFill(16777215),this.graphics.moveTo(0,0),this.graphics.lineTo(600,0),this.graphics.lineTo(600,720),this.graphics.lineTo(0,720),this.graphics.lineTo(0,0),this.stage.addChild(this.graphics),this.stage.addChild(this.viewport),console.log("adding frame")},init.prototype.startAnimate=function(){this.isAnimLooping||(this.isAnimLooping=!0,requestAnimationFrame(this.animate.bind(this)));var t=this;this.startWave=setInterval(function(){t.animateWave()},anime.random(16e3,22e3)),this.startWiggle=setInterval(function(){t.startArmWiggle()},anime.random(1e4,14e3)),this.startSwing=setInterval(function(){t.startArmSwing()},anime.random(2e4,25e3)),"debug"===window.location.search.substring(1)&&setInterval(function(){t.startArmSpiral()},6e3)},init.prototype.startFaceAnimate=function(){var t=this;t.startBlink=setInterval(function(){t.initBody.doBlink()},anime.random(4e3,6e3)),t.startSwapMouth=setInterval(function(){t.initBody.swapMouth()},anime.random(5e3,7e3)),t.startFaceMove=setInterval(function(){t.startAnimeFace()},anime.random(6e3,8e3))},init.prototype.animate=function(){this.isCounting&&(this.count+=.01,this.armCount+=.01),this.renderer.render(this.initArm.armCanvas,this.rt),this.route.rotation=.015*Math.sin(this.count),this.route.scale.y=1+.025*Math.sin(2.5*this.count);for(var t=1;t<this.pointsR.length;t++)this.pointsR[0].y=0,this.pointsR[0].x=0,this.isMainArmLoop?(this.pointsR[t].y=Math.pow(t,1.1*(Math.sin(3.5*this.armCount)+.1*Math.sin(5.5*this.armCount+60))),this.pointsR[t].x=t*this.ropeLength-.5*Math.pow(t,Math.sin(3.2*this.armCount+5)+.1*Math.sin(8*this.armCount+30)),this.pointsL[t].y=Math.pow(t,1.1*(Math.sin(3.55*this.armCount)+.1*Math.sin(5.55*this.armCount+61))),this.pointsL[t].x=t*this.ropeLength-.5*Math.pow(t,Math.sin(3.25*this.armCount+5.5)+.1*Math.sin(7.5*this.armCount+30.5))):this.isArmWiggle?(this.pointsR[t].y=2*Math.sin(t/2+20*this.armCount),this.pointsL[t].y=2*Math.sin(t/2+20*this.armCount)):this.isArmSpiral?(this.pointsR[t].y=-10*t*Math.sin(this.armCount*(t/13))+2*Math.pow(Math.log(t),2),this.pointsR[t].x=6*t*Math.cos(this.armCount*(t/13))-2*Math.pow(Math.log(t),2)):this.isArmSwing?(this.pointsR[t].y=t*this.ropeLength*Math.sin(.05*Math.sin(3*this.armCount)*.9*t),this.pointsR[t].x=t*this.ropeLength*Math.cos(.05*Math.sin(3*this.armCount)*t),this.pointsL[t].y=t*this.ropeLength*Math.sin(.05*Math.sin(3*this.armCount)*.9*t),this.pointsL[t].x=t*this.ropeLength*Math.cos(.05*Math.sin(3*this.armCount)*t),this.ropeR.rotation=-.89-.3*Math.sin(3*this.armCount+3.3),this.ropeL.rotation=.89+.3*Math.sin(3*this.armCount+3.3),this.ropeR.position.y=407-5*Math.sin(3*this.armCount),this.ropeL.position.y=407-5*Math.sin(3*this.armCount),this.ropeR.position.x=180-9*Math.sin(3*this.armCount),this.ropeL.position.x=420+9*Math.sin(3*this.armCount)):this.isArmWaving&&(this.pointsR[t].y=-t*this.ropeLength*Math.sin(.07*t*this.wave.bR),this.pointsR[t].x=t*this.ropeLength*Math.cos(.07*t*this.wave.bR),this.pointsL[t].y=-t*this.ropeLength*Math.sin(.07*t*this.wave.bL),this.pointsL[t].x=t*this.ropeLength*Math.cos(.07*t*this.wave.bL));requestAnimationFrame(this.animate.bind(this)),this.renderer.render(this.stage)},init.prototype.animateWave=function(t){var i=this;this.isArmWiggle||this.isArmSwing||this.isArmSpiral||i.isArmWaving||(i.isArmWaving=!0,i.isMainArmLoop=!1,this.animeWave1=anime({targets:this.wave,bR:1.2,autoplay:!1,duration:2e3,elasticity:600,direction:"alternate",loop:1,update:function(){i.wave.bR<0&&i.initArm.flipToggle&&i.initArm.toggleArmHand()},begin:function(){i.initArm.toggleArmHand()},complete:function(){i.isArmWaving=!1,i.isMainArmLoop=!0,i.armCount=0}}),this.animeWaveCompensate=anime({targets:this.ropeR,rotation:-1.4,autoplay:!1,duration:2e3,elasticity:600,direction:"alternate",loop:1}),this.animeWaveCompensate2=anime({targets:this.ropeR.position,x:192,y:408,autoplay:!1,duration:2e3,elasticity:600,direction:"alternate",loop:1}),this.animeWaveCompensate3=anime({targets:this.ropeR.scale,y:.8,autoplay:!1,duration:2e3,elasticity:400,direction:"alternate",loop:1}),this.animeSkew=anime({targets:this.route.skew,x:-.06,autoplay:!1,duration:2e3,elasticity:400,direction:"alternate",loop:1}),this.animeWave1.play(),this.animeWaveCompensate.play(),this.animeWaveCompensate2.play(),this.animeWaveCompensate3.play(),this.animeSkew.play())},init.prototype.startArmWiggle=function(){var t=this;this.isArmWiggle||this.isArmWaving||this.isArmSwing||this.isArmSpiral?!this.isArmWiggle||this.isArmWaving||this.isArmSwing||this.isArmSpiral||(this.isArmWaving=!1,this.isMainArmLoop=!0,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!1):(this.isArmWaving=!1,this.isMainArmLoop=!1,this.isArmWiggle=!0,this.isArmSwing=!1,this.isArmSpiral=!1,this.outArmWiggle=setTimeout(function(){t.startArmWiggle()},4e3))},init.prototype.startArmSwing=function(){var t=this;this.isArmWiggle||this.isArmWaving||this.isArmSwing||this.isArmSpiral?this.isArmWiggle||this.isArmWaving||!this.isArmSwing||this.isArmSpiral||(this.isArmWaving=!1,this.isMainArmLoop=!0,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!1,this.ropeR.rotation=-.89,this.ropeL.rotation=.89,this.ropeR.position.y=403,this.ropeL.position.y=403,this.ropeR.position.x=179,this.ropeL.position.x=421):(this.armCount=0,this.isArmWaving=!1,this.isMainArmLoop=!1,this.isArmWiggle=!1,this.isArmSwing=!0,this.isArmSpiral=!1,this.outArmSwing=setTimeout(function(){t.startArmSwing()},5300))},init.prototype.startArmSpiral=function(){var t=this;this.isArmWiggle||this.isArmWaving||this.isArmSwing||this.isArmSpiral?this.isArmWiggle||this.isArmWaving||this.isArmSwing||!this.isArmSpiral||(this.isArmWaving=!1,this.isMainArmLoop=!0,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!1):(this.armCount=0,this.isArmWaving=!1,this.isMainArmLoop=!1,this.isArmWiggle=!1,this.isArmSwing=!1,this.isArmSpiral=!0,this.outArmSpiral=setTimeout(function(){t.startArmSpiral()},3e4))},init.prototype.makeBody=function(){this.banner=new PIXI.Sprite.fromFrame("b1.png"),this.banner.anchor.x=.5,this.banner.anchor.y=.5,this.banner.position.x=this.cWidth/2,this.banner.position.y=785,this.initBody=new body(this.route,this.bodyLayer,this.faceLayer,this.cWidth,this.cHeight)},init.prototype.startAnimeFace=function(){var t=this;this.animeFace=anime({targets:this.faceLayer.position,x:function(t,i){return anime.random(6,9)},y:function(t,i){return anime.random(0,-2)},autoplay:!1,duration:function(t,i){return anime.random(600,1e3)},delay:function(t,i){return anime.random(100,300)},direction:"alternate",easing:"easeOutExpo",loop:1,complete:function(){t.animeFace2.play()}}),this.animeFace2=anime({targets:this.faceLayer.position,x:function(t,i){return anime.random(-4,-6)},y:function(t,i){return anime.random(0,2)},autoplay:!1,duration:function(t,i){return anime.random(600,1e3)},delay:function(t,i){return anime.random(200,800)},direction:"alternate",easing:"easeOutExpo",loop:1}),this.animeFace.play()},init.prototype.makeArms=function(){this.initArm=new arm;for(var t=0;t<20;t++)this.pointsR.push(new PIXI.Point(t*this.ropeLength,null));for(this.ropeR=new PIXI.mesh.Rope(this.rt,this.pointsR),this.ropeR.pivot.x=38,this.ropeR.pivot.y=0,this.ropeR.scale.x=-1,this.armLayer.addChild(this.ropeR),this.ropeR.rotation=-.89,this.ropeR.position.x=179,this.ropeR.position.y=403,t=0;t<20;t++)this.pointsL.push(new PIXI.Point(t*this.ropeLength,null));this.ropeL=new PIXI.mesh.Rope(this.rt,this.pointsL),this.ropeL.pivot.x=38,this.ropeL.pivot.y=0,this.armLayer.addChild(this.ropeL),this.ropeL.rotation=.89,this.ropeL.position.x=421,this.ropeL.position.y=403},init.prototype.changeArms=function(t){this.initArm.changeArmClothes(t)},init.prototype.removeAllArmClothes=function(t){this.initArm.removeAllClothes(t)},init.prototype.removeChildType=function(t,i){for(var e=t.children.length-1;e>=0;e--)t.children[e].type===i&&t.removeChild(t.children[e])},init.prototype.removeChildId=function(t,i){for(var e=t.children.length-1;e>=0;e--)t.children[e].id===i&&t.removeChild(t.children[e])},init.prototype.printPipe=function(){this.makeTestFrame(),this.isCounting=!1,this.animeWave1.pause(),this.animeWaveCompensate.pause(),this.animeWaveCompensate2.pause(),this.animeWaveCompensate3.pause(),this.animeSkew.pause(),clearInterval(this.startWave),clearInterval(this.startWiggle),clearInterval(this.startSwing),clearInterval(this.outArmWiggle),clearInterval(this.outArmSwing),clearInterval(this.startBlink),clearInterval(this.startSwapMouth),clearInterval(this.startFaceMove),this.route.position.y-=65,this.route.addChild(this.banner);var t;for(t=0;t<this.accessoriesLayer.children.length;t++)this.accessoriesLayer.children[t].removeAnchor();for(t=0;t<this.faceLayer.children.length;t++)this.faceLayer.children[t].removeAnchor&&this.faceLayer.children[t].removeAnchor();this.textName=new PIXI.Text(this.name,{fontFamily:"Kent4F",fontSize:24,fill:4275515,align:"center"}),this.textName.anchor.set(.5,.5),this.textName.position.set(this.cWidth/2,779),this.route.addChild(this.textName)},init.prototype.reversePrintPipe=function(){this.isArmWaving&&(this.animeWave1.restart(),this.animeWaveCompensate.restart(),this.animeWaveCompensate2.restart(),this.animeWaveCompensate3.restart(),this.animeSkew.restart()),this.route.position.y+=65,this.route.removeChild(this.banner),this.route.removeChild(this.textName),this.count=0,this.armCount=0,this.isCounting=!0,this.startFaceAnimate(),this.startAnimate(),this.stage.removeChild(this.graphics)},init.prototype.setNameText=function(t){this.textName.text=t,this.name=t},init.prototype.getCanvasImage=function(){return this.renderer.render(this.stage),this.canvasData=this.renderer.view.toDataURL("image/png",1),this.canvasData},init.prototype.printCanvas=function(){console.log("print canvas");var t=window.open();t.document.open(),t.document.write('<img src="'+this.canvasData+'" style=" display: block; width: 660px; height: 792; margin: 0 auto;"/>'),t.document.close(),t.focus(),t.print()},init.prototype.saveCanvas=function(){if(console.log("save canvas"),detectIe()){console.log("IE");for(var t=this.canvasData,i=atob(t.split(",")[1]),e=t.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(i.length),r=new Uint8Array(s),a=0;a<i.length;a++)r[a]=i.charCodeAt(a);var h=new Blob([s],{type:e});FileSaver.saveAs(h,this.name+".png")}else{var n=new jsPDF;n.setProperties({title:this.name,subject:"Your very own toucanoo",author:"toucanBox"}),n.addImage(this.canvasData,"PNG",24,30,162,194.4);var o=n.output("blob");FileSaver.saveAs(o,this.name+".pdf")}},init.prototype.startGirl=function(t){console.log("I'm a girl!");var i=new item("5",this.itemTextures[4],"Clothes",this.cWidth,this.cHeight,0,0);this.dressLayer.addChild(i);var e=new item("37",this.itemTextures[36],"Hair",this.cWidth,this.cHeight,this.cWidth/2-5,this.cHeight/2-70);this.accessoriesLayer.addChild(e);var s=new item("31",this.itemTextures[30],"Shoes",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight-10);this.accessoriesLayer.addChild(s);var r=new item("19",this.itemTextures[18],"Accessories",this.cWidth,this.cHeight,this.cWidth/2+8,this.cHeight/2+115);this.accessoriesLayer.addChild(r)},init.prototype.startBoy=function(t){console.log("I'm a boy!");var i=new item("32",this.itemTextures[31],"Clothes",this.cWidth,this.cHeight,0,0);this.clothesLayer.addChild(i),this.changeArms("32");var e=new item("18",this.itemTextures[17],"Hair",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight/2-105);this.accessoriesLayer.addChild(e);var s=new item("6",this.itemTextures[5],"Shoes",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight-20);this.accessoriesLayer.addChild(s);var r=new item("17",this.itemTextures[16],"Accessories",this.cWidth,this.cHeight,this.cWidth/2+80,this.cHeight/2+110);this.accessoriesLayer.addChild(r)},init.prototype.startPj=function(t){console.log("I'm in Pjs!");var i=new item("40",this.itemTextures[39],"Clothes",this.cWidth,this.cHeight,0,0);this.clothesLayer.addChild(i),this.changeArms("40");var e=new item("55",this.itemTextures[54],"Hats",this.cWidth,this.cHeight,this.cWidth/2+23,this.cHeight/2-133);this.accessoriesLayer.addChild(e)},init.prototype.startScottish=function(t){console.log("I'm Scottish!");var i=new PIXI.Texture.fromFrame("kilt.png"),e=new item("kilt",i,"Skirt",this.cWidth,this.cHeight,this.cWidth/2-4,this.cHeight-120);this.skirtLayer.addChild(e);var s=new item("7",this.itemTextures[6],"Clothes",this.cWidth,this.cHeight,0,0);this.clothesLayer.addChild(s),this.changeArms("7");var r=new item("18",this.itemTextures[17],"Hair",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight/2-105);this.accessoriesLayer.addChild(r);var a=new item("2",this.itemTextures[1],"Hats",this.cWidth,this.cHeight,this.cWidth/2-30,this.cHeight/2-160);this.accessoriesLayer.addChild(a);var h=new item("6",this.itemTextures[5],"Accessories",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight-20);this.accessoriesLayer.addChild(h);var n=new item("35",this.itemTextures[34],"Accessories",this.cWidth,this.cHeight,this.cWidth/2-3,this.cHeight-190);this.accessoriesLayer.addChild(n);var o=new item("47",this.itemTextures[46],"Facelayer",this.cWidth,this.cHeight,this.cWidth/2,this.cHeight/2+10);this.faceLayer.addChild(o)},module.exports=new init;
},{"./arm.js":1,"./body.js":2,"./item.js":6,"./lory.js":7,"animejs":9,"detectie":17,"dragula":19,"filesaver.js-npm":22,"jspdf":24,"pixi.js":161}],5:[function(require,module,exports){
var PIXI=require("pixi.js"),anime=require("animejs"),io=function(t){var e=this;this.init=t,this.fader=document.getElementById("fader"),this.printModal=document.getElementById("print-modal"),this.adviceModal=document.getElementById("advice-modal"),this.endBtn=document.getElementById("print-btn"),this.endBtn.addEventListener("click",function(){e.onOutroClick()},!1),this.onOutroClick=function(t){e.fader.setAttribute("class","fade-bk"),e.printModal.setAttribute("class","modal"),e.init.printPipe(),e.doPreview()},this.adviceBtn=document.getElementById("print-advice"),this.adviceBtn.addEventListener("click",function(){e.showAdvice()},!1),this.showAdvice=function(){e.adviceModal.setAttribute("class","modal"),e.printModal.setAttribute("class","modal hidden"),e.imgAdvice=document.getElementById("img-indicator"),e.imgAdvice.setAttribute("class"," ")},this.adviceBack=document.getElementById("advice-back-do"),this.adviceBack.addEventListener("click",function(){e.closeAdvice()},!1),this.closeAdvice=function(){e.adviceModal.setAttribute("class","modal hidden"),e.printModal.setAttribute("class","modal")},this.output=document.getElementById("output"),this.preview=document.getElementById("preview-output"),this.doPrintBtn=document.querySelectorAll(".print-do");for(var i=0;i<this.doPrintBtn.length;i++)this.doPrintBtn[i].addEventListener("click",function(){e.doPrint()},!1),this.doPrint=function(t){e.init.printCanvas()};this.doPDFBtn=document.querySelectorAll(".save-do");for(var i=0;i<this.doPDFBtn.length;i++)this.doPDFBtn[i].addEventListener("click",function(){e.doPDF()},!1),this.doPDF=function(t){e.init.saveCanvas()};this.textInput=document.getElementById("text-field"),this.useValue=function(t){var i=e.textInput.value;e.addText(i),e.doPreview(),13==t.keyCode&&e.doPrintBtn.click()},this.textInput.onchange=this.useValue,this.textInput.onblur=this.useValue,this.textInput.onkeyup=this.useValue,this.doBackBtn=document.querySelectorAll(".back-do");for(var i=0;i<this.doBackBtn.length;i++)this.doBackBtn[i].addEventListener("click",function(){e.doBack()},!1);this.doBack=function(t){e.init.reversePrintPipe(),e.printModal.setAttribute("class","modal hidden"),e.fader.setAttribute("class","fade-bk hidden")},setTimeout(function(){e.demoSequence()},4e3)};io.prototype.addText=function(t){this.init.setNameText(t)},io.prototype.doPreview=function(){this.canvasData=this.init.getCanvasImage(),this.preview.src=this.canvasData},io.prototype.onIntroGirl=function(){this.init.startGirl()},io.prototype.onIntroBoy=function(){this.init.startBoy()},io.prototype.onIntroNeutralPjs=function(){this.init.startPj()},io.prototype.onIntroScottish=function(){this.init.startScottish()},io.prototype.onIntroNeutralNaked=function(){},io.prototype.demoSequence=function(){console.log("hello demo");var t=this;this.indicator=document.getElementById("indicator"),this.indicator.style.display="block";var e=window.innerWidth/2,i=window.innerHeight/2,n=this.indicator.offsetLeft,o=this.indicator.offsetTop,s=e-n,a=i-o,d=anime({targets:this.indicator,scale:{value:.97,duration:300,delay:800,easing:"easeInOutExpo"},translateX:{value:s,duration:1800,delay:1100,easing:"easeInOutQuad"},translateY:{value:a,duration:1800,delay:1100,easing:"easeInOutQuad"},opacity:{value:1,duration:900,easing:"easeInOutExpo"},complete:function(){anime.remove(d);anime({targets:".indicatorImg",opacity:0,duration:1100,easing:"easeInOutExpo",scale:{value:1.03,duration:300,easing:"easeInOutExpo"},autoplay:!0,complete:function(){t.indicator.style.display="none"}})}})},io.prototype.getStarted=function(){this.type=window.location.search.substring(1),console.log(this.type),"girl"===this.type?this.onIntroGirl():"boy"===this.type?this.onIntroBoy():"pjs"===this.type?this.onIntroNeutralPjs():"debug"===this.type?(this.onIntroNeutralNaked(),this.testCanvasTarget=document.getElementById("canvas-main"),this.testOutputParent=document.getElementsByClassName("space")[0],this.testOutput=document.createElement("div"),setTimeout(function(){this.testScale=this.testCanvasTarget.style.transform,console.log(this.testScale),this.testOutput.innerHTML="height: "+window.innerHeight+", width: "+window.innerWidth+", canvas transform: "+this.testScale,this.testOutputParent.appendChild(this.testOutput)}.bind(this),5e3)):"scottish"===this.type?this.onIntroScottish():this.onIntroNeutralNaked()},module.exports=io;
},{"animejs":9,"pixi.js":161}],6:[function(require,module,exports){
var anime=require("animejs"),item=function(i,t,s,h,o,e,a){this.id=i,this.type=s,this.image=t,console.log("new item added ID:"+this.id+", type: "+this.type),PIXI.Sprite.call(this,t),this.wiggle=!1,this.interactive=!0,this.buttonMode=!0,this.anchor.x=.5,this.anchor.y=.5,this.scale.x=1,this.scale.y=1,this.position.x=e>600||e<0?h/2:e,this.position.y=a>780||a<100?o/2:a,this.anchors=!0,this.count=0,"40"===i?(this.position.x=h/2-4,this.position.y=o/2+163):"5"===i?(this.position.x=h/2+8,this.position.y=o/2+128):"32"===i?(this.position.x=h/2+1,this.position.y=o/2+119,this.scale.x=1.01):"7"===i?(this.position.x=h/2-4,this.position.y=o/2+119):"45"===i?(this.position.x=h/2-4,this.position.y=o/2+119):("Shoes"===s?(this.hitSizerY=this.height/1.6,this.hitSizerX=this.width/2,this.hitArea=new PIXI.Ellipse(.5,.5,this.hitSizerX,this.hitSizerY),this.visualHit=new PIXI.Ellipse(.5,.5,this.hitSizerX,this.hitSizerY),this.drawHit=new PIXI.Graphics,this.drawHit.beginFill(16770120),this.drawHit.drawShape(this.visualHit),this.drawHit.alpha=0,this.addChild(this.drawHit)):(this.width>100?this.hitSizer=80:this.width>80&&this.height>80?this.hitSizer=this.width/2.5:this.hitSizer=40,this.hitArea=new PIXI.Circle(.5,.5,this.hitSizer),this.visualHit=new PIXI.Circle(.5,.5,this.hitSizer),this.drawHit=new PIXI.Graphics,this.drawHit.beginFill(16770120),this.drawHit.drawShape(this.visualHit),this.drawHit.alpha=0,this.addChild(this.drawHit)),this.on("mousedown",this.onDragStart.bind(this)).on("touchstart",this.onDragStart.bind(this)).on("mouseup",this.onDragEnd.bind(this)).on("mouseupoutside",this.onDragEnd.bind(this)).on("touchend",this.onDragEnd.bind(this)).on("touchendoutside",this.onDragEnd.bind(this)).on("mousemove",this.onDragMove.bind(this)).on("touchmove",this.onDragMove.bind(this))),requestAnimationFrame(this.animate.bind(this)),this.fadeHit()};item.prototype=Object.create(PIXI.Sprite.prototype),item.prototype.constructor=item,item.prototype.removeAnchor=function(){this.removeChild(this.drawHit)},item.prototype.restoreAnchor=function(){this.addChild(this.drawHit)},item.prototype.onDragStart=function(i){if(!this.dragging){this.data=i.data,this.alpha=.5,this.dragging=!0,this.scale.x*=1.05,this.scale.y*=1.05,this.dragPoint=i.data.getLocalPosition(this.parent),this.dragPoint.x-=this.position.x,this.dragPoint.y-=this.position.y;var t=this.parent;t.removeChild(this),t.addChild(this)}},item.prototype.onDragEnd=function(i){this.dragging&&(this.alpha=1,this.dragging=!1,this.scale.x/=1.05,this.scale.y/=1.05,this.data=null,this.rotation=0,this.position.x>=560||this.position.x<=40?this.destroy():(this.position.y>=760||this.position.y<=40)&&this.destroy())},item.prototype.onDragMove=function(i){if(this.dragging){var t=this.data.getLocalPosition(this.parent);this.position.x=t.x-this.dragPoint.x,this.position.y=t.y-this.dragPoint.y}},item.prototype.animate=function(i){this.count+=.01,this.dragging&&(this.rotation=.05*Math.sin(20*this.count)),!this.dragging&&this.anchors,"13"===this.id&&(this.rotation=2*this.count),requestAnimationFrame(this.animate.bind(this))},item.prototype.startIntro=function(){this.scale.x=0,this.scale.y=0,this.intro=anime({targets:this.scale,x:1,y:1,duration:1e3,autoplay:!1}),this.intro.play()},item.prototype.fadeHit=function(){this.fader=anime({targets:this.drawHit,alpha:.5,duration:1e3,autoplay:!0,delay:3e3,easing:"easeInOutQuad",direction:"alternate",loop:!0})},module.exports=item;
},{"animejs":9}],7:[function(require,module,exports){
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){function n(e,t){var n=z,i=n.classNameActiveSlide;e.forEach(function(e,t){e.classList.contains(i)&&e.classList.remove(i)}),e[t].classList.add(i)}function i(e){var t=z,n=t.infinite,i=e.slice(0,n),o=e.slice(e.length-n,e.length);return i.forEach(function(e){var t=e.cloneNode(!0);B.appendChild(t)}),o.reverse().forEach(function(e){var t=e.cloneNode(!0);B.insertBefore(t,B.firstChild)}),B.addEventListener(O.transitionEnd,y),v.call(B.children)}function o(t,n,i){(0,l.default)(e,t+".lory."+n,i)}function a(e,t,n){var i=B&&B.style;i&&(i[O.transition+"TimingFunction"]=n,i[O.transition+"Duration"]=t+"ms",O.hasTranslate3d?i[O.transform]="translate3d("+e+"px, 0, 0)":i[O.transform]="translate("+e+"px, 0)")}function d(e,t){var i=z,r=i.slideSpeed,s=i.slidesToScroll,d=i.infinite,l=i.rewind,c=i.rewindSpeed,u=i.ease,f=i.classNameActiveSlide,m=r,p=t?P+1:P-1,h=Math.round(M-S);o("before","slide",{index:P,nextSlide:p}),"number"!=typeof e&&(e=t?P+s:P-s),e=Math.min(Math.max(e,0),_.length-1),d&&void 0===t&&(e+=d);var E=Math.min(Math.max(-1*_[e].offsetLeft,-1*h),0);l&&Math.abs(N.x)===h&&t&&(E=0,e=0,m=c),a(E,m,u),N.x=E,_[e].offsetLeft<=h&&(P=e),!d||e!==_.length-d&&0!==e||(t&&(P=d),t||(P=_.length-2*d),N.x=-1*_[P].offsetLeft,A=function(){a(-1*_[P].offsetLeft,0,void 0)}),f&&n(v.call(_),P),o("after","slide",{currentSlide:P})}function c(){o("before","init"),O=(0,s.default)(),z=r({},u.default,t);var a=z,d=a.classNameFrame,l=a.classNameSlideContainer,c=a.classNamePrevCtrl,m=a.classNameNextCtrl,p=a.enableMouseEvents,b=a.classNameActiveSlide;j=e.getElementsByClassName(d)[0],B=j.getElementsByClassName(l)[0],k=e.getElementsByClassName(c)[0],T=e.getElementsByClassName(m)[0],N={x:B.offsetLeft,y:B.offsetTop},_=z.infinite?i(v.call(B.children)):v.call(B.children),f(),b&&n(_,P),k&&T&&(k.addEventListener("click",h),T.addEventListener("click",E)),j.addEventListener("touchstart",x),p&&(j.addEventListener("mousedown",x),j.addEventListener("click",g)),z.window.addEventListener("resize",C),o("after","init")}function f(){var e=z,t=e.infinite,i=e.ease,o=e.rewindSpeed,r=e.rewindOnResize,s=e.classNameActiveSlide;M=B.getBoundingClientRect().width||B.offsetWidth,S=j.getBoundingClientRect().width||j.offsetWidth,S===M&&(M=_.reduce(function(e,t){return e+t.getBoundingClientRect().width||t.offsetWidth},0)),r?P=0:(i=null,o=0),t?(a(-1*_[P+t].offsetLeft,0,null),P+=t,N.x=-1*_[P].offsetLeft):(a(-1*_[P].offsetLeft,o,i),N.x=-1*_[P].offsetLeft),s&&n(v.call(_),P)}function m(e){d(e)}function p(){return P-z.infinite||0}function h(){d(!1,!1)}function E(){d(!1,!0)}function b(){o("before","destroy"),j.removeEventListener(O.transitionEnd,y),j.removeEventListener("touchstart",x),j.removeEventListener("touchmove",L),j.removeEventListener("touchend",w),j.removeEventListener("mousemove",L),j.removeEventListener("mousedown",x),j.removeEventListener("mouseup",w),j.removeEventListener("mouseleave",w),j.removeEventListener("click",g),z.window.removeEventListener("resize",C),k&&k.removeEventListener("click",h),T&&T.removeEventListener("click",E),z.infinite&&Array.apply(null,Array(z.infinite)).forEach(function(){B.removeChild(B.firstChild),B.removeChild(B.lastChild)}),o("after","destroy")}function y(){A&&(A(),A=void 0)}function x(e){var t=z,n=t.enableMouseEvents,i=e.touches?e.touches[0]:e;n&&(j.addEventListener("mousemove",L),j.addEventListener("mouseup",w),j.addEventListener("mouseleave",w)),j.addEventListener("touchmove",L),j.addEventListener("touchend",w);var r=i.pageX,a=i.pageY;D={x:r,y:a,time:Date.now()},F=void 0,R={},o("on","touchstart",{event:e})}function L(e){var t=e.touches?e.touches[0]:e,n=t.pageX,i=t.pageY;R={x:n-D.x,y:i-D.y},void 0===F&&(F=!!(F||Math.abs(R.x)<Math.abs(R.y))),!F&&D&&(e.preventDefault(),a(N.x+R.x,0,null)),o("on","touchmove",{event:e})}function w(e){var t=D?Date.now()-D.time:void 0,n=Number(t)<300&&Math.abs(R.x)>25||Math.abs(R.x)>S/3,i=!P&&R.x>0||P===_.length-1&&R.x<0,r=R.x<0;F||(n&&!i?d(!1,r):a(N.x,z.snapBackSpeed)),D=void 0,j.removeEventListener("touchmove",L),j.removeEventListener("touchend",w),j.removeEventListener("mousemove",L),j.removeEventListener("mouseup",w),j.removeEventListener("mouseleave",w),o("on","touchend",{event:e})}function g(e){R.x&&e.preventDefault()}function C(e){f(),o("on","resize",{event:e})}var N=void 0,M=void 0,S=void 0,_=void 0,j=void 0,B=void 0,k=void 0,T=void 0,O=void 0,A=void 0,P=0,z={};"undefined"!=typeof jQuery&&e instanceof jQuery&&(e=e[0]);var D=void 0,R=void 0,F=void 0;return c(),{setup:c,reset:f,slideTo:m,returnIndex:p,prev:h,next:E,destroy:b}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.lory=o;var a=n(2),s=i(a),d=n(3),l=i(d),c=n(5),u=i(c),v=Array.prototype.slice},function(e,t){(function(e){"use strict";function n(){var t=void 0,n=void 0,i=void 0,o=void 0;return function(){var r=document.createElement("_"),a=r.style,s=void 0;""===a[s="webkitTransition"]&&(i="webkitTransitionEnd",n=s),""===a[s="transition"]&&(i="transitionend",n=s),""===a[s="webkitTransform"]&&(t=s),""===a[s="msTransform"]&&(t=s),""===a[s="transform"]&&(t=s),document.body.insertBefore(r,null),a[t]="translate3d(0, 0, 0)",o=!!e.getComputedStyle(r).getPropertyValue(t),document.body.removeChild(r)}(),{transform:t,transition:n,transitionEnd:i,hasTranslate3d:o}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e,t,n){var i=new r.default(t,{bubbles:!0,cancelable:!0,detail:n});e.dispatchEvent(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(4),r=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,function(){return this}())},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,classNameFrame:"js_frame",classNameSlideContainer:"js_slides",classNamePrevCtrl:"js_prev",classNameNextCtrl:"js_next",classNameActiveSlide:"active",enableMouseEvents:!1,window:window,rewindOnResize:!0}}])});
},{}],8:[function(require,module,exports){
var PIXI=require("pixi.js"),anime=require("animejs");document.addEventListener("DOMContentLoaded",function(e){function t(e,t){console.log("Progress:",e.progress+"%")}function n(){var e=require("./init.js");e.loadTextures(),e.populatePalette(),e.initSlider(window.innerWidth,window.innerHeight),e.makeBody(),e.makeArms(),new(require("./introOutro.js"))(e).getStarted();require("./canvasSizer.js").resize(void 0),setTimeout(function(){e.startFaceAnimate(),e.startAnimate(),document.getElementById("busy").style.display="none",setTimeout(function(){e.animateWave()},1e3)},500)}PIXI.loader.add("base","../assets/img/canvas/base-arms.json").add("items","../assets/img/canvas/items.json").on("progress",t).load(n)});
},{"./canvasSizer.js":3,"./init.js":4,"./introOutro.js":5,"animejs":9,"pixi.js":161}],9:[function(require,module,exports){
!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():t.anime=n()}(this,function(){var t,n={duration:1e3,delay:0,loop:!1,autoplay:!0,direction:"normal",easing:"easeOutElastic",elasticity:400,round:!1,begin:void 0,update:void 0,complete:void 0},r=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skewX","skewY"],e={arr:function(t){return Array.isArray(t)},obj:function(t){return Object.prototype.toString.call(t).indexOf("Object")>-1},svg:function(t){return t instanceof SVGElement},dom:function(t){return t.nodeType||e.svg(t)},num:function(t){return!isNaN(parseInt(t))},str:function(t){return"string"==typeof t},fnc:function(t){return"function"==typeof t},und:function(t){return void 0===t},nul:function(t){return"null"==typeof t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return e.hex(t)||e.rgb(t)||e.hsl(t)}},a=function(){var t={},n=["Quad","Cubic","Quart","Quint","Expo"],r={Sine:function(t){return 1+Math.sin(Math.PI/2*t-Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t,n){if(0===t||1===t)return t;var r=1-Math.min(n,998)/1e3,e=t/1,a=e-1,o=r/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*a)*Math.sin((a-o)*(2*Math.PI)/r)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var n,r=4;t<((n=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((3*n-2)/22-t,2)}};return n.forEach(function(t,n){r[t]=function(t){return Math.pow(t,n+2)}}),Object.keys(r).forEach(function(n){var e=r[n];t["easeIn"+n]=e,t["easeOut"+n]=function(t,n){return 1-e(1-t,n)},t["easeInOut"+n]=function(t,n){return t<.5?e(2*t,n)/2:1-e(-2*t+2,n)/2},t["easeOutIn"+n]=function(t,n){return t<.5?(1-e(1-2*t,n))/2:(e(2*t-1,n)+1)/2}}),t.linear=function(t){return t},t}(),o=function(t){return e.str(t)?t:t+""},u=function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},i=function(t){if(e.col(t))return!1;try{return document.querySelectorAll(t)}catch(t){return!1}},c=function(t,n){return Math.floor(Math.random()*(n-t+1))+t},s=function(t){return t.reduce(function(t,n){return t.concat(e.arr(n)?s(n):n)},[])},f=function(t){return e.arr(t)?t:(e.str(t)&&(t=i(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])},l=function(t,n){return t.some(function(t){return t===n})},d=function(t,n){var r={};return t.forEach(function(t){var e=JSON.stringify(n.map(function(n){return t[n]}));r[e]=r[e]||[],r[e].push(t)}),Object.keys(r).map(function(t){return r[t]})},m=function(t){return t.filter(function(t,n,r){return r.indexOf(t)===n})},p=function(t){var n={};for(var r in t)n[r]=t[r];return n},h=function(t,n){for(var r in n)t[r]=e.und(t[r])?n[r]:t[r];return t},v=function(t){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,t=t.replace(n,function(t,n,r,e){return n+n+r+r+e+e}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgb("+parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)+")"},g=function(t){var n,r,e,t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),a=parseInt(t[1])/360,o=parseInt(t[2])/100,u=parseInt(t[3])/100,i=function(t,n,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(n-t)*r:r<.5?n:r<2/3?t+(n-t)*(2/3-r)*6:t};if(0==o)n=r=e=u;else{var c=u<.5?u*(1+o):u+o-u*o,s=2*u-c;n=i(s,c,a+1/3),r=i(s,c,a),e=i(s,c,a-1/3)}return"rgb("+255*n+","+255*r+","+255*e+")"},y=function(t){return e.rgb(t)?t:e.hex(t)?v(t):e.hsl(t)?g(t):void 0},b=function(t){return/([\+\-]?[0-9|auto\.]+)(%|px|pt|em|rem|in|cm|mm|ex|pc|vw|vh|deg)?/.exec(t)[2]},w=function(t,n,r){return b(n)?n:t.indexOf("translate")>-1?b(r)?n+b(r):n+"px":t.indexOf("rotate")>-1||t.indexOf("skew")>-1?n+"deg":n},M=function(t,n){if(n in t.style)return getComputedStyle(t).getPropertyValue(u(n))||"0"},x=function(t,n){var r=n.indexOf("scale")>-1?1:0,e=t.style.transform;if(!e)return r;for(var a=/(\w+)\((.+?)\)/g,o=[],u=[],i=[];o=a.exec(e);)u.push(o[1]),i.push(o[2]);var c=i.filter(function(t,r){return u[r]===n});return c.length?c[0]:r},O=function(t,n){return e.dom(t)&&l(r,n)?"transform":e.dom(t)&&(t.getAttribute(n)||e.svg(t)&&t[n])?"attribute":e.dom(t)&&"transform"!==n&&M(t,n)?"css":e.nul(t[n])||e.und(t[n])?void 0:"object"},I=function(t,n){switch(O(t,n)){case"transform":return x(t,n);case"css":return M(t,n);case"attribute":return t.getAttribute(n)}return t[n]||0},k=function(t,n,r){if(e.col(n))return y(n);if(b(n))return n;var a=b(b(t.to)?t.to:t.from);return!a&&r&&(a=b(r)),a?n+a:n},E=function(t){var n=/-?\d*\.?\d+/g;return{original:t,numbers:o(t).match(n)?o(t).match(n).map(Number):[0],strings:o(t).split(n)}},A=function(t,n,r){return n.reduce(function(n,e,a){var e=e||r[a-1];return n+t[a-1]+e})},j=function(t){var t=t?s(e.arr(t)?t.map(f):f(t)):[];return t.map(function(t,n){return{target:t,id:n}})},P=function(t,r){var a=[];for(var o in t)if(!n.hasOwnProperty(o)&&"targets"!==o){var u=e.obj(t[o])?p(t[o]):{value:t[o]};u.name=o,a.push(h(u,r))}return a},C=function(t,n,r,a){var o=f(e.fnc(r)?r(t,a):r);return{from:o.length>1?o[0]:I(t,n),to:o.length>1?o[1]:o[0]}},S=function(t,n,r,e){var a={};if("transform"===r)a.from=t+"("+w(t,n.from,n.to)+")",a.to=t+"("+w(t,n.to)+")";else{var o="css"===r?M(e,t):void 0;a.from=k(n,n.from,o),a.to=k(n,n.to,o)}return{from:E(a.from),to:E(a.to)}},T=function(t,n){var r=[];return t.forEach(function(a,o){var u=a.target;return n.forEach(function(n){var i=O(u,n.name);if(i){var c=C(u,n.name,n.value,o),s=p(n);s.animatables=a,s.type=i,s.from=S(n.name,c,s.type,u).from,s.to=S(n.name,c,s.type,u).to,s.round=e.col(c.from)||s.round?1:0,s.delay=(e.fnc(s.delay)?s.delay(u,o,t.length):s.delay)/J.speed,s.duration=(e.fnc(s.duration)?s.duration(u,o,t.length):s.duration)/J.speed,r.push(s)}})}),r},$=function(t,n){var r=T(t,n);return d(r,["name","from","to","delay","duration"]).map(function(t){var n=p(t[0]);return n.animatables=t.map(function(t){return t.animatables}),n.totalDuration=n.delay+n.duration,n})},L=function(t,n){t.tweens.forEach(function(r){var e=r.to,a=r.from,o=t.duration-(r.delay+r.duration);r.from=e,r.to=a,n&&(r.delay=o)}),t.reversed=!t.reversed},N=function(t){return Math.max.apply(Math,t.map(function(t){return t.totalDuration}))},V=function(t){return Math.min.apply(Math,t.map(function(t){return t.delay}))},X=function(t){var n=[],r=[];return t.tweens.forEach(function(t){"css"!==t.type&&"transform"!==t.type||(n.push("css"===t.type?u(t.name):"transform"),t.animatables.forEach(function(t){r.push(t.target)}))}),{properties:m(n).join(", "),elements:m(r)}},Y=function(t){var n=X(t);n.elements.forEach(function(t){t.style.willChange=n.properties})},F=function(t){X(t).elements.forEach(function(t){t.style.removeProperty("will-change")})},Z=function(t){var n=e.str(t)?i(t)[0]:t;return{path:n,value:n.getTotalLength()}},q=function(t,n){var r=t.path,e=t.value*n,a=function(a){var o=a||0,u=n>1?t.value+o:e+o;return r.getPointAtLength(u)},o=a(),u=a(-1),i=a(1);switch(t.name){case"translateX":return o.x;case"translateY":return o.y;case"rotate":return 180*Math.atan2(i.y-u.y,i.x-u.x)/Math.PI}},Q=function(t,n){var r=Math.min(Math.max(n-t.delay,0),t.duration),e=r/t.duration,o=t.to.numbers.map(function(n,r){var o=t.from.numbers[r],u=a[t.easing](e,t.elasticity),i=t.path?q(t,u):o+u*(n-o);return i=t.round?Math.round(i*t.round)/t.round:i});return A(o,t.to.strings,t.from.strings)},B=function(n,r){var e;n.currentTime=r,n.progress=r/n.duration*100;for(var a=0;a<n.tweens.length;a++){var o=n.tweens[a];o.currentValue=Q(o,r);for(var u=o.currentValue,i=0;i<o.animatables.length;i++){var c=o.animatables[i],s=c.id,f=c.target,l=o.name;switch(o.type){case"css":f.style[l]=u;break;case"attribute":f.setAttribute(l,u);break;case"object":f[l]=u;break;case"transform":e||(e={}),e[s]||(e[s]=[]),e[s].push(u)}}}if(e){t||(t=(M(document.body,"transform")?"":"-webkit-")+"transform");for(var a in e)n.animatables[a].target.style[t]=e[a].join(" ")}},D=function(t){var r={};return r.animatables=j(t.targets),r.settings=h(t,n),r.properties=P(t,r.settings),r.tweens=$(r.animatables,r.properties),r.duration=r.tweens.length?N(r.tweens):t.duration,r.delay=r.tweens.length?V(r.tweens):t.delay,r.currentTime=0,r.progress=0,r.ended=!1,r},z=[],G=0,H=function(){var t=function(){G=requestAnimationFrame(n)},n=function(n){if(z.length){for(var r=0;r<z.length;r++)z[r].tick(n);t()}else cancelAnimationFrame(G),G=0};return t}(),J=function(t){var n=D(t),r={};return n.tick=function(t){n.ended=!1,r.start||(r.start=t),r.current=Math.min(Math.max(r.last+t-r.start,0),n.duration),B(n,r.current);var a=n.settings;r.current>=n.delay&&(a.begin&&a.begin(n),a.begin=void 0,a.update&&a.update(n)),r.current>=n.duration&&(a.loop?(r.start=t,"alternate"===a.direction&&L(n,!0),e.num(a.loop)&&a.loop--):(n.ended=!0,n.pause(),a.complete&&a.complete(n)),r.last=0)},n.seek=function(t){B(n,t/100*n.duration)},n.pause=function(){F(n);var t=z.indexOf(n);t>-1&&z.splice(t,1)},n.play=function(t){n.pause(),t&&(n=h(D(h(t,n.settings)),n)),r.start=0,r.last=n.ended?0:n.currentTime;var e=n.settings;"reverse"===e.direction&&L(n),"alternate"!==e.direction||e.loop||(e.loop=1),Y(n),z.push(n),G||H()},n.restart=function(){n.reversed&&L(n),n.pause(),n.seek(0),n.play()},n.settings.autoplay&&n.play(),n},K=function(t){for(var n=s(e.arr(t)?t.map(f):f(t)),r=z.length-1;r>=0;r--)for(var a=z[r],o=a.tweens,u=o.length-1;u>=0;u--)for(var i=o[u].animatables,c=i.length-1;c>=0;c--)l(n,i[c].target)&&(i.splice(c,1),i.length||o.splice(u,1),o.length||a.pause())};return J.version="1.1.3",J.speed=1,J.list=z,J.remove=K,J.easings=a,J.getValue=I,J.path=Z,J.random=c,J});
},{}],10:[function(require,module,exports){
module.exports=function(r,e){return Array.prototype.slice.call(r,e)};
},{}],11:[function(require,module,exports){
"use strict";"use restrict";function countTrailingZeros(r){var n=32;return r&=-r,r&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}var INT_BITS=32;exports.INT_BITS=INT_BITS,exports.INT_MAX=2147483647,exports.INT_MIN=-1<<INT_BITS-1,exports.sign=function(r){return(r>0)-(r<0)},exports.abs=function(r){var n=r>>INT_BITS-1;return(r^n)-n},exports.min=function(r,n){return n^(r^n)&-(r<n)},exports.max=function(r,n){return r^(r^n)&-(r<n)},exports.isPow2=function(r){return!(r&r-1||!r)},exports.log2=function(r){var n,t;return n=(r>65535)<<4,r>>>=n,t=(r>255)<<3,r>>>=t,n|=t,t=(r>15)<<2,r>>>=t,n|=t,t=(r>3)<<1,r>>>=t,(n|=t)|r>>1},exports.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},exports.popCount=function(r){return r-=r>>>1&1431655765,16843009*((r=(858993459&r)+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},exports.countTrailingZeros=countTrailingZeros,exports.nextPow2=function(r){return r+=0===r,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)+1},exports.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},exports.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var REVERSE_TABLE=new Array(256);!function(r){for(var n=0;n<256;++n){var t=n,e=n,o=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--o;r[n]=e<<o&255}}(REVERSE_TABLE),exports.reverse=function(r){return REVERSE_TABLE[255&r]<<24|REVERSE_TABLE[r>>>8&255]<<16|REVERSE_TABLE[r>>>16&255]<<8|REVERSE_TABLE[r>>>24&255]},exports.interleave2=function(r,n){return r&=65535,r=16711935&(r|r<<8),r=252645135&(r|r<<4),r=858993459&(r|r<<2),r=1431655765&(r|r<<1),n&=65535,n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),r|n<<1},exports.deinterleave2=function(r,n){return r=r>>>n&1431655765,r=858993459&(r|r>>>1),r=252645135&(r|r>>>2),r=16711935&(r|r>>>4),(r=65535&(r|r>>>16))<<16>>16},exports.interleave3=function(r,n,t){return r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),r|=n<<1,t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),r|t<<2},exports.deinterleave3=function(r,n){return r=r>>>n&1227133513,r=3272356035&(r|r>>>2),r=251719695&(r|r>>>4),r=4278190335&(r|r>>>8),(r=1023&(r|r>>>16))<<22>>22},exports.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>countTrailingZeros(r)+1};
},{}],12:[function(require,module,exports){
"use strict";var ticky=require("ticky");module.exports=function(t,i,c){t&&ticky(function(){t.apply(c||null,i||[])})};
},{"ticky":208}],13:[function(require,module,exports){
"use strict";var atoa=require("atoa"),debounce=require("./debounce");module.exports=function(e,n){var t=n||{},r={};return void 0===e&&(e={}),e.on=function(n,t){return r[n]?r[n].push(t):r[n]=[t],e},e.once=function(n,t){return t._once=!0,e.on(n,t),e},e.off=function(n,t){var o=arguments.length;if(1===o)delete r[n];else if(0===o)r={};else{var i=r[n];if(!i)return e;i.splice(i.indexOf(t),1)}return e},e.emit=function(){var n=atoa(arguments);return e.emitterSnapshot(n.shift()).apply(this,n)},e.emitterSnapshot=function(n){var o=(r[n]||[]).slice(0);return function(){var r=atoa(arguments),i=this||e;if("error"===n&&!1!==t.throws&&!o.length)throw 1===r.length?r[0]:r;return o.forEach(function(o){t.async?debounce(o,r,i):o.apply(i,r),o._once&&e.off(n,o)}),e}},e};
},{"./debounce":12,"atoa":10}],14:[function(require,module,exports){
(function (global){
"use strict";function addEventEasy(e,t,n,r){return e.addEventListener(t,n,r)}function addEventHard(e,t,n){return e.attachEvent("on"+t,wrap(e,t,n))}function removeEventEasy(e,t,n,r){return e.removeEventListener(t,n,r)}function removeEventHard(e,t,n){var r=unwrap(e,t,n);if(r)return e.detachEvent("on"+t,r)}function fabricateEvent(e,t,n){var r=-1===eventmap.indexOf(t)?function(){return new customEvent(t,{detail:n})}():function(){var e;return doc.createEvent?(e=doc.createEvent("Event"),e.initEvent(t,!0,!0)):doc.createEventObject&&(e=doc.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r)}function wrapperFactory(e,t,n){return function(t){var r=t||global.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,n.call(e,r)}}function wrap(e,t,n){var r=unwrap(e,t,n)||wrapperFactory(e,t,n);return hardCache.push({wrapper:r,element:e,type:t,fn:n}),r}function unwrap(e,t,n){var r=find(e,t,n);if(r){var a=hardCache[r].wrapper;return hardCache.splice(r,1),a}}function find(e,t,n){var r,a;for(r=0;r<hardCache.length;r++)if(a=hardCache[r],a.element===e&&a.type===t&&a.fn===n)return r}var customEvent=require("custom-event"),eventmap=require("./eventmap"),doc=global.document,addEvent=addEventEasy,removeEvent=removeEventEasy,hardCache=[];global.addEventListener||(addEvent=addEventHard,removeEvent=removeEventHard),module.exports={add:addEvent,remove:removeEvent,fabricate:fabricateEvent};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./eventmap":15,"custom-event":16}],15:[function(require,module,exports){
(function (global){
"use strict";var eventmap=[],eventname="",ron=/^on/;for(eventname in global)ron.test(eventname)&&eventmap.push(eventname.slice(2));module.exports=eventmap;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],16:[function(require,module,exports){
(function (global){
function useNative(){try{var e=new NativeCustomEvent("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var NativeCustomEvent=global.CustomEvent;module.exports=useNative()?NativeCustomEvent:"function"==typeof document.createEvent?function(e,t){var a=document.createEvent("CustomEvent");return t?a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):a.initCustomEvent(e,!1,!1,void 0),a}:function(e,t){var a=document.createEventObject();return a.type=e,t?(a.bubbles=Boolean(t.bubbles),a.cancelable=Boolean(t.cancelable),a.detail=t.detail):(a.bubbles=!1,a.cancelable=!1,a.detail=void 0),a};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],17:[function(require,module,exports){
var detectie=function(){var e=window.navigator.userAgent,n=e.indexOf("MSIE ");if(n>0)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);if(e.indexOf("Trident/")>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var i=e.indexOf("Edge/");return i>0&&parseInt(e.substring(i+5,e.indexOf(".",i)),10)};module.exports=detectie;
},{}],18:[function(require,module,exports){
"use strict";function lookupClass(s){var a=cache[s];return a?a.lastIndex=0:cache[s]=a=new RegExp(start+s+end,"g"),a}function addClass(s,a){var e=s.className;e.length?lookupClass(a).test(e)||(s.className+=" "+a):s.className=a}function rmClass(s,a){s.className=s.className.replace(lookupClass(a)," ").trim()}var cache={},start="(?:^|\\s)",end="(?:\\s|$)";module.exports={add:addClass,rm:rmClass};
},{}],19:[function(require,module,exports){
(function (global){
"use strict";function dragula(e,t){function n(e){return-1!==j.containers.indexOf(e)||z.isContainer(e)}function o(e){var t=e?"remove":"add";touchy(documentElement,t,"mousedown",l),touchy(documentElement,t,"mouseup",p)}function r(e){touchy(documentElement,e?"remove":"add","mousemove",a)}function i(e){var t=e?"remove":"add";crossvent[t](documentElement,"selectstart",u),crossvent[t](documentElement,"click",u)}function c(){o(!0),p({})}function u(e){U&&e.preventDefault()}function l(e){if(D=e.clientX,q=e.clientY,!(1!==whichMouseButton(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=d(t);n&&(U=n,r(),"mousedown"===e.type&&(isInput(t)?t.focus():e.preventDefault()))}}function a(e){if(U){if(0===whichMouseButton(e))return void p({});if(void 0===e.clientX||e.clientX!==D||void 0===e.clientY||e.clientY!==q){if(z.ignoreInputTextSelection){var t=getCoord("clientX",e),n=getCoord("clientY",e);if(isInput(doc.elementFromPoint(t,n)))return}var o=U;r(!0),i(),f(),m(o);var c=getOffset(I);H=getCoord("pageX",e)-c.left,A=getCoord("pageY",e)-c.top,classes.add(K||I,"gu-transit"),O(),w(e)}}}function d(e){if(!(j.dragging&&Y||n(e))){for(var t=e;getParent(e)&&!1===n(getParent(e));){if(z.invalid(e,t))return;if(!(e=getParent(e)))return}var o=getParent(e);if(o&&!z.invalid(e,t)){if(z.moves(e,o,t,nextEl(e)))return{item:e,source:o}}}}function s(e){return!!d(e)}function g(e){var t=d(e);t&&m(t)}function m(e){X(e.item,e.source)&&(K=e.item.cloneNode(!0),j.emit("cloned",K,e.item,"copy")),M=e.source,I=e.item,W=F=nextEl(e.item),j.dragging=!0,j.emit("drag",I,M)}function v(){return!1}function f(){if(j.dragging){var e=K||I;E(e,getParent(e))}}function h(){U=!1,r(!0),i(!0)}function p(e){if(h(),j.dragging){var t=K||I,n=getCoord("clientX",e),o=getCoord("clientY",e),r=getElementBehindPoint(Y,n,o),i=b(r,n,o);i&&(K&&z.copySortSource||!K||i!==M)?E(t,i):z.removeOnSpill?y():S()}}function E(e,t){var n=getParent(e);K&&z.copySortSource&&t===M&&n.removeChild(I),P(t)?j.emit("cancel",e,M,M):j.emit("drop",e,t,M,F),C()}function y(){if(j.dragging){var e=K||I,t=getParent(e);t&&t.removeChild(e),j.emit(K?"cancel":"remove",e,t,M),C()}}function S(e){if(j.dragging){var t=arguments.length>0?e:z.revertOnSpill,n=K||I,o=getParent(n),r=P(o);!1===r&&t&&(K?o&&o.removeChild(K):M.insertBefore(n,W)),r||t?j.emit("cancel",n,M,M):j.emit("drop",n,o,M,F),C()}}function C(){var e=K||I;h(),B(),e&&classes.rm(e,"gu-transit"),L&&clearTimeout(L),j.dragging=!1,k&&j.emit("out",e,k,M),j.emit("dragend",e),M=I=K=W=F=L=k=null}function P(e,t){var n;return n=void 0!==t?t:Y?F:nextEl(K||I),e===M&&n===W}function b(e,t,o){for(var r=e;r&&!function(){if(!1===n(r))return!1;var i=N(r,e),c=R(r,i,t,o);return!!P(r,c)||z.accepts(I,r,M,c)}();)r=getParent(r);return r}function w(e){function t(e){j.emit(e,c,k,M)}if(Y){e.preventDefault();var n=getCoord("clientX",e),o=getCoord("clientY",e),r=n-H,i=o-A;Y.style.left=r+"px",Y.style.top=i+"px";var c=K||I,u=getElementBehindPoint(Y,n,o),l=b(u,n,o),a=null!==l&&l!==k;(a||null===l)&&(function(){k&&t("out")}(),k=l,function(){a&&t("over")}());var d=getParent(c);if(l===M&&K&&!z.copySortSource)return void(d&&d.removeChild(c));var s,g=N(l,u);if(null!==g)s=R(l,g,n,o);else{if(!0!==z.revertOnSpill||K)return void(K&&d&&d.removeChild(c));s=W,l=M}(null===s&&a||s!==c&&s!==nextEl(c))&&(F=s,l.insertBefore(c,s),j.emit("shadow",c,l,M))}}function x(e){classes.rm(e,"gu-hide")}function T(e){j.dragging&&classes.add(e,"gu-hide")}function O(){if(!Y){var e=I.getBoundingClientRect();Y=I.cloneNode(!0),Y.style.width=getRectWidth(e)+"px",Y.style.height=getRectHeight(e)+"px",classes.rm(Y,"gu-transit"),classes.add(Y,"gu-mirror"),z.mirrorContainer.appendChild(Y),touchy(documentElement,"add","mousemove",w),classes.add(z.mirrorContainer,"gu-unselectable"),j.emit("cloned",Y,I,"mirror")}}function B(){Y&&(classes.rm(z.mirrorContainer,"gu-unselectable"),touchy(documentElement,"remove","mousemove",w),getParent(Y).removeChild(Y),Y=null)}function N(e,t){for(var n=t;n!==e&&getParent(n)!==e;)n=getParent(n);return n===documentElement?null:n}function R(e,t,n,o){function r(e){return e?nextEl(t):t}var i="horizontal"===z.direction;return t!==e?function(){var e=t.getBoundingClientRect();return r(i?n>e.left+getRectWidth(e)/2:o>e.top+getRectHeight(e)/2)}():function(){var t,r,c,u=e.children.length;for(t=0;t<u;t++){if(r=e.children[t],c=r.getBoundingClientRect(),i&&c.left+c.width/2>n)return r;if(!i&&c.top+c.height/2>o)return r}return null}()}function X(e,t){return"boolean"==typeof z.copy?z.copy:z.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var Y,M,I,H,A,D,q,W,F,K,L,U,k=null,z=t||{};void 0===z.moves&&(z.moves=always),void 0===z.accepts&&(z.accepts=always),void 0===z.invalid&&(z.invalid=v),void 0===z.containers&&(z.containers=e||[]),void 0===z.isContainer&&(z.isContainer=never),void 0===z.copy&&(z.copy=!1),void 0===z.copySortSource&&(z.copySortSource=!1),void 0===z.revertOnSpill&&(z.revertOnSpill=!1),void 0===z.removeOnSpill&&(z.removeOnSpill=!1),void 0===z.direction&&(z.direction="vertical"),void 0===z.ignoreInputTextSelection&&(z.ignoreInputTextSelection=!0),void 0===z.mirrorContainer&&(z.mirrorContainer=doc.body);var j=emitter({containers:z.containers,start:g,end:f,cancel:S,remove:y,destroy:c,canMove:s,dragging:!1});return!0===z.removeOnSpill&&j.on("over",x).on("out",T),o(),j}function touchy(e,t,n,o){var r={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};global.navigator.pointerEnabled?crossvent[t](e,i[n],o):global.navigator.msPointerEnabled?crossvent[t](e,c[n],o):(crossvent[t](e,r[n],o),crossvent[t](e,n,o))}function whichMouseButton(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function getOffset(e){var t=e.getBoundingClientRect();return{left:t.left+getScroll("scrollLeft","pageXOffset"),top:t.top+getScroll("scrollTop","pageYOffset")}}function getScroll(e,t){return void 0!==global[t]?global[t]:documentElement.clientHeight?documentElement[e]:doc.body[e]}function getElementBehindPoint(e,t,n){var o,r=e||{},i=r.className;return r.className+=" gu-hide",o=doc.elementFromPoint(t,n),r.className=i,o}function never(){return!1}function always(){return!0}function getRectWidth(e){return e.width||e.right-e.left}function getRectHeight(e){return e.height||e.bottom-e.top}function getParent(e){return e.parentNode===doc?null:e.parentNode}function isInput(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||isEditable(e)}function isEditable(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||isEditable(getParent(e))))}function nextEl(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function getEventHost(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function getCoord(e,t){var n=getEventHost(t),o={pageX:"clientX",pageY:"clientY"};return e in o&&!(e in n)&&o[e]in n&&(e=o[e]),n[e]}var emitter=require("contra/emitter"),crossvent=require("crossvent"),classes=require("./classes"),doc=document,documentElement=doc.documentElement;module.exports=dragula;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./classes":18,"contra/emitter":13,"crossvent":14}],20:[function(require,module,exports){
"use strict";function earcut(e,n,r){r=r||2;var t=n&&n.length,i=t?n[0]*r:e.length,x=linkedList(e,0,i,r,!0),a=[];if(!x)return a;var o,l,u,s,v,f,y;if(t&&(x=eliminateHoles(e,n,x,r)),e.length>80*r){o=u=e[0],l=s=e[1];for(var p=r;p<i;p+=r)v=e[p],f=e[p+1],v<o&&(o=v),f<l&&(l=f),v>u&&(u=v),f>s&&(s=f);y=Math.max(u-o,s-l),y=0!==y?1/y:0}return earcutLinked(x,a,r,o,l,y),a}function linkedList(e,n,r,t,i){var x,a;if(i===signedArea(e,n,r,t)>0)for(x=n;x<r;x+=t)a=insertNode(x,e[x],e[x+1],a);else for(x=r-t;x>=n;x-=t)a=insertNode(x,e[x],e[x+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(e,n){if(!e)return e;n||(n=e);var r,t=e;do{if(r=!1,t.steiner||!equals(t,t.next)&&0!==area(t.prev,t,t.next))t=t.next;else{if(removeNode(t),(t=n=t.prev)===t.next)break;r=!0}}while(r||t!==n);return n}function earcutLinked(e,n,r,t,i,x,a){if(e){!a&&x&&indexCurve(e,t,i,x);for(var o,l,u=e;e.prev!==e.next;)if(o=e.prev,l=e.next,x?isEarHashed(e,t,i,x):isEar(e))n.push(o.i/r),n.push(e.i/r),n.push(l.i/r),removeNode(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?(e=cureLocalIntersections(e,n,r),earcutLinked(e,n,r,t,i,x,2)):2===a&&splitEarcut(e,n,r,t,i,x):earcutLinked(filterPoints(e),n,r,t,i,x,1);break}}}function isEar(e){var n=e.prev,r=e,t=e.next;if(area(n,r,t)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(pointInTriangle(n.x,n.y,r.x,r.y,t.x,t.y,i.x,i.y)&&area(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function isEarHashed(e,n,r,t){var i=e.prev,x=e,a=e.next;if(area(i,x,a)>=0)return!1;for(var o=i.x<x.x?i.x<a.x?i.x:a.x:x.x<a.x?x.x:a.x,l=i.y<x.y?i.y<a.y?i.y:a.y:x.y<a.y?x.y:a.y,u=i.x>x.x?i.x>a.x?i.x:a.x:x.x>a.x?x.x:a.x,s=i.y>x.y?i.y>a.y?i.y:a.y:x.y>a.y?x.y:a.y,v=zOrder(o,l,n,r,t),f=zOrder(u,s,n,r,t),y=e.prevZ,p=e.nextZ;y&&y.z>=v&&p&&p.z<=f;){if(y!==e.prev&&y!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,p!==e.prev&&p!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;y&&y.z>=v;){if(y!==e.prev&&y!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&pointInTriangle(i.x,i.y,x.x,x.y,a.x,a.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function cureLocalIntersections(e,n,r){var t=e;do{var i=t.prev,x=t.next.next;!equals(i,x)&&intersects(i,t,t.next,x)&&locallyInside(i,x)&&locallyInside(x,i)&&(n.push(i.i/r),n.push(t.i/r),n.push(x.i/r),removeNode(t),removeNode(t.next),t=e=x),t=t.next}while(t!==e);return t}function splitEarcut(e,n,r,t,i,x){var a=e;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&isValidDiagonal(a,o)){var l=splitPolygon(a,o);return a=filterPoints(a,a.next),l=filterPoints(l,l.next),earcutLinked(a,n,r,t,i,x),void earcutLinked(l,n,r,t,i,x)}o=o.next}a=a.next}while(a!==e)}function eliminateHoles(e,n,r,t){var i,x,a,o,l,u=[];for(i=0,x=n.length;i<x;i++)a=n[i]*t,o=i<x-1?n[i+1]*t:e.length,l=linkedList(e,a,o,t,!1),l===l.next&&(l.steiner=!0),u.push(getLeftmost(l));for(u.sort(compareX),i=0;i<u.length;i++)eliminateHole(u[i],r),r=filterPoints(r,r.next);return r}function compareX(e,n){return e.x-n.x}function eliminateHole(e,n){if(n=findHoleBridge(e,n)){var r=splitPolygon(n,e);filterPoints(r,r.next)}}function findHoleBridge(e,n){var r,t=n,i=e.x,x=e.y,a=-1/0;do{if(x<=t.y&&x>=t.next.y&&t.next.y!==t.y){var o=t.x+(x-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(o<=i&&o>a){if(a=o,o===i){if(x===t.y)return t;if(x===t.next.y)return t.next}r=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!r)return null;if(i===a)return r.prev;var l,u=r,s=r.x,v=r.y,f=1/0;for(t=r.next;t!==u;)i>=t.x&&t.x>=s&&i!==t.x&&pointInTriangle(x<v?i:a,x,s,v,x<v?a:i,x,t.x,t.y)&&((l=Math.abs(x-t.y)/(i-t.x))<f||l===f&&t.x>r.x)&&locallyInside(t,e)&&(r=t,f=l),t=t.next;return r}function indexCurve(e,n,r,t){var i=e;do{null===i.z&&(i.z=zOrder(i.x,i.y,n,r,t)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,sortLinked(i)}function sortLinked(e){var n,r,t,i,x,a,o,l,u=1;do{for(r=e,e=null,x=null,a=0;r;){for(a++,t=r,o=0,n=0;n<u&&(o++,t=t.nextZ);n++);for(l=u;o>0||l>0&&t;)0!==o&&(0===l||!t||r.z<=t.z)?(i=r,r=r.nextZ,o--):(i=t,t=t.nextZ,l--),x?x.nextZ=i:e=i,i.prevZ=x,x=i;r=t}x.nextZ=null,u*=2}while(a>1);return e}function zOrder(e,n,r,t,i){return e=32767*(e-r)*i,n=32767*(n-t)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),e|n<<1}function getLeftmost(e){var n=e,r=e;do{n.x<r.x&&(r=n),n=n.next}while(n!==e);return r}function pointInTriangle(e,n,r,t,i,x,a,o){return(i-a)*(n-o)-(e-a)*(x-o)>=0&&(e-a)*(t-o)-(r-a)*(n-o)>=0&&(r-a)*(x-o)-(i-a)*(t-o)>=0}function isValidDiagonal(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!intersectsPolygon(e,n)&&locallyInside(e,n)&&locallyInside(n,e)&&middleInside(e,n)}function area(e,n,r){return(n.y-e.y)*(r.x-n.x)-(n.x-e.x)*(r.y-n.y)}function equals(e,n){return e.x===n.x&&e.y===n.y}function intersects(e,n,r,t){return!!(equals(e,n)&&equals(r,t)||equals(e,t)&&equals(r,n))||area(e,n,r)>0!=area(e,n,t)>0&&area(r,t,e)>0!=area(r,t,n)>0}function intersectsPolygon(e,n){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==n.i&&r.next.i!==n.i&&intersects(r,r.next,e,n))return!0;r=r.next}while(r!==e);return!1}function locallyInside(e,n){return area(e.prev,e,e.next)<0?area(e,n,e.next)>=0&&area(e,e.prev,n)>=0:area(e,n,e.prev)<0||area(e,e.next,n)<0}function middleInside(e,n){var r=e,t=!1,i=(e.x+n.x)/2,x=(e.y+n.y)/2;do{r.y>x!=r.next.y>x&&r.next.y!==r.y&&i<(r.next.x-r.x)*(x-r.y)/(r.next.y-r.y)+r.x&&(t=!t),r=r.next}while(r!==e);return t}function splitPolygon(e,n){var r=new Node(e.i,e.x,e.y),t=new Node(n.i,n.x,n.y),i=e.next,x=n.prev;return e.next=n,n.prev=e,r.next=i,i.prev=r,t.next=r,r.prev=t,x.next=t,t.prev=x,t}function insertNode(e,n,r,t){var i=new Node(e,n,r);return t?(i.next=t.next,i.prev=t,t.next.prev=i,t.next=i):(i.prev=i,i.next=i),i}function removeNode(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Node(e,n,r){this.i=e,this.x=n,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(e,n,r,t){for(var i=0,x=n,a=r-t;x<r;x+=t)i+=(e[a]-e[x])*(e[x+1]+e[a+1]),a=x;return i}module.exports=earcut,module.exports.default=earcut,earcut.deviation=function(e,n,r,t){var i=n&&n.length,x=i?n[0]*r:e.length,a=Math.abs(signedArea(e,0,x,r));if(i)for(var o=0,l=n.length;o<l;o++){var u=n[o]*r,s=o<l-1?n[o+1]*r:e.length;a-=Math.abs(signedArea(e,u,s,r))}var v=0;for(o=0;o<t.length;o+=3){var f=t[o]*r,y=t[o+1]*r,p=t[o+2]*r;v+=Math.abs((e[f]-e[p])*(e[y+1]-e[f+1])-(e[f]-e[y])*(e[p+1]-e[f+1]))}return 0===a&&0===v?0:Math.abs((v-a)/a)},earcut.flatten=function(e){for(var n=e[0][0].length,r={vertices:[],holes:[],dimensions:n},t=0,i=0;i<e.length;i++){for(var x=0;x<e[i].length;x++)for(var a=0;a<n;a++)r.vertices.push(e[i][x][a]);i>0&&(t+=e[i-1].length,r.holes.push(t))}return r};
},{}],21:[function(require,module,exports){
"use strict";function Events(){}function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function EventEmitter(){this._events=new Events,this._eventsCount=0}var has=Object.prototype.hasOwnProperty,prefix="~";Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(prefix=!1)),EventEmitter.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)has.call(e,t)&&n.push(prefix?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},EventEmitter.prototype.listeners=function(e,t){var n=prefix?prefix+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o},EventEmitter.prototype.emit=function(e,t,n,r,s,i){var o=prefix?prefix+e:e;if(!this._events[o])return!1;var v,f,h=this._events[o],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,r),!0;case 5:return h.fn.call(h.context,t,n,r,s),!0;case 6:return h.fn.call(h.context,t,n,r,s,i),!0}for(f=1,v=new Array(c-1);f<c;f++)v[f-1]=arguments[f];h.fn.apply(h.context,v)}else{var p,a=h.length;for(f=0;f<a;f++)switch(h[f].once&&this.removeListener(e,h[f].fn,void 0,!0),c){case 1:h[f].fn.call(h[f].context);break;case 2:h[f].fn.call(h[f].context,t);break;case 3:h[f].fn.call(h[f].context,t,n);break;case 4:h[f].fn.call(h[f].context,t,n,r);break;default:if(!v)for(p=1,v=new Array(c-1);p<c;p++)v[p-1]=arguments[p];h[f].fn.apply(h[f].context,v)}}return!0},EventEmitter.prototype.on=function(e,t,n){var r=new EE(t,n||this),s=prefix?prefix+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},EventEmitter.prototype.once=function(e,t,n){var r=new EE(t,n||this,!0),s=prefix?prefix+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},EventEmitter.prototype.removeListener=function(e,t,n,r){var s=prefix?prefix+e:e;if(!this._events[s])return this;if(!t)return 0==--this._eventsCount?this._events=new Events:delete this._events[s],this;var i=this._events[s];if(i.fn)i.fn!==t||r&&!i.once||n&&i.context!==n||(0==--this._eventsCount?this._events=new Events:delete this._events[s]);else{for(var o=0,v=[],f=i.length;o<f;o++)(i[o].fn!==t||r&&!i[o].once||n&&i[o].context!==n)&&v.push(i[o]);v.length?this._events[s]=1===v.length?v[0]:v:0==--this._eventsCount?this._events=new Events:delete this._events[s]}return this},EventEmitter.prototype.removeAllListeners=function(e){var t;return e?(t=prefix?prefix+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new Events:delete this._events[t])):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.prefixed=prefix,EventEmitter.EventEmitter=EventEmitter,"undefined"!=typeof module&&(module.exports=EventEmitter);
},{}],22:[function(require,module,exports){
var saveAs=saveAs||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,n=function(){return e.URL||e.webkitURL||e},o=t.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in o,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),c=e.webkitRequestFileSystem,s=e.requestFileSystem||c||e.mozRequestFileSystem,d=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},f=0,u=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},l=function(e,t,n){t=[].concat(t);for(var o=t.length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){d(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["ï»¿",e],{type:e.type}):e},v=function(t,d,v){v||(t=p(t));var w,y,m,S=this,h=t.type,R=!1,O=function(){l(S,"writestart progress write writeend".split(" "))},g=function(){if(y&&a&&"undefined"!=typeof FileReader){var o=new FileReader;return o.onloadend=function(){var e=o.result;y.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),S.readyState=S.DONE,O()},o.readAsDataURL(t),void(S.readyState=S.INIT)}if(!R&&w||(w=n().createObjectURL(t)),y)y.location.href=w;else{void 0===e.open(w,"_blank")&&a&&(e.location.href=w)}S.readyState=S.DONE,O(),u(w)},b=function(e){return function(){if(S.readyState!==S.DONE)return e.apply(this,arguments)}},E={create:!0,exclusive:!1};return S.readyState=S.INIT,d||(d="download"),r?(w=n().createObjectURL(t),void setTimeout(function(){o.href=w,o.download=d,i(o),O(),u(w),S.readyState=S.DONE})):(e.chrome&&h&&"application/octet-stream"!==h&&(m=t.slice||t.webkitSlice,t=m.call(t,0,t.size,"application/octet-stream"),R=!0),c&&"download"!==d&&(d+=".download"),("application/octet-stream"===h||c)&&(y=e),s?(f+=t.size,void s(e.TEMPORARY,f,b(function(e){e.root.getDirectory("saved",E,b(function(e){var n=function(){e.getFile(d,E,b(function(e){e.createWriter(b(function(n){n.onwriteend=function(t){y.location.href=e.toURL(),S.readyState=S.DONE,l(S,"writeend",t),u(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&g()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=S["on"+e]}),n.write(t),S.abort=function(){n.abort(),S.readyState=S.DONE},S.readyState=S.WRITING}),g)}),g)};e.getFile(d,{create:!1},b(function(e){e.remove(),n()}),b(function(e){e.code===e.NOT_FOUND_ERR?n():g()}))}),g)}),g)):void g())},w=v.prototype,y=function(e,t,n){return new v(e,t,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=p(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(w.abort=function(){var e=this;e.readyState=e.DONE,l(e,"abort")},w.readyState=w.INIT=0,w.WRITING=1,w.DONE=2,w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null,y)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return saveAs});
},{}],23:[function(require,module,exports){
!function(e){var i=/iPhone/i,o=/iPod/i,t=/iPad/i,n=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,d=/Android/i,s=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,b=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,r=/Windows Phone/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,a=/BlackBerry/i,l=/BB10/i,p=/Opera Mini/i,f=/(CriOS|Chrome)(?=.*\bMobile\b)/i,u=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,c=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),w=function(e,i){return e.test(i)},v=function(e){var v=e||navigator.userAgent,A=v.split("[FBAN");if(void 0!==A[1]&&(v=A[0]),A=v.split("Twitter"),void 0!==A[1]&&(v=A[0]),this.apple={phone:w(i,v),ipod:w(o,v),tablet:!w(i,v)&&w(t,v),device:w(i,v)||w(o,v)||w(t,v)},this.amazon={phone:w(s,v),tablet:!w(s,v)&&w(b,v),device:w(s,v)||w(b,v)},this.android={phone:w(s,v)||w(n,v),tablet:!w(s,v)&&!w(n,v)&&(w(b,v)||w(d,v)),device:w(s,v)||w(b,v)||w(n,v)||w(d,v)},this.windows={phone:w(r,v),tablet:w(h,v),device:w(r,v)||w(h,v)},this.other={blackberry:w(a,v),blackberry10:w(l,v),opera:w(p,v),firefox:w(u,v),chrome:w(f,v),device:w(a,v)||w(l,v)||w(p,v)||w(u,v)||w(f,v)},this.seven_inch=w(c,v),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},A=function(){var e=new v;return e.Class=v,e};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=v:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=A():"function"==typeof define&&define.amd?define("isMobile",[],e.isMobile=A()):e.isMobile=A()}(this);
},{}],24:[function(require,module,exports){
(function (global){
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.jspdf=e()}(this,function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=(function(){function t(t){this.value=t}function e(e){function n(i,o){try{var a=e[i](o),s=a.value;s instanceof t?Promise.resolve(s.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):o=null}var i,o;this._invoke=function(t,e){return new Promise(function(r,a){var s={key:t,arg:e,resolve:r,reject:a,next:null};o?o=o.next=s:(i=o=s,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(e){function n(t){var n={};this.subscribe=function(t,e,r){if("function"!=typeof e)return!1;n.hasOwnProperty(t)||(n[t]={});var i=Math.random().toString(35);return n[t][i]=[e,!!r],i},this.unsubscribe=function(t){for(var e in n)if(n[e][t])return delete n[e][t],!0;return!1},this.publish=function(r){if(n.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var a in n[r]){var s=n[r][a];try{s[0].apply(t,i)}catch(t){e.console&&console.error("jsPDF PubSub Error",t.message,t)}s[1]&&o.push(a)}o.length&&o.forEach(this.unsubscribe)}}}function i(c,l,u,h){var f={};"object"===(void 0===c?"undefined":t(c))&&(c=(f=c).orientation,l=f.unit||l,u=f.format||u,h=f.compress||f.compressPdf||h),l=l||"mm",u=u||"a4",c=(""+(c||"P")).toLowerCase(),(""+u).toLowerCase();var d,p,m,g,w,y,v,b,x,k=!!h&&"function"==typeof Uint8Array,_=f.textColor||"0 g",C=f.drawColor||"0 G",A=f.fontSize||16,S=f.lineHeight||1.15,q=f.lineWidth||.200025,T=2,P=!1,I=[],E={},O={},F=0,B=[],R=[],j=[],D=[],z=[],N=0,L=0,M=0,U={title:"",subject:"",author:"",keywords:"",creator:""},H={},W=new n(H),X=f.hotfixes||[],V=function(t){return t.toFixed(2)},G=function(t){return t.toFixed(3)},Y=function(t){return("0"+parseInt(t)).slice(-2)},J=function(t){P?B[g].push(t):(M+=t.length+1,D.push(t))},Q=function(){return T++,I[T]=M,J(T+" 0 obj"),T},K=function(t){J("stream"),J(t),J("endstream")},$=function(){var t,n,r,a,s,c,l,u,h,f=[];for(l=e.adler32cs||i.adler32cs,k&&void 0===l&&(k=!1),t=1;t<=F;t++){if(f.push(Q()),u=(w=j[t].width)*p,h=(y=j[t].height)*p,J("<</Type /Page"),J("/Parent 1 0 R"),J("/Resources 2 0 R"),J("/MediaBox [0 0 "+V(u)+" "+V(h)+"]"),W.publish("putPage",{pageNumber:t,page:B[t]}),J("/Contents "+(T+1)+" 0 R"),J(">>"),J("endobj"),n=B[t].join("\n"),Q(),k){for(r=[],a=n.length;a--;)r[a]=n.charCodeAt(a);c=l.from(n),(s=new o(6)).append(new Uint8Array(r)),n=s.flush(),(r=new Uint8Array(n.length+6)).set(new Uint8Array([120,156])),r.set(n,2),r.set(new Uint8Array([255&c,c>>8&255,c>>16&255,c>>24&255]),n.length+2),n=String.fromCharCode.apply(null,r),J("<</Length "+n.length+" /Filter [/FlateDecode]>>")}else J("<</Length "+n.length+">>");K(n),J("endobj")}I[1]=M,J("1 0 obj"),J("<</Type /Pages");var d="/Kids [";for(a=0;a<F;a++)d+=f[a]+" 0 R ";J(d+"]"),J("/Count "+F),J(">>"),J("endobj"),W.publish("postPutPages")},Z=function(t){t.objectNumber=Q(),J("<</BaseFont/"+t.PostScriptName+"/Type/Font"),"string"==typeof t.encoding&&J("/Encoding/"+t.encoding),J("/Subtype/Type1>>"),J("endobj")},tt=function(){for(var t in E)E.hasOwnProperty(t)&&Z(E[t])},et=function(){W.publish("putXobjectDict")},nt=function(){J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),J("/Font <<");for(var t in E)E.hasOwnProperty(t)&&J("/"+t+" "+E[t].objectNumber+" 0 R");J(">>"),J("/XObject <<"),et(),J(">>")},rt=function(){tt(),W.publish("putResources"),I[2]=M,J("2 0 obj"),J("<<"),nt(),J(">>"),J("endobj"),W.publish("postPutResources")},it=function(){W.publish("putAdditionalObjects");for(var t=0;t<z.length;t++){var e=z[t];I[e.objId]=M,J(e.objId+" 0 obj"),J(e.content),J("endobj")}T+=z.length,W.publish("postPutAdditionalObjects")},ot=function(t,e,n){O.hasOwnProperty(e)||(O[e]={}),O[e][n]=t},at=function(t,e,n,r){var i="F"+(Object.keys(E).length+1).toString(10),o=E[i]={id:i,PostScriptName:t,fontName:e,fontStyle:n,encoding:r,metadata:{}};return ot(i,e,n),W.publish("addFont",o),i},st=function(t,e){var n,r,i,o,a,s,c,l,u;if(e=e||{},i=e.sourceEncoding||"Unicode",a=e.outputEncoding,(e.autoencode||a)&&E[d].metadata&&E[d].metadata[i]&&E[d].metadata[i].encoding&&(o=E[d].metadata[i].encoding,!a&&E[d].encoding&&(a=E[d].encoding),!a&&o.codePages&&(a=o.codePages[0]),"string"==typeof a&&(a=o[a]),a)){for(c=!1,s=[],n=0,r=t.length;n<r;n++)(l=a[t.charCodeAt(n)])?s.push(String.fromCharCode(l)):s.push(t[n]),s[n].charCodeAt(0)>>8&&(c=!0);t=s.join("")}for(n=t.length;void 0===c&&0!==n;)t.charCodeAt(n-1)>>8&&(c=!0),n--;if(!c)return t;for(s=e.noBOM?[]:[254,255],n=0,r=t.length;n<r;n++){if(l=t.charCodeAt(n),(u=l>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(u),s.push(l-(u<<8))}return String.fromCharCode.apply(void 0,s)},ct=function(t,e){return st(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},lt=function(){J("/Producer (jsPDF "+i.version+")");for(var t in U)U.hasOwnProperty(t)&&U[t]&&J("/"+t.substr(0,1).toUpperCase()+t.substr(1)+" ("+ct(U[t])+")");var e=new Date,n=e.getTimezoneOffset(),r=n<0?"+":"-",o=Math.floor(Math.abs(n/60)),a=Math.abs(n%60),s=[r,Y(o),"'",Y(a),"'"].join("");J(["/CreationDate (D:",e.getFullYear(),Y(e.getMonth()+1),Y(e.getDate()),Y(e.getHours()),Y(e.getMinutes()),Y(e.getSeconds()),s,")"].join(""))},ut=function(){switch(J("/Type /Catalog"),J("/Pages 1 0 R"),b||(b="fullwidth"),b){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var t=""+b;"%"===t.substr(t.length-1)&&(b=parseInt(b)/100),"number"==typeof b&&J("/OpenAction [3 0 R /XYZ null null "+V(b)+"]")}switch(x||(x="continuous"),x){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}v&&J("/PageMode /"+v),W.publish("putCatalog")},ht=function(){J("/Size "+(T+1)),J("/Root "+T+" 0 R"),J("/Info "+(T-1)+" 0 R")},ft=function(t,e){var n="string"==typeof e&&e.toLowerCase();if("string"==typeof t){var r=t.toLowerCase();s.hasOwnProperty(r)&&(t=s[r][0]/p,e=s[r][1]/p)}if(Array.isArray(t)&&(e=t[1],t=t[0]),n){switch(n.substr(0,1)){case"l":e>t&&(n="s");break;case"p":t>e&&(n="s")}"s"===n&&(m=t,t=e,e=m)}P=!0,B[++F]=[],j[F]={width:Number(t)||w,height:Number(e)||y},R[F]={},mt(F)},dt=function(){ft.apply(this,arguments),J(V(q*p)+" w"),J(C),0!==N&&J(N+" J"),0!==L&&J(L+" j"),W.publish("addPage",{pageNumber:F})},pt=function(t){t>0&&t<=F&&(B.splice(t,1),j.splice(t,1),g>--F&&(g=F),this.setPage(g))},mt=function(t){t>0&&t<=F&&(g=t,w=j[t].width,y=j[t].height)},gt=function(t,e){var n;switch(t=void 0!==t?t:E[d].fontName,e=void 0!==e?e:E[d].fontStyle,void 0!==t&&(t=t.toLowerCase()),t){case"sans-serif":case"verdana":case"arial":case"helvetica":t="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":t="courier";break;case"serif":case"cursive":case"fantasy":default:t="times"}try{n=O[t][e]}catch(t){}return n||null==(n=O.times[e])&&(n=O.times.normal),n},wt=function(){P=!1,T=2,M=0,D=[],I=[],z=[],W.publish("buildDocument"),J("%PDF-"+a),$(),it(),rt(),Q(),J("<<"),lt(),J(">>"),J("endobj"),Q(),J("<<"),ut(),J(">>"),J("endobj");var t,e=M,n="0000000000";for(J("xref"),J("0 "+(T+1)),J(n+" 65535 f "),t=1;t<=T;t++){var r=I[t];J("function"==typeof r?(n+I[t]()).slice(-10)+" 00000 n ":(n+I[t]).slice(-10)+" 00000 n ")}return J("trailer"),J("<<"),ht(),J(">>"),J("startxref"),J(""+e),J("%%EOF"),P=!0,D.join("\n")},yt=function(t){var e="S";return"F"===t?e="f":"FD"===t||"DF"===t?e="B":"f"!==t&&"f*"!==t&&"B"!==t&&"B*"!==t||(e=t),e},vt=function(){for(var t=wt(),e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n);e--;)r[e]=t.charCodeAt(e);return n},bt=function(){return new Blob([vt()],{type:"application/pdf"})},xt=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var n=t.stack||"";~n.indexOf(" at ")&&(n=n.split(" at ")[1]);var r="Error in function "+n.split("\n")[0].split("<")[0]+": "+t.message;if(!e.console)throw new Error(r);e.console.error(r,t),e.alert&&alert(r)}},t.foo.bar=t,t.foo}(function(t,n){var i="dataur"===(""+t).substr(0,6)?"data:application/pdf;base64,"+btoa(wt()):0;switch(t){case void 0:return wt();case"save":if(navigator.getUserMedia&&(void 0===e.URL||void 0===e.URL.createObjectURL))return H.output("dataurlnewwindow");r(bt(),n),"function"==typeof r.unload&&e.setTimeout&&setTimeout(r.unload,911);break;case"arraybuffer":return vt();case"blob":return bt();case"bloburi":case"bloburl":return e.URL&&e.URL.createObjectURL(bt())||void 0;case"datauristring":case"dataurlstring":return i;case"dataurlnewwindow":var o=e.open(i);if(o||"undefined"==typeof safari)return o;case"datauri":case"dataurl":return e.document.location.href=i;default:throw new Error('Output type "'+t+'" is not supported.')}}),kt=function(t){return!0===Array.isArray(X)&&X.indexOf(t)>-1};switch(l){case"pt":p=1;break;case"mm":p=72/25.4000508;break;case"cm":p=72/2.54000508;break;case"in":p=72;break;case"px":p=1==kt("px_scaling")?.75:96/72;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+l}H.internal={pdfEscape:ct,getStyle:yt,getFont:function(){return E[gt.apply(H,arguments)]},getFontSize:function(){return A},getLineHeight:function(){return A*S},write:function(t){J(1===arguments.length?t:Array.prototype.join.call(arguments," "))},getCoordinateString:function(t){return V(t*p)},getVerticalCoordinateString:function(t){return V((y-t)*p)},collections:{},newObject:Q,newAdditionalObject:function(){var t=2*B.length+1,e={objId:t+=z.length,content:""};return z.push(e),e},newObjectDeferred:function(){return T++,I[T]=function(){return M},T},newObjectDeferredBegin:function(t){I[t]=M},putStream:K,events:W,scaleFactor:p,pageSize:{get width(){return w},get height(){return y}},output:function(t,e){return xt(t,e)},getNumberOfPages:function(){return B.length-1},pages:B,out:J,f2:V,getPageInfo:function(t){return{objId:2*(t-1)+3,pageNumber:t,pageContext:R[t]}},getCurrentPageInfo:function(){return{objId:2*(g-1)+3,pageNumber:g,pageContext:R[g]}},getPDFVersion:function(){return a},hasHotfix:kt},H.addPage=function(){return dt.apply(this,arguments),this},H.setPage=function(){return mt.apply(this,arguments),this},H.insertPage=function(t){return this.addPage(),this.movePage(g,t),this},H.movePage=function(t,e){if(t>e){for(var n=B[t],r=j[t],i=R[t],o=t;o>e;o--)B[o]=B[o-1],j[o]=j[o-1],R[o]=R[o-1];B[e]=n,j[e]=r,R[e]=i,this.setPage(e)}else if(t<e){for(var n=B[t],r=j[t],i=R[t],o=t;o<e;o++)B[o]=B[o+1],j[o]=j[o+1],R[o]=R[o+1];B[e]=n,j[e]=r,R[e]=i,this.setPage(e)}return this},H.deletePage=function(){return pt.apply(this,arguments),this},H.setDisplayMode=function(t,e,n){if(b=t,x=e,v=n,-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(n))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+n+'" is not recognized.');return this},H.text=function(t,e,n,r,i,o){function a(t){return t=t.split("\t").join(Array(f.TabLen||9).join(" ")),ct(t,r)}"number"==typeof t&&(m=n,n=e,e=t,t=m),"string"==typeof t&&(t=t.match(/[\n\r]/)?t.split(/\r\n|\r|\n/g):[t]),"string"==typeof i&&(o=i,i=null),"string"==typeof r&&(o=r,r=null),"number"==typeof r&&(i=r,r=null);var s="",c="Td";if(i){i*=Math.PI/180;var l=Math.cos(i),u=Math.sin(i);s=[V(l),V(u),V(-1*u),V(l),""].join(" "),c="Tm"}"noBOM"in(r=r||{})||(r.noBOM=!0),"autoencode"in r||(r.autoencode=!0);var h="",g=this.internal.getCurrentPageInfo().pageContext;if(!0===r.stroke?!0!==g.lastTextWasStroke&&(h="1 Tr\n",g.lastTextWasStroke=!0):(g.lastTextWasStroke&&(h="0 Tr\n"),g.lastTextWasStroke=!1),void 0===this._runningPageHeight&&(this._runningPageHeight=0),"string"==typeof t)t=a(t);else{if("[object Array]"!==Object.prototype.toString.call(t))throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');for(var w=t.concat(),v=[],b=w.length;b--;)v.push(a(w.shift()));if(o){var x,k,C,q=A*S,T=t.map(function(t){return this.getStringUnitWidth(t)*A/p},this);if(C=Math.max.apply(Math,T),"center"===o)x=e-C/2,e-=T[0]/2;else{if("right"!==o)throw new Error('Unrecognized alignment option, use "center" or "right".');x=e-C,e-=T[0]}k=e,t=v[0];for(var P=1,b=v.length;P<b;P++){var I=C-T[P];"center"===o&&(I/=2),t+=") Tj\n"+(x-k+I)+" -"+q+" Td ("+v[P],k=x+I}}else t=v.join(") Tj\nT* (")}var E;return E=V((y-n)*p),J("BT\n/"+d+" "+A+" Tf\n"+A*S+" TL\n"+h+_+"\n"+s+V(e*p)+" "+E+" "+c+"\n("+t+") Tj\nET"),this},H.lstext=function(t,e,n,r){console.warn("jsPDF.lstext is deprecated");for(var i=0,o=t.length;i<o;i++,e+=r)this.text(t[i],e,n);return this},H.line=function(t,e,n,r){return this.lines([[n-t,r-e]],t,e)},H.clip=function(){J("W"),J("S")},H.clip_fixed=function(t){J("evenodd"===t?"W*":"W"),J("n")},H.lines=function(t,e,n,r,i,o){var a,s,c,l,u,h,f,d,g,w,v;for("number"==typeof t&&(m=n,n=e,e=t,t=m),r=r||[1,1],J(G(e*p)+" "+G((y-n)*p)+" m "),a=r[0],s=r[1],l=t.length,w=e,v=n,c=0;c<l;c++)2===(u=t[c]).length?(w=u[0]*a+w,v=u[1]*s+v,J(G(w*p)+" "+G((y-v)*p)+" l")):(h=u[0]*a+w,f=u[1]*s+v,d=u[2]*a+w,g=u[3]*s+v,w=u[4]*a+w,v=u[5]*s+v,J(G(h*p)+" "+G((y-f)*p)+" "+G(d*p)+" "+G((y-g)*p)+" "+G(w*p)+" "+G((y-v)*p)+" c"));return o&&J(" h"),null!==i&&J(yt(i)),this},H.rect=function(t,e,n,r,i){return yt(i),J([V(t*p),V((y-e)*p),V(n*p),V(-r*p),"re"].join(" ")),null!==i&&J(yt(i)),this},H.triangle=function(t,e,n,r,i,o,a){return this.lines([[n-t,r-e],[i-n,o-r],[t-i,e-o]],t,e,[1,1],a,!0),this},H.roundedRect=function(t,e,n,r,i,o,a){var s=4/3*(Math.SQRT2-1);return this.lines([[n-2*i,0],[i*s,0,i,o-o*s,i,o],[0,r-2*o],[0,o*s,-i*s,o,-i,o],[2*i-n,0],[-i*s,0,-i,-o*s,-i,-o],[0,2*o-r],[0,-o*s,i*s,-o,i,-o]],t+i,e,[1,1],a),this},H.ellipse=function(t,e,n,r,i){var o=4/3*(Math.SQRT2-1)*n,a=4/3*(Math.SQRT2-1)*r;return J([V((t+n)*p),V((y-e)*p),"m",V((t+n)*p),V((y-(e-a))*p),V((t+o)*p),V((y-(e-r))*p),V(t*p),V((y-(e-r))*p),"c"].join(" ")),J([V((t-o)*p),V((y-(e-r))*p),V((t-n)*p),V((y-(e-a))*p),V((t-n)*p),V((y-e)*p),"c"].join(" ")),J([V((t-n)*p),V((y-(e+a))*p),V((t-o)*p),V((y-(e+r))*p),V(t*p),V((y-(e+r))*p),"c"].join(" ")),J([V((t+o)*p),V((y-(e+r))*p),V((t+n)*p),V((y-(e+a))*p),V((t+n)*p),V((y-e)*p),"c"].join(" ")),null!==i&&J(yt(i)),this},H.circle=function(t,e,n,r){return this.ellipse(t,e,n,n,r)},H.setProperties=function(t){for(var e in U)U.hasOwnProperty(e)&&t[e]&&(U[e]=t[e]);return this},H.setFontSize=function(t){return A=t,this},H.setFont=function(t,e){return d=gt(t,e),this},H.setFontStyle=H.setFontType=function(t){return d=gt(void 0,t),this},H.getFontList=function(){var t,e,n,r={};for(t in O)if(O.hasOwnProperty(t)){r[t]=n=[];for(e in O[t])O[t].hasOwnProperty(e)&&n.push(e)}return r},H.addFont=function(t,e,n){at(t,e,n,"StandardEncoding")},H.setLineWidth=function(t){return J((t*p).toFixed(2)+" w"),this},H.setDrawColor=function(t,e,n,r){var i;return i=void 0===e||void 0===r&&t===e===n?"string"==typeof t?t+" G":V(t/255)+" G":void 0===r?"string"==typeof t?[t,e,n,"RG"].join(" "):[V(t/255),V(e/255),V(n/255),"RG"].join(" "):"string"==typeof t?[t,e,n,r,"K"].join(" "):[V(t),V(e),V(n),V(r),"K"].join(" "),J(i),this},H.setFillColor=function(e,n,r,i){var o;return void 0===n||void 0===i&&e===n===r?o="string"==typeof e?e+" g":V(e/255)+" g":void 0===i||"object"===(void 0===i?"undefined":t(i))?(o="string"==typeof e?[e,n,r,"rg"].join(" "):[V(e/255),V(n/255),V(r/255),"rg"].join(" "),i&&0===i.a&&(o=["255","255","255","rg"].join(" "))):o="string"==typeof e?[e,n,r,i,"k"].join(" "):[V(e),V(n),V(r),V(i),"k"].join(" "),J(o),this},H.setTextColor=function(t,e,n){if("string"==typeof t&&/^#[0-9A-Fa-f]{6}$/.test(t)){var r=parseInt(t.substr(1),16);t=r>>16&255,e=r>>8&255,n=255&r}return _=0===t&&0===e&&0===n||void 0===e?G(t/255)+" g":[G(t/255),G(e/255),G(n/255),"rg"].join(" "),this},H.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},H.setLineCap=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return N=e,J(e+" J"),this},H.setLineJoin=function(t){var e=this.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return L=e,J(e+" j"),this},H.output=xt,H.save=function(t){H.output("save",t)};for(var _t in i.API)i.API.hasOwnProperty(_t)&&("events"===_t&&i.API.events.length?function(t,e){var n,r,i;for(i=e.length-1;-1!==i;i--)n=e[i][0],r=e[i][1],t.subscribe.apply(t,[n].concat("function"==typeof r?[r]:r))}(W,i.API.events):H[_t]=i.API[_t]);return function(){for(var t=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"],["ZapfDingbats","zapfdingbats"]],e=0,n=t.length;e<n;e++){var r=at(t[e][0],t[e][1],t[e][2],"StandardEncoding"),i=t[e][0].split("-");ot(r,i[0],i[1]||"")}W.publish("addFonts",{fonts:E,dictionary:O})}(),d="F1",dt(u,c),W.publish("initialized"),H}var a="1.3",s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return i.API={events:[]},i.version="1.x-master","function"==typeof define&&define.amd?define("jsPDF",function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:e.jsPDF=i,i}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0));(window.AcroForm=function(t){var n=window.AcroForm;n.scale=function(t){return t*(r.internal.scaleFactor/1)},n.antiScale=function(t){return 1/r.internal.scaleFactor*t};var r={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null};e.API.acroformPlugin=r;var i=function(){for(var t in this.acroformPlugin.acroFormDictionaryRoot.Fields){var e=this.acroformPlugin.acroFormDictionaryRoot.Fields[t];e.hasAnnotation&&a.call(this,e)}},o=function(){if(this.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");this.acroformPlugin.acroFormDictionaryRoot=new n.AcroFormDictionary,this.acroformPlugin.internal=this.internal,this.acroformPlugin.acroFormDictionaryRoot._eventID=this.internal.events.subscribe("postPutResources",l),this.internal.events.subscribe("buildDocument",i),this.internal.events.subscribe("putCatalog",c),this.internal.events.subscribe("postPutPages",u)},a=function(t){var n={type:"reference",object:t};e.API.annotationPlugin.annotations[this.internal.getPageInfo(t.page).pageNumber].push(n)},s=function(t){this.acroformPlugin.printedOut&&(this.acroformPlugin.printedOut=!1,this.acroformPlugin.acroFormDictionaryRoot=null),this.acroformPlugin.acroFormDictionaryRoot||o.call(this),this.acroformPlugin.acroFormDictionaryRoot.Fields.push(t)},c=function(){void 0!==this.acroformPlugin.acroFormDictionaryRoot?this.internal.write("/AcroForm "+this.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R"):console.log("Root missing...")},l=function(){this.internal.events.unsubscribe(this.acroformPlugin.acroFormDictionaryRoot._eventID),delete this.acroformPlugin.acroFormDictionaryRoot._eventID,this.acroformPlugin.printedOut=!0},u=function(t){var e=!t;t||(this.internal.newObjectDeferredBegin(this.acroformPlugin.acroFormDictionaryRoot.objId),this.internal.out(this.acroformPlugin.acroFormDictionaryRoot.getString()));var t=t||this.acroformPlugin.acroFormDictionaryRoot.Kids;for(var r in t){var i=t[r],o=i.Rect;i.Rect&&(i.Rect=n.internal.calculateCoordinates.call(this,i.Rect)),this.internal.newObjectDeferredBegin(i.objId);var a="";if(a+=i.objId+" 0 obj\n",a+="<<\n"+i.getContent(),i.Rect=o,i.hasAppearanceStream&&!i.appearanceStreamContent){var s=n.internal.calculateAppearanceStream.call(this,i);a+="/AP << /N "+s+" >>\n",this.acroformPlugin.xForms.push(s)}if(i.appearanceStreamContent){a+="/AP << ";for(var c in i.appearanceStreamContent){var l=i.appearanceStreamContent[c];if(a+="/"+c+" ",a+="<< ",Object.keys(l).length>=1||Array.isArray(l))for(var r in l)"function"==typeof(u=l[r])&&(u=u.call(this,i)),a+="/"+r+" "+u+" ",this.acroformPlugin.xForms.indexOf(u)>=0||this.acroformPlugin.xForms.push(u);else{var u=l;"function"==typeof u&&(u=u.call(this,i)),a+="/"+r+" "+u+" \n",this.acroformPlugin.xForms.indexOf(u)>=0||this.acroformPlugin.xForms.push(u)}a+=" >>\n"}a+=">>\n"}a+=">>\nendobj\n",this.internal.out(a)}e&&h.call(this,this.acroformPlugin.xForms)},h=function(t){for(var e in t){var n=e,r=t[e];this.internal.newObjectDeferredBegin(r&&r.objId);var i="";i+=r?r.getString():"",this.internal.out(i),delete t[n]}};t.addField=function(t){return t instanceof n.TextField?d.call(this,t):t instanceof n.ChoiceField?p.call(this,t):t instanceof n.Button?f.call(this,t):t instanceof n.ChildClass?s.call(this,t):t&&s.call(this,t),t.page=this.acroformPlugin.internal.getCurrentPageInfo().pageNumber,this};var f=function(t){(t=t||new n.Field).FT="/Btn";var e=t.Ff||0;t.pushbutton&&(e=n.internal.setBitPosition(e,17),delete t.pushbutton),t.radio&&(e=n.internal.setBitPosition(e,16),delete t.radio),t.noToggleToOff&&(e=n.internal.setBitPosition(e,15)),t.Ff=e,s.call(this,t)},d=function(t){(t=t||new n.Field).FT="/Tx";var e=t.Ff||0;t.multiline&&(e|=4096),t.password&&(e|=8192),t.fileSelect&&(e|=1<<20),t.doNotSpellCheck&&(e|=1<<22),t.doNotScroll&&(e|=1<<23),t.Ff=t.Ff||e,s.call(this,t)},p=function(t){var e=t||new n.Field;e.FT="/Ch";var r=e.Ff||0;e.combo&&(r=n.internal.setBitPosition(r,18),delete e.combo),e.edit&&(r=n.internal.setBitPosition(r,19),delete e.edit),e.sort&&(r=n.internal.setBitPosition(r,20),delete e.sort),e.multiSelect&&this.internal.getPDFVersion()>=1.4&&(r=n.internal.setBitPosition(r,22),delete e.multiSelect),e.doNotSpellCheck&&this.internal.getPDFVersion()>=1.4&&(r=n.internal.setBitPosition(r,23),delete e.doNotSpellCheck),e.Ff=r,s.call(this,e)}})(e.API);var n=window.AcroForm;n.internal={},n.createFormXObject=function(t){var e=new n.FormXObject,r=n.Appearance.internal.getHeight(t)||0,i=n.Appearance.internal.getWidth(t)||0;return e.BBox=[0,0,i,r],e},n.Appearance={CheckBox:{createAppearanceStream:function(){return{N:{On:n.Appearance.CheckBox.YesNormal},D:{On:n.Appearance.CheckBox.YesPushDown,Off:n.Appearance.CheckBox.OffPushDown}}},createMK:function(){return"<< /CA (3)>>"},YesPushDown:function(t){var e=n.createFormXObject(t),r="";t.Q=1;var i=n.internal.calculateX(t,"3","ZapfDingbats",50);return r+="0.749023 g\n             0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\n             f\n             BMC\n             q\n             0 0 1 rg\n             /F13 "+i.fontSize+" Tf 0 g\n             BT\n",r+=i.text,r+="ET\n             Q\n             EMC\n",e.stream=r,e},YesNormal:function(t){var e=n.createFormXObject(t),r="";t.Q=1;var i=n.internal.calculateX(t,"3","ZapfDingbats",.9*n.Appearance.internal.getHeight(t));return r+="1 g\n0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\nf\nq\n0 0 1 rg\n0 0 "+(n.Appearance.internal.getWidth(t)-1)+" "+(n.Appearance.internal.getHeight(t)-1)+" re\nW\nn\n0 g\nBT\n/F13 "+i.fontSize+" Tf 0 g\n",r+=i.text,r+="ET\n             Q\n",e.stream=r,e},OffPushDown:function(t){var e=n.createFormXObject(t),r="";return r+="0.749023 g\n            0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\n            f\n",e.stream=r,e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:n.Appearance.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=n.Appearance.RadioButton.Circle.YesNormal,e.D[t]=n.Appearance.RadioButton.Circle.YesPushDown,e},createMK:function(){return"<< /CA (l)>>"},YesNormal:function(t){var e=n.createFormXObject(t),r="",i=n.Appearance.internal.getWidth(t)<=n.Appearance.internal.getHeight(t)?n.Appearance.internal.getWidth(t)/4:n.Appearance.internal.getHeight(t)/4;i*=.9;var o=n.Appearance.internal.Bezier_C;return r+="q\n1 0 0 1 "+n.Appearance.internal.getWidth(t)/2+" "+n.Appearance.internal.getHeight(t)/2+" cm\n"+i+" 0 m\n"+i+" "+i*o+" "+i*o+" "+i+" 0 "+i+" c\n-"+i*o+" "+i+" -"+i+" "+i*o+" -"+i+" 0 c\n-"+i+" -"+i*o+" -"+i*o+" -"+i+" 0 -"+i+" c\n"+i*o+" -"+i+" "+i+" -"+i*o+" "+i+" 0 c\nf\nQ\n",e.stream=r,e},YesPushDown:function(t){var e=n.createFormXObject(t),r="",i=n.Appearance.internal.getWidth(t)<=n.Appearance.internal.getHeight(t)?n.Appearance.internal.getWidth(t)/4:n.Appearance.internal.getHeight(t)/4,o=2*(i*=.9),a=o*n.Appearance.internal.Bezier_C,s=i*n.Appearance.internal.Bezier_C;return r+="0.749023 g\n            q\n           1 0 0 1 "+n.Appearance.internal.getWidth(t)/2+" "+n.Appearance.internal.getHeight(t)/2+" cm\n"+o+" 0 m\n"+o+" "+a+" "+a+" "+o+" 0 "+o+" c\n-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c\n-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c\n"+a+" -"+o+" "+o+" -"+a+" "+o+" 0 c\n            f\n            Q\n            0 g\n            q\n            1 0 0 1 "+n.Appearance.internal.getWidth(t)/2+" "+n.Appearance.internal.getHeight(t)/2+" cm\n"+i+" 0 m\n"+i+" "+s+" "+s+" "+i+" 0 "+i+" c\n-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c\n-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c\n"+s+" -"+i+" "+i+" -"+s+" "+i+" 0 c\n            f\n            Q\n",e.stream=r,e},OffPushDown:function(t){var e=n.createFormXObject(t),r="",i=n.Appearance.internal.getWidth(t)<=n.Appearance.internal.getHeight(t)?n.Appearance.internal.getWidth(t)/4:n.Appearance.internal.getHeight(t)/4,o=2*(i*=.9),a=o*n.Appearance.internal.Bezier_C;return r+="0.749023 g\n            q\n 1 0 0 1 "+n.Appearance.internal.getWidth(t)/2+" "+n.Appearance.internal.getHeight(t)/2+" cm\n"+o+" 0 m\n"+o+" "+a+" "+a+" "+o+" 0 "+o+" c\n-"+a+" "+o+" -"+o+" "+a+" -"+o+" 0 c\n-"+o+" -"+a+" -"+a+" -"+o+" 0 -"+o+" c\n"+a+" -"+o+" "+o+" -"+a+" "+o+" 0 c\n            f\n            Q\n",e.stream=r,e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:n.Appearance.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=n.Appearance.RadioButton.Cross.YesNormal,e.D[t]=n.Appearance.RadioButton.Cross.YesPushDown,e},createMK:function(){return"<< /CA (8)>>"},YesNormal:function(t){var e=n.createFormXObject(t),r="",i=n.Appearance.internal.calculateCross(t);return r+="q\n            1 1 "+(n.Appearance.internal.getWidth(t)-2)+" "+(n.Appearance.internal.getHeight(t)-2)+" re\n            W\n            n\n            "+i.x1.x+" "+i.x1.y+" m\n            "+i.x2.x+" "+i.x2.y+" l\n            "+i.x4.x+" "+i.x4.y+" m\n            "+i.x3.x+" "+i.x3.y+" l\n            s\n            Q\n",e.stream=r,e},YesPushDown:function(t){var e=n.createFormXObject(t),r=n.Appearance.internal.calculateCross(t),i="";return i+="0.749023 g\n            0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\n            f\n            q\n            1 1 "+(n.Appearance.internal.getWidth(t)-2)+" "+(n.Appearance.internal.getHeight(t)-2)+" re\n            W\n            n\n            "+r.x1.x+" "+r.x1.y+" m\n            "+r.x2.x+" "+r.x2.y+" l\n            "+r.x4.x+" "+r.x4.y+" m\n            "+r.x3.x+" "+r.x3.y+" l\n            s\n            Q\n",e.stream=i,e},OffPushDown:function(t){var e=n.createFormXObject(t),r="";return r+="0.749023 g\n            0 0 "+n.Appearance.internal.getWidth(t)+" "+n.Appearance.internal.getHeight(t)+" re\n            f\n",e.stream=r,e}}},createDefaultAppearanceStream:function(t){var e="";return e+="/Helv 0 Tf 0 g"}},n.Appearance.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=n.Appearance.internal.getWidth(t),r=n.Appearance.internal.getHeight(t),i=function(t,e){return t>e?e:t}(e,r);return{x1:{x:(e-i)/2,y:(r-i)/2+i},x2:{x:(e-i)/2+i,y:(r-i)/2},x3:{x:(e-i)/2,y:(r-i)/2},x4:{x:(e-i)/2+i,y:(r-i)/2+i}}}},n.Appearance.internal.getWidth=function(t){return t.Rect[2]},n.Appearance.internal.getHeight=function(t){return t.Rect[3]},n.internal.inherit=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},n.internal.arrayToPdfArray=function(t){if(Array.isArray(t)){var e=" [";for(var n in t)e+=t[n].toString(),e+=n<t.length-1?" ":"";return e+="]"}},n.internal.toPdfString=function(t){return 0!==(t=t||"").indexOf("(")&&(t="("+t),")"!=t.substring(t.length-1)&&(t+="("),t},n.PDFObject=function(){var t;Object.defineProperty(this,"objId",{get:function(){return t||(this.internal?t=this.internal.newObjectDeferred():e.API.acroformPlugin.internal&&(t=e.API.acroformPlugin.internal.newObjectDeferred())),t||console.log("Couldn't create Object ID"),t},configurable:!1})},n.PDFObject.prototype.toString=function(){return this.objId+" 0 R"},n.PDFObject.prototype.getString=function(){var t=this.objId+" 0 obj\n<<";return t+=this.getContent()+">>\n",this.stream&&(t+="stream\n",t+=this.stream,t+="endstream\n"),t+="endobj\n"},n.PDFObject.prototype.getContent=function(){var t="";return t+=function(t){var e="",r=Object.keys(t).filter(function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"_"!=t.substring(0,1)});for(var i in r){var o=r[i],a=t[o];a&&(Array.isArray(a)?e+="/"+o+" "+n.internal.arrayToPdfArray(a)+"\n":a instanceof n.PDFObject?e+="/"+o+" "+a.objId+" 0 R\n":e+="/"+o+" "+a+"\n")}return e}(this)},n.FormXObject=function(){n.PDFObject.call(this),this.Type="/XObject",this.Subtype="/Form",this.FormType=1,this.BBox,this.Matrix,this.Resources="2 0 R",this.PieceInfo;var t;Object.defineProperty(this,"Length",{enumerable:!0,get:function(){return void 0!==t?t.length:0}}),Object.defineProperty(this,"stream",{enumerable:!1,set:function(e){t=e},get:function(){return t||null}})},n.internal.inherit(n.FormXObject,n.PDFObject),n.AcroFormDictionary=function(){n.PDFObject.call(this);var t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!0,configurable:!0,get:function(){return t}}),this.DA},n.internal.inherit(n.AcroFormDictionary,n.PDFObject),n.Field=function(){n.PDFObject.call(this);var t;Object.defineProperty(this,"Rect",{enumerable:!0,configurable:!1,get:function(){if(t)return t},set:function(e){t=e}});var e="";Object.defineProperty(this,"FT",{enumerable:!0,set:function(t){e=t},get:function(){return e}});var r;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,set:function(t){r=t},get:function(){if(!r||r.length<1){if(this instanceof n.ChildClass)return;return"(FieldObject"+n.Field.FieldNum+++")"}
return"("==r.substring(0,1)&&r.substring(r.length-1)?r:"("+r+")"}});var i;Object.defineProperty(this,"DA",{enumerable:!0,get:function(){if(i)return"("+i+")"},set:function(t){i=t}});var o;Object.defineProperty(this,"DV",{enumerable:!0,configurable:!0,get:function(){if(o)return o},set:function(t){o=t}}),Object.defineProperty(this,"Type",{enumerable:!0,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,get:function(){return this.hasAnnotation?"/Widget":null}}),this.BG,Object.defineProperty(this,"hasAnnotation",{enumerable:!1,get:function(){return!!(this.Rect||this.BC||this.BG)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(this,"page",{enumerable:!1,configurable:!0,writable:!0})},n.Field.FieldNum=0,n.internal.inherit(n.Field,n.PDFObject),n.ChoiceField=function(){n.Field.call(this),this.FT="/Ch",this.Opt=[],this.V="()",this.TI=0,this.combo=!1,Object.defineProperty(this,"edit",{enumerable:!0,set:function(t){1==t?(this._edit=!0,this.combo=!0):this._edit=!1},get:function(){return!!this._edit&&this._edit},configurable:!1}),this.hasAppearanceStream=!0,Object.defineProperty(this,"V",{get:function(){n.internal.toPdfString()}})},n.internal.inherit(n.ChoiceField,n.Field),window.ChoiceField=n.ChoiceField,n.ListBox=function(){n.ChoiceField.call(this)},n.internal.inherit(n.ListBox,n.ChoiceField),window.ListBox=n.ListBox,n.ComboBox=function(){n.ListBox.call(this),this.combo=!0},n.internal.inherit(n.ComboBox,n.ListBox),window.ComboBox=n.ComboBox,n.EditBox=function(){n.ComboBox.call(this),this.edit=!0},n.internal.inherit(n.EditBox,n.ComboBox),window.EditBox=n.EditBox,n.Button=function(){n.Field.call(this),this.FT="/Btn"},n.internal.inherit(n.Button,n.Field),window.Button=n.Button,n.PushButton=function(){n.Button.call(this),this.pushbutton=!0},n.internal.inherit(n.PushButton,n.Button),window.PushButton=n.PushButton,n.RadioButton=function(){n.Button.call(this),this.radio=!0;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,get:function(){if(t.length>0)return t}}),Object.defineProperty(this,"__Kids",{get:function(){return t}});var e;Object.defineProperty(this,"noToggleToOff",{enumerable:!1,get:function(){return e},set:function(t){e=t}})},n.internal.inherit(n.RadioButton,n.Button),window.RadioButton=n.RadioButton,n.ChildClass=function(t,e){n.Field.call(this),this.Parent=t,this._AppearanceType=n.Appearance.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(e),this.F=n.internal.setBitPosition(this.F,3,1),this.MK=this._AppearanceType.createMK(),this.AS="/Off",this._Name=e},n.internal.inherit(n.ChildClass,n.Field),n.RadioButton.prototype.setAppearance=function(t){if("createAppearanceStream"in t&&"createMK"in t)for(var e in this.__Kids){var n=this.__Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n._Name),n.MK=t.createMK()}else console.log("Couldn't assign Appearance to RadioButton. Appearance was Invalid!")},n.RadioButton.prototype.createOption=function(t){var r=this,i=new n.ChildClass(r,t);return this.__Kids.push(i),e.API.addField(i),i},n.CheckBox=function(){Button.call(this),this.appearanceStreamContent=n.Appearance.CheckBox.createAppearanceStream(),this.MK=n.Appearance.CheckBox.createMK(),this.AS="/On",this.V="/On"},n.internal.inherit(n.CheckBox,n.Button),window.CheckBox=n.CheckBox,n.TextField=function(){n.Field.call(this),this.DA=n.Appearance.createDefaultAppearanceStream(),this.F=4;var t;Object.defineProperty(this,"V",{get:function(){return t?"("+t+")":t},enumerable:!0,set:function(e){t=e}});var e;Object.defineProperty(this,"DV",{get:function(){return e?"("+e+")":e},enumerable:!0,set:function(t){e=t}});var r=!1;Object.defineProperty(this,"multiline",{enumerable:!1,get:function(){return r},set:function(t){r=t}});var i=!1;Object.defineProperty(this,"MaxLen",{enumerable:!0,get:function(){return i},set:function(t){i=t}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,get:function(){return this.V||this.DV}})},n.internal.inherit(n.TextField,n.Field),window.TextField=n.TextField,n.PasswordField=function(){TextField.call(this),Object.defineProperty(this,"password",{value:!0,enumerable:!1,configurable:!1,writable:!1})},n.internal.inherit(n.PasswordField,n.TextField),window.PasswordField=n.PasswordField,n.internal.calculateFontSpace=function(t,e,r){var r=r||"helvetica",i=n.internal.calculateFontSpace.canvas||(n.internal.calculateFontSpace.canvas=document.createElement("canvas"));(s=i.getContext("2d")).save();var o=e+" "+r;s.font=o;var a=s.measureText(t);s.fontcolor="black";var s=i.getContext("2d");return a.height=1.5*s.measureText("3").width,s.restore(),a},n.internal.calculateX=function(t,e,r,i){var i=i||12,r=r||"helvetica",o={text:"",fontSize:""},a=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" "),s=i,c=n.Appearance.internal.getHeight(t)||0;c=c<0?-c:c;var l=n.Appearance.internal.getWidth(t)||0;l=l<0?-l:l,s++;t:for(;;){var e="";s--;var u=n.internal.calculateFontSpace("3",s+"px",r).height,h=t.multiline?c-s:(c-u)/2,f=-2,d=h+=2,p=0,m=0,g=0;if(0==s){s=12,e="(...) Tj\n",e+="% Width of Text: "+n.internal.calculateFontSpace(e,"1px").width+", FieldWidth:"+l+"\n";break}g=n.internal.calculateFontSpace(a[0]+" ",s+"px",r).width;var w="",y=0;for(var v in a){w=" "==(w+=a[v]+" ").substr(w.length-1)?w.substr(0,w.length-1):w;var b=parseInt(v);g=n.internal.calculateFontSpace(w+" ",s+"px",r).width;var x=function(t,e,i){if(t+1<a.length){var o=e+" "+a[t+1];return n.internal.calculateFontSpace(o,i+"px",r).width<=l-4}return!1}(b,w,s),k=v>=a.length-1;if(!x||k){if(x||k){if(k)m=b;else if(t.multiline&&(u+2)*(y+2)+2>c)continue t}else{if(!t.multiline)continue t;if((u+2)*(y+2)+2>c)continue t;m=b}for(var _="",C=p;C<=m;C++)_+=a[C]+" ";switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,g=n.internal.calculateFontSpace(_,s+"px",r).width,t.Q){case 2:f=l-g-2;break;case 1:f=(l-g)/2;break;case 0:default:f=2}e+=f+" "+d+" Td\n",e+="("+_+") Tj\n",e+=-f+" 0 Td\n",d=-(s+2),g=0,p=m+1,y++,w=""}else w+=" "}break}return o.text=e,o.fontSize=s,o},n.internal.calculateAppearanceStream=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e="",r=t.V||t.DV,i=n.internal.calculateX(t,r);e+="/Tx BMC\nq\n/F1 "+i.fontSize+" Tf\n1 0 0 1 0 0 Tm\n",e+="BT\n",e+=i.text,e+="ET\n",e+="Q\nEMC\n";var o=new n.createFormXObject(t);return o.stream=e,o}},n.internal.calculateCoordinates=function(t,e,r,i){var o={};if(this.internal){var a=function(t){return t*this.internal.scaleFactor};Array.isArray(t)?(t[0]=n.scale(t[0]),t[1]=n.scale(t[1]),t[2]=n.scale(t[2]),t[3]=n.scale(t[3]),o.lowerLeft_X=t[0]||0,o.lowerLeft_Y=a.call(this,this.internal.pageSize.height)-t[3]-t[1]||0,o.upperRight_X=t[0]+t[2]||0,o.upperRight_Y=a.call(this,this.internal.pageSize.height)-t[1]||0):(t=n.scale(t),e=n.scale(e),r=n.scale(r),i=n.scale(i),o.lowerLeft_X=t||0,o.lowerLeft_Y=this.internal.pageSize.height-e||0,o.upperRight_X=t+r||0,o.upperRight_Y=this.internal.pageSize.height-e+i||0)}else Array.isArray(t)?(o.lowerLeft_X=t[0]||0,o.lowerLeft_Y=t[1]||0,o.upperRight_X=t[0]+t[2]||0,o.upperRight_Y=t[1]+t[3]||0):(o.lowerLeft_X=t||0,o.lowerLeft_Y=e||0,o.upperRight_X=t+r||0,o.upperRight_Y=e+i||0);return[o.lowerLeft_X,o.lowerLeft_Y,o.upperRight_X,o.upperRight_Y]},n.internal.calculateColor=function(t,e,n){var r=new Array(3);return r.r=0|t,r.g=0|e,r.b=0|n,r},n.internal.getBitPosition=function(t,e){var n=1;return n<<=e-1,(t=t||0)|n},n.internal.setBitPosition=function(t,e,n){t=t||0;var r=1;if(r<<=e-1,1==(n=n||1))t|=r;else var t=t&~r;return t},e.API.addHTML=function(t,e,n,r,i){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof e&&(r=e,i=n),"function"==typeof r&&(i=r,r=null);var o=this.internal,a=o.scaleFactor,s=o.pageSize.width,c=o.pageSize.height;if(r=r||{},r.onrendered=function(t){e=parseInt(e)||0,n=parseInt(n)||0;var o=r.dim||{},l=o.h||0,u=o.w||Math.min(s,t.width/a)-e,h="JPEG";if(r.format&&(h=r.format),t.height>c&&r.pagesplit){var f=function(){for(var r=0;;){var o=document.createElement("canvas");o.width=Math.min(s*a,t.width),o.height=Math.min(c*a,t.height-r),o.getContext("2d").drawImage(t,0,r,t.width,o.height,0,0,o.width,o.height);var l=[o,e,r?0:n,o.width/a,o.height/a,h,null,"SLOW"];if(this.addImage.apply(this,l),(r+=o.height)>=t.height)break;this.addPage()}i(u,r,null,l)}.bind(this);if("CANVAS"===t.nodeName){var d=new Image;d.onload=f,d.src=t.toDataURL("image/png"),t=d}else f()}else{var p=Math.random().toString(35),m=[t,e,n,u,l,h,p,"SLOW"];this.addImage.apply(this,m),i(u,l,p,m)}}.bind(this),"undefined"!=typeof html2canvas&&!r.rstz)return html2canvas(t,r);if("undefined"!=typeof rasterizeHTML){var l="drawDocument";return"string"==typeof t&&(l=/^http/.test(t)?"drawURL":"drawHTML"),r.width=r.width||s*a,rasterizeHTML[l](t,void 0,r).then(function(t){r.onrendered(t.image)},function(t){i(null,t)})}return null},function(e){var n=["jpeg","jpg","png"],r=function t(e){var n=this.internal.newObject(),r=this.internal.write,i=this.internal.putStream;if(e.n=n,r("<</Type /XObject"),r("/Subtype /Image"),r("/Width "+e.w),r("/Height "+e.h),e.cs===this.color_spaces.INDEXED?r("/ColorSpace [/Indexed /DeviceRGB "+(e.pal.length/3-1)+" "+("smask"in e?n+2:n+1)+" 0 R]"):(r("/ColorSpace /"+e.cs),e.cs===this.color_spaces.DEVICE_CMYK&&r("/Decode [1 0 1 0 1 0 1 0]")),r("/BitsPerComponent "+e.bpc),"f"in e&&r("/Filter /"+e.f),"dp"in e&&r("/DecodeParms <<"+e.dp+">>"),"trns"in e&&e.trns.constructor==Array){for(var o="",a=0,s=e.trns.length;a<s;a++)o+=e.trns[a]+" "+e.trns[a]+" ";r("/Mask ["+o+"]")}if("smask"in e&&r("/SMask "+(n+1)+" 0 R"),r("/Length "+e.data.length+">>"),i(e.data),r("endobj"),"smask"in e){var c="/Predictor "+e.p+" /Colors 1 /BitsPerComponent "+e.bpc+" /Columns "+e.w,l={w:e.w,h:e.h,cs:"DeviceGray",bpc:e.bpc,dp:c,data:e.smask};"f"in e&&(l.f=e.f),t.call(this,l)}e.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),r("<< /Length "+e.pal.length+">>"),i(this.arrayBufferToBinaryString(new Uint8Array(e.pal))),r("endobj"))},i=function(){var t=this.internal.collections.addImage_images;for(var e in t)r.call(this,t[e])},o=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var r in e)n("/I"+(t=e[r]).i,t.n,"0","R")},a=function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:e.image_compression.NONE},s=function(){var t=this.internal.collections.addImage_images;return t||(this.internal.collections.addImage_images=t={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o)),t},c=function(t){var e=0;return t&&(e=Object.keys?Object.keys(t).length:function(t){var e=0;for(var n in t)t.hasOwnProperty(n)&&e++;return e}(t)),e},l=function(t){return void 0===t||null===t},u=function(t){return"string"==typeof t&&e.sHashCode(t)},h=function(t){return-1===n.indexOf(t)},f=function(t){return"function"!=typeof e["process"+t.toUpperCase()]},d=function(e){return"object"===(void 0===e?"undefined":t(e))&&1===e.nodeType},p=function(e,n,r){if("IMG"===e.nodeName&&e.hasAttribute("src")){var i=""+e.getAttribute("src");if(!r&&0===i.indexOf("data:image/"))return i;!n&&/\.png(?:[?#].*)?$/i.test(i)&&(n="png")}if("CANVAS"===e.nodeName)var o=e;else{(o=document.createElement("canvas")).width=e.clientWidth||e.width,o.height=e.clientHeight||e.height;var a=o.getContext("2d");if(!a)throw"addImage requires canvas to be supported by browser.";if(r){var s,c,l,u,h,f,d,p,m=Math.PI/180;"object"===(void 0===r?"undefined":t(r))&&(s=r.x,c=r.y,l=r.bg,r=r.angle),p=r*m,u=Math.abs(Math.cos(p)),h=Math.abs(Math.sin(p)),f=o.width,d=o.height,o.width=d*h+f*u,o.height=d*u+f*h,isNaN(s)&&(s=o.width/2),isNaN(c)&&(c=o.height/2),a.clearRect(0,0,o.width,o.height),a.fillStyle=l||"white",a.fillRect(0,0,o.width,o.height),a.save(),a.translate(s,c),a.rotate(p),a.drawImage(e,-f/2,-d/2),a.rotate(-p),a.translate(-s,-c),a.restore()}else a.drawImage(e,0,0,o.width,o.height)}return o.toDataURL("png"==(""+n).toLowerCase()?"image/png":"image/jpeg")},m=function(t,e){var n;if(e)for(var r in e)if(t===e[r].alias){n=e[r];break}return n},g=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.w*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.h*72/e/this.internal.scaleFactor),0===t&&(t=e*n.w/n.h),0===e&&(e=t*n.h/n.w),[t,e]},w=function(t,e,n,r,i,o,a){var s=g.call(this,n,r,i),c=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString;n=s[0],r=s[1],a[o]=i,this.internal.write("q",c(n),"0 0",c(r),c(t),l(e+r),"cm /I"+i.i,"Do Q")};e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"},e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},e.sHashCode=function(t){return Array.prototype.reduce&&t.split("").reduce(function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t},0)},e.isString=function(t){return"string"==typeof t},e.extractInfoFromBase64DataURI=function(t){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(t)},e.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},e.isArrayBuffer=function(t){return!!this.supportsArrayBuffer()&&t instanceof ArrayBuffer},e.isArrayBufferView=function(t){return!!this.supportsArrayBuffer()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},e.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;r++)n[r]=t.charCodeAt(r);return n},e.arrayBufferToBinaryString=function(t){if("function"==typeof window.atob)return atob(this.arrayBufferToBase64(t));for(var e=this.isArrayBuffer(t)?t:new Uint8Array(t),n="",r=Math.round(e.byteLength/20480),i=0;i<r;i++)n+=String.fromCharCode.apply(null,e.slice(20480*i,20480*i+20480));return n},e.arrayBufferToBase64=function(t){for(var e,n,r,i,o="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=new Uint8Array(t),c=s.byteLength,l=c%3,u=c-l,h=0;h<u;h+=3)e=(258048&(i=s[h]<<16|s[h+1]<<8|s[h+2]))>>12,n=(4032&i)>>6,r=63&i,o+=a[(16515072&i)>>18]+a[e]+a[n]+a[r];return 1==l?(e=(3&(i=s[u]))<<4,o+=a[(252&i)>>2]+a[e]+"=="):2==l&&(e=(1008&(i=s[u]<<8|s[u+1]))>>4,n=(15&i)<<2,o+=a[(64512&i)>>10]+a[e]+a[n]+"="),o},e.createImageInfo=function(t,e,n,r,i,o,a,s,c,l,u,h,f){var d={alias:s,w:e,h:n,cs:r,bpc:i,i:a,data:t};return o&&(d.f=o),c&&(d.dp=c),l&&(d.trns=l),u&&(d.pal=u),h&&(d.smask=h),f&&(d.p=f),d},e.addImage=function(e,r,i,o,g,y,v,b,x){if("string"!=typeof r){var k=y;y=g,g=o,o=i,i=r,r=k}if("object"===(void 0===e?"undefined":t(e))&&!d(e)&&"imageData"in e){var _=e;e=_.imageData,r=_.format||r,i=_.x||i||0,o=_.y||o||0,g=_.w||g,y=_.h||y,v=_.alias||v,b=_.compression||b,x=_.rotation||_.angle||x}if(isNaN(i)||isNaN(o))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var C,A=s.call(this);if(!(C=m(e,A))){var S;if(d(e)&&(e=p(e,r,x)),l(v)&&(v=u(e)),!(C=m(v,A))){if(this.isString(e)){var q=this.extractInfoFromBase64DataURI(e);q?(r=q[2],e=atob(q[3])):137===e.charCodeAt(0)&&80===e.charCodeAt(1)&&78===e.charCodeAt(2)&&71===e.charCodeAt(3)&&(r="png")}if(r=(r||"JPEG").toLowerCase(),h(r))throw new Error("addImage currently only supports formats "+n+", not '"+r+"'");if(f(r))throw new Error("please ensure that the plugin for '"+r+"' support is added");if(this.supportsArrayBuffer()&&(e instanceof Uint8Array||(S=e,e=this.binaryStringToUint8Array(e))),!(C=this["process"+r.toUpperCase()](e,c(A),v,a(b),S)))throw new Error("An unkwown error occurred whilst processing the image")}}return w.call(this,i,o,g,y,C,C.i,A),this};var y=function(t){var e,n,r;if(255===!t.charCodeAt(0)||216===!t.charCodeAt(1)||255===!t.charCodeAt(2)||224===!t.charCodeAt(3)||!t.charCodeAt(6)==="J".charCodeAt(0)||!t.charCodeAt(7)==="F".charCodeAt(0)||!t.charCodeAt(8)==="I".charCodeAt(0)||!t.charCodeAt(9)==="F".charCodeAt(0)||0===!t.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var i=256*t.charCodeAt(4)+t.charCodeAt(5),o=4,a=t.length;o<a;){if(o+=i,255!==t.charCodeAt(o))throw new Error("getJpegSize could not find the size of the image");if(192===t.charCodeAt(o+1)||193===t.charCodeAt(o+1)||194===t.charCodeAt(o+1)||195===t.charCodeAt(o+1)||196===t.charCodeAt(o+1)||197===t.charCodeAt(o+1)||198===t.charCodeAt(o+1)||199===t.charCodeAt(o+1))return n=256*t.charCodeAt(o+5)+t.charCodeAt(o+6),e=256*t.charCodeAt(o+7)+t.charCodeAt(o+8),r=t.charCodeAt(o+9),[e,n,r];o+=2,i=256*t.charCodeAt(o)+t.charCodeAt(o+1)}},v=function(t){if(65496!=(t[0]<<8|t[1]))throw new Error("Supplied data is not a JPEG");for(var e,n,r,i,o=t.length,a=(t[4]<<8)+t[5],s=4;s<o;){if(s+=a,e=b(t,s),a=(e[2]<<8)+e[3],(192===e[1]||194===e[1])&&255===e[0]&&a>7)return e=b(t,s+5),n=(e[2]<<8)+e[3],r=(e[0]<<8)+e[1],i=e[4],{width:n,height:r,numcomponents:i};s+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")},b=function(t,e){return t.subarray(e,e+5)};e.processJPEG=function(t,e,n,r,i){var o,a=this.color_spaces.DEVICE_RGB,s=this.decode.DCT_DECODE;return this.isString(t)?(o=y(t),this.createImageInfo(t,o[0],o[1],1==o[3]?this.color_spaces.DEVICE_GRAY:a,8,s,e,n)):(this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)?(o=v(t),t=i||this.arrayBufferToBinaryString(t),this.createImageInfo(t,o.width,o.height,1==o.numcomponents?this.color_spaces.DEVICE_GRAY:a,8,s,e,n)):null)},e.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(e.API),function(t){var n={annotations:[],f2:function(t){return t.toFixed(2)},notEmpty:function(t){if(void 0!==t&&""!=t)return!0}};e.API.annotationPlugin=n,e.API.events.push(["addPage",function(t){this.annotationPlugin.annotations[t.pageNumber]=[]}]),t.events.push(["putPage",function(t){for(var e=this.annotationPlugin.annotations[t.pageNumber],r=!1,i=0;i<e.length&&!r;i++)switch((l=e[i]).type){case"link":if(n.notEmpty(l.options.url)||n.notEmpty(l.options.pageNumber)){r=!0;break}case"reference":case"text":case"freetext":r=!0}if(0!=r){this.internal.write("/Annots [");for(var o=this.annotationPlugin.f2,a=this.internal.scaleFactor,s=this.internal.pageSize.height,c=this.internal.getPageInfo(t.pageNumber),i=0;i<e.length;i++){var l=e[i];switch(l.type){case"reference":this.internal.write(" "+l.object.objId+" 0 R ");break;case"text":var u=this.internal.newAdditionalObject(),h=this.internal.newAdditionalObject(),f=l.title||"Note";w="<</Type /Annot /Subtype /Text "+(p="/Rect ["+o(l.bounds.x*a)+" "+o(s-(l.bounds.y+l.bounds.h)*a)+" "+o((l.bounds.x+l.bounds.w)*a)+" "+o((s-l.bounds.y)*a)+"] ")+"/Contents ("+l.contents+")",w+=" /Popup "+h.objId+" 0 R",w+=" /P "+c.objId+" 0 R",w+=" /T ("+f+") >>",u.content=w;var d=u.objId+" 0 R";w="<</Type /Annot /Subtype /Popup "+(p="/Rect ["+o((l.bounds.x+30)*a)+" "+o(s-(l.bounds.y+l.bounds.h)*a)+" "+o((l.bounds.x+l.bounds.w+30)*a)+" "+o((s-l.bounds.y)*a)+"] ")+" /Parent "+d,l.open&&(w+=" /Open true"),w+=" >>",h.content=w,this.internal.write(u.objId,"0 R",h.objId,"0 R");break;case"freetext":var p="/Rect ["+o(l.bounds.x*a)+" "+o((s-l.bounds.y)*a)+" "+o(l.bounds.x+l.bounds.w*a)+" "+o(s-(l.bounds.y+l.bounds.h)*a)+"] ",m=l.color||"#000000";w="<</Type /Annot /Subtype /FreeText "+p+"/Contents ("+l.contents+")",w+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+m+")",w+=" /Border [0 0 0]",w+=" >>",this.internal.write(w);break;case"link":if(l.options.name){var g=this.annotations._nameMap[l.options.name];l.options.pageNumber=g.page,l.options.top=g.y}else l.options.top||(l.options.top=0);var p="/Rect ["+o(l.x*a)+" "+o((s-l.y)*a)+" "+o((l.x+l.w)*a)+" "+o((s-(l.y+l.h))*a)+"] ",w="";if(l.options.url)w="<</Type /Annot /Subtype /Link "+p+"/Border [0 0 0] /A <</S /URI /URI ("+l.options.url+") >>";else if(l.options.pageNumber)switch(w="<</Type /Annot /Subtype /Link "+p+"/Border [0 0 0] /Dest ["+(t=this.internal.getPageInfo(l.options.pageNumber)).objId+" 0 R",l.options.magFactor=l.options.magFactor||"XYZ",l.options.magFactor){case"Fit":w+=" /Fit]";break;case"FitH":w+=" /FitH "+l.options.top+"]";break;case"FitV":l.options.left=l.options.left||0,w+=" /FitV "+l.options.left+"]";break;case"XYZ":default:var y=o((s-l.options.top)*a);l.options.left=l.options.left||0,void 0===l.options.zoom&&(l.options.zoom=0),w+=" /XYZ "+l.options.left+" "+y+" "+l.options.zoom+"]"}""!=w&&(w+=" >>",this.internal.write(w))}}this.internal.write("]")}}]),t.createAnnotation=function(t){switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(t)}},t.link=function(t,e,n,r,i){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:t,y:e,w:n,h:r,options:i,type:"link"})},t.textWithLink=function(t,e,n,r){var i=this.getTextWidth(t),o=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(t,e,n),n+=.2*o,this.link(e,n-o,i,o,r),i},t.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},t.getLineHeight=function(){return this.internal.getLineHeight()}}(e.API),e.API.autoPrint=function(){var t;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")}),this},function(t){t.events.push(["initialized",function(){this.canvas.pdf=this}]),t.canvas={getContext:function(t){return this.pdf.context2d._canvas=this,this.pdf.context2d},style:{}},Object.defineProperty(t.canvas,"width",{get:function(){return this._width},set:function(t){this._width=t,this.getContext("2d").pageWrapX=t+1}}),Object.defineProperty(t.canvas,"height",{get:function(){return this._height},set:function(t){this._height=t,this.getContext("2d").pageWrapY=t+1}})}(e.API),function(t){var e,n,r,i,o={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1,s=function(t,e,n,r,i){o={x:t,y:e,w:n,h:r,ln:i}},c=function(){return o},l={left:0,top:0,bottom:0};t.setHeaderFunction=function(t){i=t},t.getTextDimensions=function(t){e=this.internal.getFont().fontName,n=this.table_font_size||this.internal.getFontSize(),r=this.internal.getFont().fontStyle;var i,o;(o=document.createElement("font")).id="jsPDFCell";try{o.style.fontStyle=r}catch(t){o.style.fontWeight=r}o.style.fontName=e,o.style.fontSize=n+"pt";try{o.textContent=t}catch(e){o.innerText=t}return document.body.appendChild(o),i={w:(o.offsetWidth+1)*(19.049976/25.4),h:(o.offsetHeight+1)*(19.049976/25.4)},document.body.removeChild(o),i},t.cellAddPage=function(){var t=this.margins||l;this.addPage(),s(t.left,t.top,void 0,void 0),a+=1},t.cellInitialize=function(){o={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1},t.cell=function(t,e,n,r,i,o,a){var u=c(),h=!1;if(void 0!==u.ln)if(u.ln===o)t=u.x+u.w,e=u.y;else{var f=this.margins||l;u.y+u.h+r+13>=this.internal.pageSize.height-f.bottom&&(this.cellAddPage(),h=!0,this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(o,!0)),e=c().y+c().h,h&&(e=23)}if(void 0!==i[0])if(this.printingHeaderRow?this.rect(t,e,n,r,"FD"):this.rect(t,e,n,r),"right"===a){i instanceof Array||(i=[i]);for(var d=0;d<i.length;d++){var p=i[d],m=this.getStringUnitWidth(p)*this.internal.getFontSize();this.text(p,t+n-m-3,e+this.internal.getLineHeight()*(d+1))}}else this.text(i,t+3,e+this.internal.getLineHeight());return s(t,e,n,r,o),this},t.arrayMax=function(t,e){var n,r,i,o=t[0];for(n=0,r=t.length;n<r;n+=1)i=t[n],e?-1===e(o,i)&&(o=i):i>o&&(o=i);return o},t.table=function(e,n,r,i,s){if(!r)throw"No data for PDF table";var c,u,h,f,d,p,m,g,w,y,v=[],b=[],x={},k={},_=[],C=[],A=!1,S=!0,q=12,T=l;if(T.width=this.internal.pageSize.width,s&&(!0===s.autoSize&&(A=!0),!1===s.printHeaders&&(S=!1),s.fontSize&&(q=s.fontSize),s.css&&void 0!==s.css["font-size"]&&(q=16*s.css["font-size"]),s.margins&&(T=s.margins)),this.lnMod=0,o={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},a=1,this.printHeaders=S,this.margins=T,this.setFontSize(q),this.table_font_size=q,void 0===i||null===i)v=Object.keys(r[0]);else if(i[0]&&"string"!=typeof i[0])for(u=0,h=i.length;u<h;u+=1)c=i[u],v.push(c.name),b.push(c.prompt),k[c.name]=c.width*(19.049976/25.4);else v=i;if(A)for(y=function(t){return t[c]},u=0,h=v.length;u<h;u+=1){for(x[c=v[u]]=r.map(y),_.push(this.getTextDimensions(b[u]||c).w),m=0,f=(p=x[c]).length;m<f;m+=1)d=p[m],_.push(this.getTextDimensions(d).w);k[c]=t.arrayMax(_),_=[]}if(S){for(P=this.calculateLineHeight(v,k,b.length?b:v),u=0,h=v.length;u<h;u+=1)c=v[u],C.push([e,n,k[c],P,String(b.length?b[u]:c)]);this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}for(u=0,h=r.length;u<h;u+=1){var P;for(g=r[u],P=this.calculateLineHeight(v,k,g),m=0,w=v.length;m<w;m+=1)c=v[m],this.cell(e,n,k[c],P,g[c],u+2,c.align)}return this.lastCellPos=o,this.table_x=e,this.table_y=n,this},t.calculateLineHeight=function(t,e,n){for(var r,i=0,o=0;o<t.length;o++){n[r=t[o]]=this.splitTextToSize(String(n[r]),e[r]-3);var a=this.internal.getLineHeight()*n[r].length+3;a>i&&(i=a)}return i},t.setTableHeaderRow=function(t){this.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var n,r,o,c;if(this.printingHeaderRow=!0,void 0!==i){var l=i(this,a);s(l[0],l[1],l[2],l[3],-1)}this.setFontStyle("bold");var u=[];for(o=0,c=this.tableHeaderRow.length;o<c;o+=1)this.setFillColor(200,200,200),n=this.tableHeaderRow[o],e&&(this.margins.top=13,n[1]=this.margins&&this.margins.top||0,u.push(n)),r=[].concat(n),this.cell.apply(this,r.concat(t));u.length>0&&this.setTableHeaderRow(u),this.setFontStyle("normal"),this.printingHeaderRow=!1}}(e.API),function(t){function e(){this._isStrokeTransparent=!1,this._strokeOpacity=1,this.strokeStyle="#000000",this.fillStyle="#000000",this._isFillTransparent=!1,this._fillOpacity=1,this.font="12pt times",this.textBaseline="alphabetic",this.textAlign="start",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this._transform=[1,0,0,1,0,0],this.globalCompositeOperation="normal",this.globalAlpha=1,this._clip_path=[],this.ignoreClearRect=!1,this.copy=function(t){this._isStrokeTransparent=t._isStrokeTransparent,this._strokeOpacity=t._strokeOpacity,this.strokeStyle=t.strokeStyle,this._isFillTransparent=t._isFillTransparent,this._fillOpacity=t._fillOpacity,this.fillStyle=t.fillStyle,this.font=t.font,this.lineWidth=t.lineWidth,this.lineJoin=t.lineJoin,this.lineCap=t.lineCap,this.textBaseline=t.textBaseline,this.textAlign=t.textAlign,this._fontSize=t._fontSize,this._transform=t._transform.slice(0),this.globalCompositeOperation=t.globalCompositeOperation,this.globalAlpha=t.globalAlpha,this._clip_path=t._clip_path.slice(0),this.ignoreClearRect=t.ignoreClearRect}}t.events.push(["initialized",function(){this.context2d.pdf=this,this.context2d.internal.pdf=this,this.context2d.ctx=new e,this.context2d.ctxStack=[],this.context2d.path=[]}]),t.context2d={pageWrapXEnabled:!1,pageWrapYEnabled:!1,pageWrapX:9999999,pageWrapY:9999999,ctx:new e,f2:function(t){return t.toFixed(2)},fillRect:function(t,e,n,r){if(!this._isFillTransparent()){t=this._wrapX(t),e=this._wrapY(e);var i=this._matrix_map_rect(this.ctx._transform,{x:t,y:e,w:n,h:r});this.pdf.rect(i.x,i.y,i.w,i.h,"f")}},strokeRect:function(t,e,n,r){if(!this._isStrokeTransparent()){t=this._wrapX(t),e=this._wrapY(e);var i=this._matrix_map_rect(this.ctx._transform,{x:t,y:e,w:n,h:r});this.pdf.rect(i.x,i.y,i.w,i.h,"s")}},clearRect:function(t,e,n,r){if(!this.ctx.ignoreClearRect){t=this._wrapX(t),e=this._wrapY(e);var i=this._matrix_map_rect(this.ctx._transform,{x:t,y:e,w:n,h:r});this.save(),this.setFillStyle("#ffffff"),this.pdf.rect(i.x,i.y,i.w,i.h,"f"),this.restore()}},save:function(){this.ctx._fontSize=this.pdf.internal.getFontSize();var t=new e;t.copy(this.ctx),this.ctxStack.push(this.ctx),this.ctx=t},restore:function(){this.ctx=this.ctxStack.pop(),this.setFillStyle(this.ctx.fillStyle),this.setStrokeStyle(this.ctx.strokeStyle),this.setFont(this.ctx.font),this.pdf.setFontSize(this.ctx._fontSize),this.setLineCap(this.ctx.lineCap),this.setLineWidth(this.ctx.lineWidth),this.setLineJoin(this.ctx.lineJoin)},rect:function(t,e,n,r){this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.closePath()},beginPath:function(){this.path=[]},closePath:function(){this.path.push({type:"close"})},_getRGBA:function(t){var e,n,r,o;if(!t)return{r:0,g:0,b:0,a:0,style:t};if(this.internal.rxTransparent.test(t))e=0,n=0,r=0,o=0;else{var a=this.internal.rxRgb.exec(t);null!=a?(e=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),o=1):null!=(a=this.internal.rxRgba.exec(t))?(e=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),o=parseFloat(a[4])):(o=1,"#"!=t.charAt(0)&&((t=i.colorNameToHex(t))||(t="#000000")),4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,r=t.substring(3,4),r+=r):(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),r=parseInt(r,16))}return{r:e,g:n,b:r,a:o,style:t}},setFillStyle:function(t){var e=this._getRGBA(t);this.ctx.fillStyle=t,this.ctx._isFillTransparent=0===e.a,this.ctx._fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})},setStrokeStyle:function(t){var e=this._getRGBA(t);this.ctx.strokeStyle=e.style,this.ctx._isStrokeTransparent=0===e.a,this.ctx._strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))},fillText:function(t,e,n,r){if(!this._isFillTransparent()){e=this._wrapX(e),n=this._wrapY(n);var i=this._matrix_map_point(this.ctx._transform,[e,n]);e=i[0],n=i[1];var o=57.2958*this._matrix_rotation(this.ctx._transform);if(this.ctx._clip_path.length>0){var a;(a=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var s=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=s}var c=1;try{c=this._matrix_decompose(this._getTransform()).scale[0]}catch(t){console.warn(t)}if(c<.01)this.pdf.text(t,e,this._getBaseline(n),null,o);else{var l=this.pdf.internal.getFontSize();this.pdf.setFontSize(l*c),this.pdf.text(t,e,this._getBaseline(n),null,o),this.pdf.setFontSize(l)}this.ctx._clip_path.length>0&&a.push("Q")}},strokeText:function(t,e,n,r){if(!this._isStrokeTransparent()){e=this._wrapX(e),n=this._wrapY(n);var i=this._matrix_map_point(this.ctx._transform,[e,n]);e=i[0],n=i[1];var o=57.2958*this._matrix_rotation(this.ctx._transform);if(this.ctx._clip_path.length>0){var a;(a=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var s=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=s}var c=1;try{c=this._matrix_decompose(this._getTransform()).scale[0]}catch(t){console.warn(t)}if(1===c)this.pdf.text(t,e,this._getBaseline(n),{stroke:!0},o);else{var l=this.pdf.internal.getFontSize();this.pdf.setFontSize(l*c),this.pdf.text(t,e,this._getBaseline(n),{stroke:!0},o),this.pdf.setFontSize(l)}this.ctx._clip_path.length>0&&a.push("Q")}},setFont:function(t){this.ctx.font=t
;var e=/\s*(\w+)\s+(\w+)\s+(\w+)\s+([\d\.]+)(px|pt|em)\s+(.*)?/;if(null!=(u=e.exec(t))){var n=u[1],r=u[3],i=u[4],o=u[5],a=u[6];i="px"===o?Math.floor(parseFloat(i)):"em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)),this.pdf.setFontSize(i),"bold"===r||"700"===r?this.pdf.setFontStyle("bold"):"italic"===n?this.pdf.setFontStyle("italic"):this.pdf.setFontStyle("normal");var s,c=(f=a).toLowerCase().split(/\s*,\s*/);s=-1!=c.indexOf("arial")?"Arial":-1!=c.indexOf("verdana")?"Verdana":-1!=c.indexOf("helvetica")?"Helvetica":-1!=c.indexOf("sans-serif")?"sans-serif":-1!=c.indexOf("fixed")?"Fixed":-1!=c.indexOf("monospace")?"Monospace":-1!=c.indexOf("terminal")?"Terminal":-1!=c.indexOf("courier")?"Courier":-1!=c.indexOf("times")?"Times":-1!=c.indexOf("cursive")?"Cursive":-1!=c.indexOf("fantasy")?"Fantasy":(c.indexOf("serif"),"Serif");var l;l="bold"===r?"bold":"normal",this.pdf.setFont(s,l)}else{var u=(e=/\s*(\d+)(pt|px|em)\s+([\w "]+)\s*([\w "]+)?/).exec(t);if(null!=u){var h=u[1],f=u[3];(l=u[4])||(l="normal"),h="em"===o?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(h)),this.pdf.setFontSize(h),this.pdf.setFont(f,l)}}},setTextBaseline:function(t){this.ctx.textBaseline=t},getTextBaseline:function(){return this.ctx.textBaseline},setTextAlign:function(t){this.ctx.textAlign=t},getTextAlign:function(){return this.ctx.textAlign},setLineWidth:function(t){this.ctx.lineWidth=t,this.pdf.setLineWidth(t)},setLineCap:function(t){this.ctx.lineCap=t,this.pdf.setLineCap(t)},setLineJoin:function(t){this.ctx.lineJoin=t,this.pdf.setLineJoin(t)},moveTo:function(t,e){t=this._wrapX(t),e=this._wrapY(e);var n=this._matrix_map_point(this.ctx._transform,[t,e]),r={type:"mt",x:t=n[0],y:e=n[1]};this.path.push(r)},_wrapX:function(t){return this.pageWrapXEnabled?t%this.pageWrapX:t},_wrapY:function(t){return this.pageWrapYEnabled?(this._gotoPage(this._page(t)),(t-this.lastBreak)%this.pageWrapY):t},transform:function(t,e,n,r,i,o){this.ctx._transform=[t,e,n,r,i,o]},setTransform:function(t,e,n,r,i,o){this.ctx._transform=[t,e,n,r,i,o]},_getTransform:function(){return this.ctx._transform},lastBreak:0,pageBreaks:[],_page:function(t){if(this.pageWrapYEnabled){this.lastBreak=0;for(var e=0,n=0,r=0;r<this.pageBreaks.length;r++)if(t>=this.pageBreaks[r]){e++,0===this.lastBreak&&n++;var i=this.pageBreaks[r]-this.lastBreak;this.lastBreak=this.pageBreaks[r],n+=o=Math.floor(i/this.pageWrapY)}if(0===this.lastBreak){var o=Math.floor(t/this.pageWrapY)+1;n+=o}return n+e}return this.pdf.internal.getCurrentPageInfo().pageNumber},_gotoPage:function(t){},lineTo:function(t,e){t=this._wrapX(t),e=this._wrapY(e);var n=this._matrix_map_point(this.ctx._transform,[t,e]),r={type:"lt",x:t=n[0],y:e=n[1]};this.path.push(r)},bezierCurveTo:function(t,e,n,r,i,o){t=this._wrapX(t),e=this._wrapY(e),n=this._wrapX(n),r=this._wrapY(r),i=this._wrapX(i),o=this._wrapY(o);var a;i=(a=this._matrix_map_point(this.ctx._transform,[i,o]))[0],o=a[1];var s={type:"bct",x1:t=(a=this._matrix_map_point(this.ctx._transform,[t,e]))[0],y1:e=a[1],x2:n=(a=this._matrix_map_point(this.ctx._transform,[n,r]))[0],y2:r=a[1],x:i,y:o};this.path.push(s)},quadraticCurveTo:function(t,e,n,r){t=this._wrapX(t),e=this._wrapY(e),n=this._wrapX(n),r=this._wrapY(r);var i;n=(i=this._matrix_map_point(this.ctx._transform,[n,r]))[0],r=i[1];var o={type:"qct",x1:t=(i=this._matrix_map_point(this.ctx._transform,[t,e]))[0],y1:e=i[1],x:n,y:r};this.path.push(o)},arc:function(t,e,n,r,i,o){if(t=this._wrapX(t),e=this._wrapY(e),!this._matrix_is_identity(this.ctx._transform)){var a=this._matrix_map_point(this.ctx._transform,[t,e]);t=a[0],e=a[1];var s=this._matrix_map_point(this.ctx._transform,[0,0]),c=this._matrix_map_point(this.ctx._transform,[0,n]);n=Math.sqrt(Math.pow(c[0]-s[0],2)+Math.pow(c[1]-s[1],2))}var l={type:"arc",x:t,y:e,radius:n,startAngle:r,endAngle:i,anticlockwise:o};this.path.push(l)},drawImage:function(t,e,n,r,i,o,a,s,c){void 0!==o&&(e=o,n=a,r=s,i=c),e=this._wrapX(e),n=this._wrapY(n);var l,u=this._matrix_map_rect(this.ctx._transform,{x:e,y:n,w:r,h:i}),h=(this._matrix_map_rect(this.ctx._transform,{x:o,y:a,w:s,h:c}),/data:image\/(\w+).*/i.exec(t));l=null!=h?h[1]:"png",this.pdf.addImage(t,l,u.x,u.y,u.w,u.h)},_matrix_multiply:function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=n*t[0]+r*t[2],l=i*t[0]+o*t[2],u=a*t[0]+s*t[2]+t[4];return r=n*t[1]+r*t[3],o=i*t[1]+o*t[3],s=a*t[1]+s*t[3]+t[5],n=c,i=l,a=u,[n,r,i,o,a,s]},_matrix_rotation:function(t){return Math.atan2(t[2],t[0])},_matrix_decompose:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=Math.sqrt(e*e+n*n),a=(e/=o)*r+(n/=o)*i;r-=e*a,i-=n*a;var s=Math.sqrt(r*r+i*i);return r/=s,i/=s,a/=s,e*i<n*r&&(e=-e,n=-n,a=-a,o=-o),{scale:[o,0,0,s,0,0],translate:[1,0,0,1,t[4],t[5]],rotate:[e,n,-n,e,0,0],skew:[1,0,a,1,0,0]}},_matrix_map_point:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=e[0],l=e[1];return[c*n+l*i+a,c*r+l*o+s]},_matrix_map_point_obj:function(t,e){var n=this._matrix_map_point(t,[e.x,e.y]);return{x:n[0],y:n[1]}},_matrix_map_rect:function(t,e){var n=this._matrix_map_point(t,[e.x,e.y]),r=this._matrix_map_point(t,[e.x+e.w,e.y+e.h]);return{x:n[0],y:n[1],w:r[0]-n[0],h:r[1]-n[1]}},_matrix_is_identity:function(t){return 1==t[0]&&0==t[1]&&0==t[2]&&1==t[3]&&0==t[4]&&0==t[5]},rotate:function(t){var e=[Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,e)},scale:function(t,e){var n=[t,0,0,e,0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,n)},translate:function(t,e){var n=[1,0,0,1,t,e];this.ctx._transform=this._matrix_multiply(this.ctx._transform,n)},stroke:function(){if(this.ctx._clip_path.length>0){var t;(t=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var e=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._stroke(!0),this.ctx._clip_path=this.path,this.path=e,this._stroke(!1),t.push("Q")}else this._stroke(!1)},_stroke:function(t){if(t||!this._isStrokeTransparent()){for(var e=[],n=this.path,r=0;r<n.length;r++){var i=n[r];switch(i.type){case"mt":e.push({start:i,deltas:[],abs:[]});break;case"lt":h=[i.x-n[r-1].x,i.y-n[r-1].y],e[e.length-1].deltas.push(h),e[e.length-1].abs.push(i);break;case"bct":h=[i.x1-n[r-1].x,i.y1-n[r-1].y,i.x2-n[r-1].x,i.y2-n[r-1].y,i.x-n[r-1].x,i.y-n[r-1].y],e[e.length-1].deltas.push(h);break;case"qct":var o=n[r-1].x+2/3*(i.x1-n[r-1].x),a=n[r-1].y+2/3*(i.y1-n[r-1].y),s=i.x+2/3*(i.x1-i.x),c=i.y+2/3*(i.y1-i.y),l=i.x,u=i.y,h=[o-n[r-1].x,a-n[r-1].y,s-n[r-1].x,c-n[r-1].y,l-n[r-1].x,u-n[r-1].y];e[e.length-1].deltas.push(h);break;case"arc":0==e.length&&e.push({start:{x:0,y:0},deltas:[],abs:[]}),e[e.length-1].arc=!0,e[e.length-1].abs.push(i)}}for(r=0;r<e.length;r++){var f;if(f=r==e.length-1?"s":null,e[r].arc)for(var d=e[r].abs,p=0;p<d.length;p++){var m=d[p],g=360*m.startAngle/(2*Math.PI),w=360*m.endAngle/(2*Math.PI),y=m.x,v=m.y;this.internal.arc2(this,y,v,m.radius,g,w,m.anticlockwise,f,t)}else{var y=e[r].start.x,v=e[r].start.y;t?(this.pdf.lines(e[r].deltas,y,v,null,null),this.pdf.clip_fixed()):this.pdf.lines(e[r].deltas,y,v,null,f)}}}},_isFillTransparent:function(){return this.ctx._isFillTransparent||0==this.globalAlpha},_isStrokeTransparent:function(){return this.ctx._isStrokeTransparent||0==this.globalAlpha},fill:function(t){if(this.ctx._clip_path.length>0){var e;(e=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var n=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(t,!0),this.ctx._clip_path=this.path,this.path=n,this._fill(t,!1),e.push("Q")}else this._fill(t,!1)},_fill:function(t,e){if(!this._isFillTransparent()){var r,i="function"==typeof this.pdf.internal.newObject2;r=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage();var o=[],a=window.outIntercept;if(i)switch(this.ctx.globalCompositeOperation){case"normal":case"source-over":break;case"destination-in":case"destination-out":var s=this.pdf.internal.newStreamObject(),c=this.pdf.internal.newObject2();c.push("<</Type /ExtGState"),c.push("/SMask <</S /Alpha /G "+s.objId+" 0 R>>"),c.push(">>"),d="MASK"+c.objId,this.pdf.internal.addGraphicsState(d,c.objId);var l="/"+d+" gs";r.splice(0,0,"q"),r.splice(1,0,l),r.push("Q"),window.outIntercept=s;break;default:var u="/"+this.pdf.internal.blendModeMap[this.ctx.globalCompositeOperation.toUpperCase()];u&&this.pdf.internal.out(u+" gs")}var h=this.ctx.globalAlpha;if(this.ctx._fillOpacity<1&&(h=this.ctx._fillOpacity),i){var f=this.pdf.internal.newObject2();f.push("<</Type /ExtGState"),f.push("/CA "+h),f.push("/ca "+h),f.push(">>");var d="GS_O_"+f.objId;this.pdf.internal.addGraphicsState(d,f.objId),this.pdf.internal.out("/"+d+" gs")}for(var p=this.path,m=0;m<p.length;m++){var g=p[m];switch(g.type){case"mt":o.push({start:g,deltas:[],abs:[]});break;case"lt":_=[g.x-p[m-1].x,g.y-p[m-1].y],o[o.length-1].deltas.push(_),o[o.length-1].abs.push(g);break;case"bct":_=[g.x1-p[m-1].x,g.y1-p[m-1].y,g.x2-p[m-1].x,g.y2-p[m-1].y,g.x-p[m-1].x,g.y-p[m-1].y],o[o.length-1].deltas.push(_);break;case"qct":var w=p[m-1].x+2/3*(g.x1-p[m-1].x),y=p[m-1].y+2/3*(g.y1-p[m-1].y),v=g.x+2/3*(g.x1-g.x),b=g.y+2/3*(g.y1-g.y),x=g.x,k=g.y,_=[w-p[m-1].x,y-p[m-1].y,v-p[m-1].x,b-p[m-1].y,x-p[m-1].x,k-p[m-1].y];o[o.length-1].deltas.push(_);break;case"arc":0===o.length&&o.push({deltas:[],abs:[]}),o[o.length-1].arc=!0,o[o.length-1].abs.push(g);break;case"close":o.push({close:!0})}}for(m=0;m<o.length;m++){var C;if(m==o.length-1?(C="f","evenodd"===t&&(C+="*")):C=null,o[m].close)this.pdf.internal.out("h"),this.pdf.internal.out("f");else if(o[m].arc){o[m].start&&this.internal.move2(this,o[m].start.x,o[m].start.y);for(var A=o[m].abs,S=0;S<A.length;S++){var q=A[S];if(void 0!==q.startAngle){var T=360*q.startAngle/(2*Math.PI),P=360*q.endAngle/(2*Math.PI),I=q.x,E=q.y;if(0===S&&this.internal.move2(this,I,E),this.internal.arc2(this,I,E,q.radius,T,P,q.anticlockwise,null,e),S===A.length-1&&o[m].start){var I=o[m].start.x,E=o[m].start.y;this.internal.line2(n,I,E)}}else this.internal.line2(n,q.x,q.y)}}else{var I=o[m].start.x,E=o[m].start.y;e?(this.pdf.lines(o[m].deltas,I,E,null,null),this.pdf.clip_fixed()):this.pdf.lines(o[m].deltas,I,E,null,C)}}window.outIntercept=a}},pushMask:function(){if("function"==typeof this.pdf.internal.newObject2){var t=this.pdf.internal.newStreamObject(),e=this.pdf.internal.newObject2();e.push("<</Type /ExtGState"),e.push("/SMask <</S /Alpha /G "+t.objId+" 0 R>>"),e.push(">>");var n="MASK"+e.objId;this.pdf.internal.addGraphicsState(n,e.objId);var r="/"+n+" gs";this.pdf.internal.out(r)}else console.log("jsPDF v2 not enabled")},clip:function(){if(this.ctx._clip_path.length>0)for(var t=0;t<this.path.length;t++)this.ctx._clip_path.push(this.path[t]);else this.ctx._clip_path=this.path;this.path=[]},measureText:function(t){var e=this.pdf;return{getWidth:function(){var n=e.internal.getFontSize(),r=e.getStringUnitWidth(t)*n/e.internal.scaleFactor;return r*=1.3333},get width(){return this.getWidth(t)}}},_getBaseline:function(t){var e=parseInt(this.pdf.internal.getFontSize()),n=.25*e;switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e;case"hanging":return t+e-n;case"middle":return t+e/2-n;case"ideographic":return t;case"alphabetic":default:return t}}};var n=t.context2d;Object.defineProperty(n,"fillStyle",{set:function(t){this.setFillStyle(t)},get:function(){return this.ctx.fillStyle}}),Object.defineProperty(n,"strokeStyle",{set:function(t){this.setStrokeStyle(t)},get:function(){return this.ctx.strokeStyle}}),Object.defineProperty(n,"lineWidth",{set:function(t){this.setLineWidth(t)},get:function(){return this.ctx.lineWidth}}),Object.defineProperty(n,"lineCap",{set:function(t){this.setLineCap(t)},get:function(){return this.ctx.lineCap}}),Object.defineProperty(n,"lineJoin",{set:function(t){this.setLineJoin(t)},get:function(){return this.ctx.lineJoin}}),Object.defineProperty(n,"miterLimit",{set:function(t){this.ctx.miterLimit=t},get:function(){return this.ctx.miterLimit}}),Object.defineProperty(n,"textBaseline",{set:function(t){this.setTextBaseline(t)},get:function(){return this.getTextBaseline()}}),Object.defineProperty(n,"textAlign",{set:function(t){this.setTextAlign(t)},get:function(){return this.getTextAlign()}}),Object.defineProperty(n,"font",{set:function(t){this.setFont(t)},get:function(){return this.ctx.font}}),Object.defineProperty(n,"globalCompositeOperation",{set:function(t){this.ctx.globalCompositeOperation=t},get:function(){return this.ctx.globalCompositeOperation}}),Object.defineProperty(n,"globalAlpha",{set:function(t){this.ctx.globalAlpha=t},get:function(){return this.ctx.globalAlpha}}),Object.defineProperty(n,"ignoreClearRect",{set:function(t){this.ctx.ignoreClearRect=t},get:function(){return this.ctx.ignoreClearRect}}),n.internal={},n.internal.rxRgb=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,n.internal.rxRgba=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/,n.internal.rxTransparent=/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/,n.internal.arc=function(t,e,n,r,i,o,a,s){for(var c=this.pdf.internal.scaleFactor,l=this.pdf.internal.pageSize.height,u=this.pdf.internal.f2,h=i*(Math.PI/180),f=o*(Math.PI/180),d=this.createArc(r,h,f,a),p=0;p<d.length;p++){var m=d[p];0===p?this.pdf.internal.out([u((m.x1+e)*c),u((l-(m.y1+n))*c),"m",u((m.x2+e)*c),u((l-(m.y2+n))*c),u((m.x3+e)*c),u((l-(m.y3+n))*c),u((m.x4+e)*c),u((l-(m.y4+n))*c),"c"].join(" ")):this.pdf.internal.out([u((m.x2+e)*c),u((l-(m.y2+n))*c),u((m.x3+e)*c),u((l-(m.y3+n))*c),u((m.x4+e)*c),u((l-(m.y4+n))*c),"c"].join(" ")),t._lastPoint={x:e,y:n}}null!==s&&this.pdf.internal.out(this.pdf.internal.getStyle(s))},n.internal.arc2=function(t,e,n,r,i,o,a,s,c){var l=e,u=n;c?(this.arc(t,l,u,r,i,o,a,null),this.pdf.clip_fixed()):this.arc(t,l,u,r,i,o,a,s)},n.internal.move2=function(t,e,n){var r=this.pdf.internal.scaleFactor,i=this.pdf.internal.pageSize.height,o=this.pdf.internal.f2;this.pdf.internal.out([o(e*r),o((i-n)*r),"m"].join(" ")),t._lastPoint={x:e,y:n}},n.internal.line2=function(t,e,n){var r=this.pdf.internal.scaleFactor,i=this.pdf.internal.pageSize.height,o=this.pdf.internal.f2,a={x:e,y:n};this.pdf.internal.out([o(a.x*r),o((i-a.y)*r),"l"].join(" ")),t._lastPoint=a},n.internal.createArc=function(t,e,n,r){var i=2*Math.PI,o=Math.PI/2,a=e;for((a<i||a>i)&&(a%=i),a<0&&(a=i+a);e>n;)e-=i;var s=Math.abs(n-e);s<i&&r&&(s=i-s);for(var c=[],l=r?-1:1,u=a;s>1e-5;){var h=u+l*Math.min(s,o);c.push(this.createSmallArc(t,u,h)),s-=Math.abs(h-u),u=h}return c},n.internal.getCurrentPage=function(){return this.pdf.internal.pages[this.pdf.internal.getCurrentPageInfo().pageNumber]},n.internal.createSmallArc=function(t,e,n){var r=(n-e)/2,i=t*Math.cos(r),o=t*Math.sin(r),a=i,s=-o,c=a*a+s*s,l=c+a*i+s*o,u=4/3*(Math.sqrt(2*c*l)-l)/(a*o-s*i),h=a-u*s,f=s+u*a,d=h,p=-f,m=r+e,g=Math.cos(m),w=Math.sin(m);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*g-f*w,y2:h*w+f*g,x3:d*g-p*w,y3:d*w+p*g,x4:t*Math.cos(n),y4:t*Math.sin(n)}}}(e.API),function(e){var n,r,o,a,s,c,l,u,h,f,d,p,m,g,w,y,v,b,x,k;n=function(){function t(){}return function(e){return t.prototype=e,new t}}(),f=function(t){var e,n,r,i,o,a,s;for(n=0,r=t.length,e=void 0,i=!1,a=!1;!i&&n!==r;)(e=t[n]=t[n].trimLeft())&&(i=!0),n++;for(n=r-1;r&&!a&&-1!==n;)(e=t[n]=t[n].trimRight())&&(a=!0),n--;for(o=/\s+$/g,s=!0,n=0;n!==r;)"\u2028"!=t[n]&&(e=t[n].replace(/\s+/g," "),s&&(e=e.trimLeft()),e&&(s=o.test(e)),t[n]=e),n++;return t},p=function(t){var e,n,r;for(e=void 0,n=(r=t.split(",")).shift();!e&&n;)e=o[n.trim().toLowerCase()],n=r.shift();return e},m=function(t){(t="auto"===t?"0px":t).indexOf("em")>-1&&!isNaN(Number(t.replace("em","")))&&(t=18.719*Number(t.replace("em",""))+"px"),t.indexOf("pt")>-1&&!isNaN(Number(t.replace("pt","")))&&(t=1.333*Number(t.replace("pt",""))+"px");var e;return(e=g[t])?e:void 0!==(e={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:t}])?g[t]=e/16:(e=parseFloat(t))?g[t]=e/16:3===(e=t.match(/([\d\.]+)(px)/)).length?g[t]=parseFloat(e[1])/16:g[t]=1},h=function(t){var e,n,r;return r=function(e){var n;return n=function(t){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle?t.currentStyle:t.style}(t),function(t){return t=t.replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()}),n[t]}}(),e={},n=void 0,e["font-family"]=p(r("font-family"))||"times",e["font-style"]=a[r("font-style")]||"normal",e["text-align"]=s[r("text-align")]||"left","bold"===(n=c[r("font-weight")]||"normal")&&("normal"===e["font-style"]?e["font-style"]=n:e["font-style"]=n+e["font-style"]),e["font-size"]=m(r("font-size"))||1,e["line-height"]=m(r("line-height"))||1,e.display="inline"===r("display")?"inline":"block",n="block"===e.display,e["margin-top"]=n&&m(r("margin-top"))||0,e["margin-bottom"]=n&&m(r("margin-bottom"))||0,e["padding-top"]=n&&m(r("padding-top"))||0,e["padding-bottom"]=n&&m(r("padding-bottom"))||0,e["margin-left"]=n&&m(r("margin-left"))||0,e["margin-right"]=n&&m(r("margin-right"))||0,e["padding-left"]=n&&m(r("padding-left"))||0,e["padding-right"]=n&&m(r("padding-right"))||0,e["page-break-before"]=r("page-break-before")||"auto",e.float=l[r("cssFloat")]||"none",e.clear=u[r("clear")]||"none",e.color=r("color"),e},w=function(t,e,n){var r,i,o,a,s;if(o=!1,i=void 0,a=void 0,r=n["#"+t.id])if("function"==typeof r)o=r(t,e);else for(i=0,a=r.length;!o&&i!==a;)o=r[i](t,e),i++;if(r=n[t.nodeName],!o&&r)if("function"==typeof r)o=r(t,e);else for(i=0,a=r.length;!o&&i!==a;)o=r[i](t,e),i++;for(s=t.className?t.className.split(" "):[],i=0;i<s.length;i++)if(r=n["."+s[i]],!o&&r)if("function"==typeof r)o=r(t,e);else for(i=0,a=r.length;!o&&i!==a;)o=r[i](t,e),i++;return o},k=function(t,e){var n,r,i,o,a,s,c,l,u;for(n=[],r=[],i=0,u=t.rows[0].cells.length,c=t.clientWidth;i<u;)l=t.rows[0].cells[i],r[i]={name:l.textContent.toLowerCase().replace(/\s+/g,""),prompt:l.textContent.replace(/\r?\n/g,""),width:l.clientWidth/c*e.pdf.internal.pageSize.width},i++;for(i=1;i<t.rows.length;){for(s=t.rows[i],a={},o=0;o<s.cells.length;)a[r[o].name]=s.cells[o].textContent.replace(/\r?\n/g,""),o++;n.push(a),i++}return{rows:n,headers:r}};var _={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},C=1;r=function(e,i,o){var a,s,c,l,u,f,d,p;for(s=e.childNodes,a=void 0,(u="block"===(c=h(e)).display)&&(i.setBlockBoundary(),i.setBlockStyle(c)),l=0,f=s.length;l<f;){if("object"===(void 0===(a=s[l])?"undefined":t(a))){if(i.executeWatchFunctions(a),1===a.nodeType&&"HEADER"===a.nodeName){var m=a,g=i.pdf.margins_doc.top;i.pdf.internal.events.subscribe("addPage",function(t){i.y=g,r(m,i,o),i.pdf.margins_doc.top=i.y+10,i.y+=10},!1)}if(8===a.nodeType&&"#comment"===a.nodeName)~a.textContent.indexOf("ADD_PAGE")&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top);else if(1!==a.nodeType||_[a.nodeName])if(3===a.nodeType){var v=a.nodeValue;if(a.nodeValue&&"LI"===a.parentNode.nodeName)if("OL"===a.parentNode.parentNode.nodeName)v=C+++". "+v;else{var b=c["font-size"],x=(3-.75*b)*i.pdf.internal.scaleFactor,A=.75*b*i.pdf.internal.scaleFactor,S=1.74*b/i.pdf.internal.scaleFactor;p=function(t,e){this.pdf.circle(t+x,e+A,S,"FD")}}16&a.ownerDocument.body.compareDocumentPosition(a)&&i.addText(v,c)}else"string"==typeof a&&i.addText(a,c);else{var q;if("IMG"===a.nodeName){var T=a.getAttribute("src");q=y[i.pdf.sHashCode(T)||T]}if(q){i.pdf.internal.pageSize.height-i.pdf.margins_doc.bottom<i.y+a.height&&i.y>i.pdf.margins_doc.top&&(i.pdf.addPage(),i.y=i.pdf.margins_doc.top,i.executeWatchFunctions(a));var P=h(a),I=i.x,E=12/i.pdf.internal.scaleFactor,O=(P["margin-left"]+P["padding-left"])*E,F=(P["margin-right"]+P["padding-right"])*E,B=(P["margin-top"]+P["padding-top"])*E,R=(P["margin-bottom"]+P["padding-bottom"])*E;void 0!==P.float&&"right"===P.float?I+=i.settings.width-a.width-F:I+=O,i.pdf.addImage(q,I,i.y+B,a.width,a.height),q=void 0,"right"===P.float||"left"===P.float?(i.watchFunctions.push(function(t,e,n,r){return i.y>=e?(i.x+=t,i.settings.width+=n,!0):!!(r&&1===r.nodeType&&!_[r.nodeName]&&i.x+r.width>i.pdf.margins_doc.left+i.pdf.margins_doc.width)&&(i.x+=t,i.y=e,i.settings.width+=n,!0)}.bind(this,"left"===P.float?-a.width-O-F:0,i.y+a.height+B+R,a.width)),i.watchFunctions.push(function(t,e,n){return!(i.y<t&&e===i.pdf.internal.getNumberOfPages())||1===n.nodeType&&"both"===h(n).clear&&(i.y=t,!0)}.bind(this,i.y+a.height,i.pdf.internal.getNumberOfPages())),i.settings.width-=a.width+O+F,"left"===P.float&&(i.x+=a.width+O+F)):i.y+=a.height+B+R}else if("TABLE"===a.nodeName)d=k(a,i),i.y+=10,i.pdf.table(i.x,i.y,d.rows,d.headers,{autoSize:!1,printHeaders:o.printHeaders,margins:i.pdf.margins_doc,css:h(a)}),i.y=i.pdf.lastCellPos.y+i.pdf.lastCellPos.h+20;else if("OL"===a.nodeName||"UL"===a.nodeName)C=1,w(a,i,o)||r(a,i,o),i.y+=10;else if("LI"===a.nodeName){var j=i.x;i.x+=20/i.pdf.internal.scaleFactor,i.y+=3,w(a,i,o)||r(a,i,o),i.x=j}else"BR"===a.nodeName?(i.y+=c["font-size"]*i.pdf.internal.scaleFactor,i.addText("\u2028",n(c))):w(a,i,o)||r(a,i,o)}}l++}if(o.outY=i.y,u)return i.setBlockBoundary(p)},y={},v=function(t,e,n,r){function i(){e.pdf.internal.events.publish("imagesLoaded"),r(o)}for(var o,a=t.getElementsByTagName("img"),s=a.length,c=0;s--;)!function(t,n,r){if(t){var a=new Image;o=++c,a.crossOrigin="",a.onerror=a.onload=function(){if(a.complete&&(0===a.src.indexOf("data:image/")&&(a.width=n||a.width||0,a.height=r||a.height||0),a.width+a.height)){var o=e.pdf.sHashCode(t)||t;y[o]=y[o]||a}--c||i()},a.src=t}}(a[s].getAttribute("src"),a[s].width,a[s].height);return c||i()},b=function(t,e,n){var i=t.getElementsByTagName("footer");if(i.length>0){i=i[0];var o=e.pdf.internal.write,a=e.y;e.pdf.internal.write=function(){},r(i,e,n);var s=Math.ceil(e.y-a)+5;e.y=a,e.pdf.internal.write=o,e.pdf.margins_doc.bottom+=s;for(var c=function(t){var o=void 0!==t?t.pageNumber:1,a=e.y;e.y=e.pdf.internal.pageSize.height-e.pdf.margins_doc.bottom,e.pdf.margins_doc.bottom-=s;for(var c=i.getElementsByTagName("span"),l=0;l<c.length;++l)(" "+c[l].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1&&(c[l].innerHTML=o),(" "+c[l].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&(c[l].innerHTML="###jsPDFVarTotalPages###");r(i,e,n),e.pdf.margins_doc.bottom+=s,e.y=a},l=i.getElementsByTagName("span"),u=0;u<l.length;++u)(" "+l[u].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&e.pdf.internal.events.subscribe("htmlRenderingFinished",e.pdf.putTotalPages.bind(e.pdf,"###jsPDFVarTotalPages###"),!0);e.pdf.internal.events.subscribe("addPage",c,!1),c(),_.FOOTER=1}},x=function(t,e,n,i,o,a){if(!e)return!1;"string"==typeof e||e.parentNode||(e=""+e.innerHTML),"string"==typeof e&&(e=function(t){var e,n,r,i;return r="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),i="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",n=document.createElement("div"),n.style.cssText=i,n.innerHTML='<iframe style="height:1px;width:1px" name="'+r+'" />',document.body.appendChild(n),(e=window.frames[r]).document.open(),e.document.writeln(t),e.document.close(),e.document.body}(e.replace(/<\/?script[^>]*?>/gi,"")));var s,c=new d(t,n,i,o);return v.call(this,e,c,o.elementHandlers,function(t){b(e,c,o.elementHandlers),r(e,c,o.elementHandlers),c.pdf.internal.events.publish("htmlRenderingFinished"),s=c.dispose(),"function"==typeof a?a(s):t&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")}),s||{x:c.x,y:c.y}},(d=function(t,e,n,r){return this.pdf=t,this.x=e,this.y=n,this.settings=r,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},d.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},d.prototype.executeWatchFunctions=function(t){var e=!1,n=[];if(this.watchFunctions.length>0){for(var r=0;r<this.watchFunctions.length;++r)!0===this.watchFunctions[r](t)?e=!0:n.push(this.watchFunctions[r]);this.watchFunctions=n}return e},d.prototype.splitFragmentsIntoLines=function(t,e){var r,i,o,a,s,c,l,u,h,f,d,p,m,g;for(f=this.pdf.internal.scaleFactor,a={},i=void 0,h=void 0,o=void 0,s=void 0,g=void 0,u=void 0,l=void 0,c=void 0,p=[d=[]],r=0,m=this.settings.width;t.length;)if(s=t.shift(),g=e.shift(),s)if(i=g["font-family"],h=g["font-style"],(o=a[i+h])||(o=this.pdf.internal.getFont(i,h).metadata.Unicode,a[i+h]=o),u={widths:o.widths,kerning:o.kerning,fontSize:12*g["font-size"],textIndent:r},l=this.pdf.getStringUnitWidth(s,u)*u.fontSize/f,"\u2028"==s)d=[],p.push(d);else if(r+l>m){for(c=this.pdf.splitTextToSize(s,m,u),d.push([c.shift(),g]);c.length;)d=[[c.shift(),g]],p.push(d);r=this.pdf.getStringUnitWidth(d[0][0],u)*u.fontSize/f}else d.push([s,g]),r+=l;if(void 0!==g["text-align"]&&("center"===g["text-align"]||"right"===g["text-align"]||"justify"===g["text-align"]))for(var w=0;w<p.length;++w){var y=this.pdf.getStringUnitWidth(p[w][0][0],u)*u.fontSize/f;w>0&&(p[w][0][1]=n(p[w][0][1]));var v=m-y;if("right"===g["text-align"])p[w][0][1]["margin-left"]=v;else if("center"===g["text-align"])p[w][0][1]["margin-left"]=v/2;else if("justify"===g["text-align"]){var b=p[w][0][0].split(" ").length-1;p[w][0][1]["word-spacing"]=v/b,w===p.length-1&&(p[w][0][1]["word-spacing"]=0)}}return p},d.prototype.RenderTextFragment=function(t,e){var n,r;r=0,this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),e.color,"Td"),r=Math.max(r,e["line-height"],e["font-size"]),this.pdf.internal.write(0,(-12*r).toFixed(2),"Td")),n=this.pdf.internal.getFont(e["font-family"],e["font-style"]);var i=this.getPdfColor(e.color);i!==this.lastTextColor&&(this.pdf.internal.write(i),this.lastTextColor=i),void 0!==e["word-spacing"]&&e["word-spacing"]>0&&this.pdf.internal.write(e["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+n.id,(12*e["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(t)+") Tj"),void 0!==e["word-spacing"]&&this.pdf.internal.write(0,"Tw")},d.prototype.getPdfColor=function(t){var e,n,r,o=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(t);if(null!=o?(e=parseInt(o[1]),n=parseInt(o[2]),r=parseInt(o[3])):("#"!=t.charAt(0)&&((t=i.colorNameToHex(t))||(t="#000000")),e=t.substring(1,3),e=parseInt(e,16),n=t.substring(3,5),n=parseInt(n,16),r=t.substring(5,7),r=parseInt(r,16)),"string"==typeof e&&/^#[0-9A-Fa-f]{6}$/.test(e)){var a=parseInt(e.substr(1),16);e=a>>16&255,n=a>>8&255,r=255&a}var s=this.f3;return 0===e&&0===n&&0===r||void 0===n?s(e/255)+" g":[s(e/255),s(n/255),s(r/255),"rg"].join(" ")},d.prototype.f3=function(t){return t.toFixed(3)},d.prototype.renderParagraph=function(t){var e,n,r,i,o,a,s,c,l,u,h,d,p;if(r=f(this.paragraph.text),d=this.paragraph.style,e=this.paragraph.blockstyle,this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:e},r.join("").trim()){s=this.splitFragmentsIntoLines(r,d),a=void 0,c=void 0,n=12/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,h=(Math.max((e["margin-top"]||0)-this.priorMarginBottom,0)+(e["padding-top"]||0))*n,u=((e["margin-bottom"]||0)+(e["padding-bottom"]||0))*n,this.priorMarginBottom=e["margin-bottom"]||0,"always"===e["page-break-before"]&&(this.pdf.addPage(),this.y=0,h=((e["margin-top"]||0)+(e["padding-top"]||0))*n),l=this.pdf.internal.write,i=void 0,o=void 0,this.y+=h,l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var m=0;s.length;){for(c=0,i=0,o=(a=s.shift()).length;i!==o;)a[i][0].trim()&&(c=Math.max(c,a[i][1]["line-height"],a[i][1]["font-size"]),p=7*a[i][1]["font-size"]),i++;var g=0,w=0;for(void 0!==a[0][1]["margin-left"]&&a[0][1]["margin-left"]>0&&(g=(w=this.pdf.internal.getCoordinateString(a[0][1]["margin-left"]))-m,m=w),l(g+Math.max(e["margin-left"]||0,0)*n,(-12*c).toFixed(2),"Td"),i=0,o=a.length;i!==o;)a[i][0]&&this.RenderTextFragment(a[i][0],a[i][1]),i++;if(this.y+=c*n,this.executeWatchFunctions(a[0][1])&&s.length>0){var y=[],v=[];s.forEach(function(t){for(var e=0,n=t.length;e!==n;)t[e][0]&&(y.push(t[e][0]+" "),v.push(t[e][1])),++e}),s=this.splitFragmentsIntoLines(f(y),v),l("ET","Q"),l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return t&&"function"==typeof t&&t.call(this,this.x-9,this.y-p/2),l("ET","Q"),this.y+=u}},d.prototype.setBlockBoundary=function(t){return this.renderParagraph(t)},d.prototype.setBlockStyle=function(t){return this.paragraph.blockstyle=t},d.prototype.addText=function(t,e){return this.paragraph.text.push(t),this.paragraph.style.push(e)},o={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},c={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},a={normal:"normal",italic:"italic",oblique:"italic"},s={left:"left",right:"right",center:"center",justify:"justify"},l={none:"none",right:"right",left:"left"},u={none:"none",both:"both"},g={normal:1},e.fromHTML=function(t,e,n,r,i,o){return this.margins_doc=o||{top:0,bottom:0},r||(r={}),r.elementHandlers||(r.elementHandlers={}),x(this,t,isNaN(e)?4:e,isNaN(n)?4:n,r,i)}}(e.API),function(t){var n,r,i;e.API.addJS=function(t){return i=t,this.internal.events.subscribe("postPutResources",function(t){n=this.internal.newObject(),this.internal.write("<< /Names [(EmbeddedJS) "+(n+1)+" 0 R] >>","endobj"),r=this.internal.newObject(),this.internal.write("<< /S /JavaScript /JS (",i,") >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==n&&void 0!==r&&this.internal.write("/Names <</JavaScript "+n+" 0 R>>")}),this}}(),function(t){t.events.push(["postPutResources",function(){var t=this,e=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=t.outline.render().split(/\r\n/),r=0;r<n.length;r++){var i=n[r],o=e.exec(i);if(null!=o){var a=o[1];t.internal.newObjectDeferredBegin(a)}t.internal.write(i)}if(this.outline.createNamedDestinations){for(var s=this.internal.pages.length,c=[],r=0;r<s;r++){var l=t.internal.newObject();c.push(l);var u=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<c.length;r++)t.internal.write("(page_"+(r+1)+")"+c[r]+" 0 R");t.internal.write(" ] >>","endobj"),t.internal.newObject(),t.internal.write("<< /Dests "+h+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+namesOid+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var r={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),
this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(i=0;i<e.children.length;i++){o=e.children[i],this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(e)),i>0&&this.line("/Prev "+this.makeRef(e.children[i-1])),i<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var n=this.count=this.count_r({count:0},o);if(n>0&&this.line("/Count "+n),o.options&&o.options.pageNumber){var r=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+r.objId+" 0 R /XYZ 0 "+this.ctx.pdf.internal.pageSize.height+" 0]")}this.objEnd()}for(var i=0;i<e.children.length;i++){var o=e.children[i];this.renderItems(o)}},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(t){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(e.API),function(t){var e=function(){return"function"!=typeof PNG||"function"!=typeof s},n=function(e){return e!==t.image_compression.NONE&&r()},r=function(){var t="function"==typeof o;if(!t)throw new Error("requires deflate.js for compression");return t},i=function(e,n,r,i){var s=5,u=f;switch(i){case t.image_compression.FAST:s=3,u=h;break;case t.image_compression.MEDIUM:s=6,u=d;break;case t.image_compression.SLOW:s=9,u=p}e=l(e,n,r,u);var m=new Uint8Array(a(s)),g=c(e),w=new o(s),y=w.append(e),v=w.flush(),b=m.length+y.length+v.length,x=new Uint8Array(b+4);return x.set(m),x.set(y,m.length),x.set(v,m.length+y.length),x[b++]=g>>>24&255,x[b++]=g>>>16&255,x[b++]=g>>>8&255,x[b++]=255&g,t.arrayBufferToBinaryString(x)},a=function(t,e){var n=Math.LOG2E*Math.log(32768)-8<<4|8,r=n<<8;return r|=Math.min(3,(e-1&255)>>1)<<6,r|=0,r+=31-r%31,[n,255&r]},c=function(t,e){for(var n,r=1,i=0,o=t.length,a=0;o>0;){o-=n=o>e?e:o;do{i+=r+=t[a++]}while(--n);r%=65521,i%=65521}return(i<<16|r)>>>0},l=function(t,e,n,r){for(var i,o,a,s=t.length/e,c=new Uint8Array(t.length+s),l=g(),u=0;u<s;u++){if(a=u*e,i=t.subarray(a,a+e),r)c.set(r(i,n,o),a+u);else{for(var h=0,f=l.length,d=[];h<f;h++)d[h]=l[h](i,n,o);var p=w(d.concat());c.set(d[p],a+u)}o=i}return c},u=function(t,e,n){var r=Array.apply([],t);return r.unshift(0),r},h=function(t,e,n){var r,i=[],o=0,a=t.length;for(i[0]=1;o<a;o++)r=t[o-e]||0,i[o+1]=t[o]-r+256&255;return i},f=function(t,e,n){var r,i=[],o=0,a=t.length;for(i[0]=2;o<a;o++)r=n&&n[o]||0,i[o+1]=t[o]-r+256&255;return i},d=function(t,e,n){var r,i,o=[],a=0,s=t.length;for(o[0]=3;a<s;a++)r=t[a-e]||0,i=n&&n[a]||0,o[a+1]=t[a]+256-(r+i>>>1)&255;return o},p=function(t,e,n){var r,i,o,a,s=[],c=0,l=t.length;for(s[0]=4;c<l;c++)r=t[c-e]||0,i=n&&n[c]||0,o=n&&n[c-e]||0,a=m(r,i,o),s[c+1]=t[c]-a+256&255;return s},m=function(t,e,n){var r=t+e-n,i=Math.abs(r-t),o=Math.abs(r-e),a=Math.abs(r-n);return i<=o&&i<=a?t:o<=a?e:n},g=function(){return[u,h,f,d,p]},w=function(t){for(var e,n,r,i=0,o=t.length;i<o;)((e=y(t[i].slice(1)))<n||!n)&&(n=e,r=i),i++;return r},y=function(t){for(var e=0,n=t.length,r=0;e<n;)r+=Math.abs(t[e++]);return r},v=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n};t.processPNG=function(t,r,o,a,s){var c,l,u,h,f,d,p=this.color_spaces.DEVICE_RGB,m=this.decode.FLATE_DECODE,g=8;if(this.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.isArrayBufferView(t)){if(e())throw new Error("PNG support requires png.js and zlib.js");if(c=new PNG(t),t=c.imgData,g=c.bits,p=c.colorSpace,h=c.colors,-1!==[4,6].indexOf(c.colorType)){if(8===c.bits)for(var w,y=(I=32==c.pixelBitlength?new Uint32Array(c.decodePixels().buffer):16==c.pixelBitlength?new Uint16Array(c.decodePixels().buffer):new Uint8Array(c.decodePixels().buffer)).length,b=new Uint8Array(y*c.colors),x=new Uint8Array(y),k=c.pixelBitlength-c.bits,_=0,C=0;_<y;_++){for(A=I[_],w=0;w<k;)b[C++]=A>>>w&255,w+=c.bits;x[_]=A>>>w&255}if(16===c.bits){for(var A,y=(I=new Uint32Array(c.decodePixels().buffer)).length,b=new Uint8Array(y*(32/c.pixelBitlength)*c.colors),x=new Uint8Array(y*(32/c.pixelBitlength)),S=c.colors>1,_=0,C=0,q=0;_<y;)A=I[_++],b[C++]=A>>>0&255,S&&(b[C++]=A>>>16&255,A=I[_++],b[C++]=A>>>0&255),x[q++]=A>>>16&255;g=8}n(a)?(t=i(b,c.width*c.colors,c.colors,a),d=i(x,c.width,1,a)):(t=b,d=x,m=null)}if(3===c.colorType&&(p=this.color_spaces.INDEXED,f=c.palette,c.transparency.indexed)){for(var T=c.transparency.indexed,P=0,_=0,y=T.length;_<y;++_)P+=T[_];if((P/=255)==y-1&&-1!==T.indexOf(0))u=[T.indexOf(0)];else if(P!==y){for(var I=c.decodePixels(),x=new Uint8Array(I.length),_=0,y=I.length;_<y;_++)x[_]=T[I[_]];d=i(x,c.width,1)}}var E=v(a);return l=m===this.decode.FLATE_DECODE?"/Predictor "+E+" /Colors "+h+" /BitsPerComponent "+g+" /Columns "+c.width:"/Colors "+h+" /BitsPerComponent "+g+" /Columns "+c.width,(this.isArrayBuffer(t)||this.isArrayBufferView(t))&&(t=this.arrayBufferToBinaryString(t)),(d&&this.isArrayBuffer(d)||this.isArrayBufferView(d))&&(d=this.arrayBufferToBinaryString(d)),this.createImageInfo(t,c.width,c.height,p,g,m,r,o,l,u,f,d,E)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(e.API),e.API.autoPrint=function(){var t;return this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+t+" 0 R")}),this},function(t){var e=t.getCharWidthsArray=function(t,e){e||(e={});var n,r,i,o=e.widths?e.widths:this.internal.getFont().metadata.Unicode.widths,a=o.fof?o.fof:1,s=e.kerning?e.kerning:this.internal.getFont().metadata.Unicode.kerning,c=s.fof?s.fof:1,l=0,u=o[0]||a,h=[];for(n=0,r=t.length;n<r;n++)i=t.charCodeAt(n),h.push((o[i]||u)/a+(s[i]&&s[i][l]||0)/c),l=i;return h},n=function(t){for(var e=t.length,n=0;e;)n+=t[--e];return n},r=t.getStringUnitWidth=function(t,r){return n(e.call(this,t,r))},i=function(t,e,n,r){for(var i=[],o=0,a=t.length,s=0;o!==a&&s+e[o]<n;)s+=e[o],o++;i.push(t.slice(0,o));var c=o;for(s=0;o!==a;)s+e[o]>r&&(i.push(t.slice(c,o)),s=0,c=o),s+=e[o],o++;return c!==o&&i.push(t.slice(c,o)),i},o=function(t,o,a){a||(a={});var s,c,l,u,h,f,d=[],p=[d],m=a.textIndent||0,g=0,w=0,y=t.split(" "),v=e(" ",a)[0];if(f=-1===a.lineIndent?y[0].length+2:a.lineIndent||0){var b=Array(f).join(" "),x=[];y.map(function(t){(t=t.split(/\s*\n/)).length>1?x=x.concat(t.map(function(t,e){return(e&&t.length?"\n":"")+t})):x.push(t[0])}),y=x,f=r(b,a)}for(l=0,u=y.length;l<u;l++){var k=0;if(s=y[l],f&&"\n"==s[0]&&(s=s.substr(1),k=1),c=e(s,a),w=n(c),m+g+w>o||k){if(w>o){for(h=i(s,c,o-(m+g),o),d.push(h.shift()),d=[h.pop()];h.length;)p.push([h.shift()]);w=n(c.slice(s.length-d[0].length))}else d=[s];p.push(d),m=w+f,g=v}else d.push(s),m+=g+w,g=v}if(f)_=function(t,e){return(e?b:"")+t.join(" ")};else var _=function(t){return t.join(" ")};return p.map(_)};t.splitTextToSize=function(t,e,n){n||(n={});var r,i=n.fontSize||this.internal.getFontSize(),a=function(t){var e={0:1},n={};if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var r=this.internal.getFont(t.fontName,t.fontStyle);return r.metadata.Unicode?{widths:r.metadata.Unicode.widths||e,kerning:r.metadata.Unicode.kerning||n}:{widths:e,kerning:n}}.call(this,n);r=Array.isArray(t)?t:t.split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var c,l,u=[];for(c=0,l=r.length;c<l;c++)u=u.concat(o(r[c],s,a));return u}}(e.API),function(t){var e=function(t){for(var e={},n=0;n<"klmnopqrstuvwxyz".length;n++)e["klmnopqrstuvwxyz"[n]]="0123456789abcdef"[n];var r,i,o,a,s={},c=1,l=s,u=[],h="",f="",d=t.length-1;for(n=1;n!=d;)a=t[n],n+=1,"'"==a?r?(o=r.join(""),r=void 0):r=[]:r?r.push(a):"{"==a?(u.push([l,o]),l={},o=void 0):"}"==a?((i=u.pop())[0][i[1]]=l,o=void 0,l=i[0]):"-"==a?c=-1:void 0===o?e.hasOwnProperty(a)?(h+=e[a],o=parseInt(h,16)*c,c=1,h=""):h+=a:e.hasOwnProperty(a)?(f+=e[a],l[o]=parseInt(f,16)*c,c=1,o=void 0,f=""):f+=a;return s},n={codePages:["WinAnsiEncoding"],WinAnsiEncoding:e("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},r={Unicode:{Courier:n,"Courier-Bold":n,"Courier-BoldOblique":n,"Courier-Oblique":n,Helvetica:n,"Helvetica-Bold":n,"Helvetica-BoldOblique":n,"Helvetica-Oblique":n,"Times-Roman":n,"Times-Bold":n,"Times-BoldItalic":n,"Times-Italic":n}},i={Unicode:{"Courier-Oblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":e("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":e("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":e("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":e("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":e("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":e("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":e("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e,n,o;(e=i.Unicode[t.PostScriptName])&&((n=t.metadata.Unicode?t.metadata.Unicode:t.metadata.Unicode={}).widths=e.widths,n.kerning=e.kerning),(o=r.Unicode[t.PostScriptName])&&((n=t.metadata.Unicode?t.metadata.Unicode:t.metadata.Unicode={}).encoding=o,o.codePages&&o.codePages.length&&(t.encoding=o.codePages[0]))}])}(e.API),e.API.addSVG=function(t,e,n,r,i){function o(t,e){var n=e.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.createTextNode(t)),e.getElementsByTagName("head")[0].appendChild(n)}if(void 0===e||void 0===n)throw new Error("addSVG needs values for 'x' and 'y'");var a=function(t,e){var n=(e.contentWindow||e.contentDocument).document;return n.write(t),n.close(),n.getElementsByTagName("svg")[0]}(t,function(t){var e=t.createElement("iframe");return o(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",t),e.name="childframe",e.setAttribute("width",0),e.setAttribute("height",0),e.setAttribute("frameborder","0"),e.setAttribute("scrolling","no"),e.setAttribute("seamless","seamless"),e.setAttribute("class","jsPDF_sillysvg_iframe"),t.body.appendChild(e),e}(document)),s=[1,1],c=parseFloat(a.getAttribute("width")),l=parseFloat(a.getAttribute("height"));c&&l&&(r&&i?s=[r/c,i/l]:r?s=[r/c,r/c]:i&&(s=[i/l,i/l]));var u,h,f,d,p=a.childNodes;for(u=0,h=p.length;u<h;u++)(f=p[u]).tagName&&"PATH"===f.tagName.toUpperCase()&&((d=function(t){for(var e=parseFloat(t[1]),n=parseFloat(t[2]),r=[],i=3,o=t.length;i<o;)"c"===t[i]?(r.push([parseFloat(t[i+1]),parseFloat(t[i+2]),parseFloat(t[i+3]),parseFloat(t[i+4]),parseFloat(t[i+5]),parseFloat(t[i+6])]),i+=7):"l"===t[i]?(r.push([parseFloat(t[i+1]),parseFloat(t[i+2])]),i+=3):i+=1;return[e,n,r]}(f.getAttribute("d").split(" ")))[0]=d[0]*s[0]+e,d[1]=d[1]*s[1]+n,this.lines.call(this,d[2],d[0],d[1],s));return this},e.API.putTotalPages=function(t){for(var e=new RegExp(t,"g"),n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(e,this.internal.getNumberOfPages());return this},function(t){var n="",r="",i="";e.API.addMetadata=function(t,e){return r=e||"http://jspdf.default.namespaceuri/",n=t,this.internal.events.subscribe("postPutResources",function(){if(n){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+r+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(t)),a=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),l=o.length+a.length+s.length+e.length+c.length;i=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+l+" >>"),this.internal.write("stream"),this.internal.write(e+o+a+s+c),this.internal.write("endstream"),this.internal.write("endobj")}else i=""}),this.internal.events.subscribe("putCatalog",function(){i&&this.internal.write("/Metadata "+i+" 0 R")}),this}}(),function(t){if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},r=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},i=n.prototype,o=r.prototype,a=t.FileReaderSync,s=function(t){this.code=this[this.name=t]},c="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),l=c.length,u=t.URL||t.webkitURL||t,h=u.createObjectURL,f=u.revokeObjectURL,d=u,p=t.btoa,m=t.atob,g=t.ArrayBuffer,w=t.Uint8Array,y=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(r.fake=o.fake=!0;l--;)s.prototype[c[l]]=l+1;return u.createObjectURL||(d=t.URL=function(t){var e,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=t,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(e=t.match(y),n.origin=e&&e[1])),n}),d.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof r?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):p?e+";base64,"+p(t.data):e+","+encodeURIComponent(t.data)):h?h.call(u,t):void 0},d.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&f&&f.call(u,t)},i.append=function(t){var n=this.data;if(w&&(t instanceof g||t instanceof w)){for(var i="",o=new w(t),c=0,l=o.length;c<l;c++)i+=String.fromCharCode(o[c]);n.push(i)}else if("Blob"===e(t)||"File"===e(t)){if(!a)throw new s("NOT_READABLE_ERR");var u=new a;n.push(u.readAsBinaryString(t))}else t instanceof r?"base64"===t.encoding&&m?n.push(m(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!=typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},i.getBlob=function(t){return arguments.length||(t=null),new r(this.data.join(""),t,"raw")},i.toString=function(){return"[object BlobBuilder]"},o.slice=function(t,e,n){var i=arguments.length;return i<3&&(n=null),new r(this.data.slice(t,i>1?e:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(t);t.Blob=function(t,n){var r=n?n.type||"":"",i=new e;if(t)for(var o=0,a=t.length;o<a;o++)Uint8Array&&t[o]instanceof Uint8Array?i.append(t[o].buffer):i.append(t[o]);var s=i.getBlob(r);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=n(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content||void 0);var r=r||function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=function(){return t.URL||t.webkitURL||t},n=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,i=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},o=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c=function(t){setTimeout(function(){"string"==typeof t?e().revokeObjectURL(t):t.remove()},4e4)},l=function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){s(t)}}},u=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},h=function(s,h,f){f||(s=u(s));var d,p=this,m="application/octet-stream"===s.type,g=function(){l(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,r)return d=e().createObjectURL(s),void setTimeout(function(){n.href=d,n.download=h,i(n),g(),c(d),p.readyState=p.DONE});!function(){if((a||m&&o)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=a?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,p.readyState=p.DONE,g()},n.readAsDataURL(s),void(p.readyState=p.INIT)}d||(d=e().createObjectURL(s)),m?t.location.href=d:t.open(d,"_blank")||(t.location.href=d),p.readyState=p.DONE,g(),c(d)}()},f=h.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=u(t)),navigator.msSaveOrOpenBlob(t,e)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(t,e,n){return new h(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return r}),function(t,e){"object"==typeof module?module.exports=e():"function"==typeof define?define(e):t.adler32cs=e()}(e,function(){var t="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,e=null,n=function(){if(!t)return function(){return!1};try{var n={};"function"==typeof n.Buffer&&(e=n.Buffer)}catch(t){}return function(t){return t instanceof ArrayBuffer||null!==e&&t instanceof e}}(),r=null!==e?function(t){return new e(t,"utf8").toString("binary")}:function(t){return unescape(encodeURIComponent(t))},i=function(t,e){for(var n=65535&t,r=t>>>16,i=0,o=e.length;i<o;i++)r=(r+(n=(n+(255&e.charCodeAt(i)))%65521))%65521;return(r<<16|n)>>>0},o=function(t,e){
for(var n=65535&t,r=t>>>16,i=0,o=e.length;i<o;i++)r=(r+(n=(n+e[i])%65521))%65521;return(r<<16|n)>>>0},a={},s=a.Adler32=function(){var e=function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(t=null==t?1:+t))throw new Error("First arguments needs to be a finite number.");this.checksum=t>>>0},a=e.prototype={};return a.constructor=e,e.from=function(t){return t.prototype=a,t}(function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");this.checksum=i(1,t.toString())}),e.fromUtf8=function(t){return t.prototype=a,t}(function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(null==t)throw new Error("First argument needs to be a string.");var n=r(t.toString());this.checksum=i(1,n)}),t&&(e.fromBuffer=function(t){return t.prototype=a,t}(function(t){if(!(this instanceof e))throw new TypeError("Constructor cannot called be as a function.");if(!n(t))throw new Error("First argument needs to be ArrayBuffer.");var r=new Uint8Array(t);return this.checksum=o(1,r)})),a.update=function(t){if(null==t)throw new Error("First argument needs to be a string.");return t=t.toString(),this.checksum=i(this.checksum,t)},a.updateUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=r(t.toString());return this.checksum=i(this.checksum,e)},t&&(a.updateBuffer=function(t){if(!n(t))throw new Error("First argument needs to be ArrayBuffer.");var e=new Uint8Array(t);return this.checksum=o(this.checksum,e)}),a.clone=function(){return new s(this.checksum)},e}();return a.from=function(t){if(null==t)throw new Error("First argument needs to be a string.");return i(1,t.toString())},a.fromUtf8=function(t){if(null==t)throw new Error("First argument needs to be a string.");var e=r(t.toString());return i(1,e)},t&&(a.fromBuffer=function(t){if(!n(t))throw new Error("First argument need to be ArrayBuffer.");var e=new Uint8Array(t);return o(1,e)}),a});var i={};i._colorsTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},i.colorNameToHex=function(t){return t=t.toLowerCase(),void 0!==this._colorsTable[t]&&this._colorsTable[t]};var o=function(t){function e(){function t(t){var e,n,i,o,a,c,l=r.dyn_tree,u=r.stat_desc.static_tree,h=r.stat_desc.extra_bits,d=r.stat_desc.extra_base,p=r.stat_desc.max_length,m=0;for(o=0;o<=s;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,e=t.heap_max+1;e<f;e++)(o=l[2*l[2*(n=t.heap[e])+1]+1]+1)>p&&(o=p,m++),l[2*n+1]=o,n>r.max_code||(t.bl_count[o]++,a=0,n>=d&&(a=h[n-d]),c=l[2*n],t.opt_len+=c*(o+a),u&&(t.static_len+=c*(u[2*n+1]+a)));if(0!==m){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(o=p;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--e])>r.max_code||(l[2*i+1]!=o&&(t.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}}function e(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function n(t,n,r){var i,o,a,c=[],l=0;for(i=1;i<=s;i++)c[i]=l=l+r[i-1]<<1;for(o=0;o<=n;o++)0!==(a=t[2*o+1])&&(t[2*o]=e(c[a]++,a))}var r=this;r.build_tree=function(e){var i,o,a,s=r.dyn_tree,c=r.stat_desc.static_tree,l=r.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=f,i=0;i<l;i++)0!==s[2*i]?(e.heap[++e.heap_len]=u=i,e.depth[i]=0):s[2*i+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,c&&(e.static_len-=c[2*a+1]);for(r.max_code=u,i=Math.floor(e.heap_len/2);i>=1;i--)e.pqdownheap(s,i);a=l;do{i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],e.pqdownheap(s,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,s[2*a]=s[2*i]+s[2*o],e.depth[a]=Math.max(e.depth[i],e.depth[o])+1,s[2*i+1]=s[2*o+1]=a,e.heap[1]=a++,e.pqdownheap(s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],t(e),n(s,r.max_code,e.bl_count)}}function n(t,e,n,r,i){var o=this;o.static_tree=t,o.extra_bits=e,o.extra_base=n,o.elems=r,o.max_length=i}function r(t,e,n,r,i){var o=this;o.good_length=t,o.max_lazy=e,o.nice_length=n,o.max_chain=r,o.func=i}function i(t,e,n,r){var i=t[2*e],o=t[2*n];return i<o||i==o&&r[e]<=r[n]}function o(){function t(){var t;for(Pt=2*At,Et[Ft-1]=0,t=0;t<Ft-1;t++)Et[t]=0;Vt=z[Gt].max_lazy,Jt=z[Gt].good_length,Qt=z[Gt].nice_length,Xt=z[Gt].max_chain,Mt=0,Dt=0,Ht=0,zt=Wt=$-1,Lt=0,Ot=0}function r(){var t;for(t=0;t<h;t++)Kt[2*t]=0;for(t=0;t<c;t++)$t[2*t]=0;for(t=0;t<l;t++)Zt[2*t]=0;Kt[2*d]=1,te.opt_len=te.static_len=0,ae=ce=0}function o(){ee.dyn_tree=Kt,ee.stat_desc=n.static_l_desc,ne.dyn_tree=$t,ne.stat_desc=n.static_d_desc,re.dyn_tree=Zt,re.stat_desc=n.static_bl_desc,ue=0,he=0,le=8,r()}function a(t,e){var n,r,i=-1,o=t[1],a=0,s=7,c=4;for(0===o&&(s=138,c=3),t[2*(e+1)+1]=65535,n=0;n<=e;n++)r=o,o=t[2*(n+1)+1],++a<s&&r==o||(a<c?Zt[2*r]+=a:0!==r?(r!=i&&Zt[2*r]++,Zt[2*p]++):a<=10?Zt[2*m]++:Zt[2*g]++,a=0,i=r,0===o?(s=138,c=3):r==o?(s=6,c=3):(s=7,c=4))}function s(){var t;for(a(Kt,ee.max_code),a($t,ne.max_code),re.build_tree(te),t=l-1;t>=3&&0===Zt[2*e.bl_order[t]+1];t--);return te.opt_len+=3*(t+1)+5+5+4,t}function f(t){te.pending_buf[te.pending++]=t}function O(t){f(255&t),f(t>>>8&255)}function et(t){f(t>>8&255),f(255&t)}function nt(t,e){var n,r=e;he>w-r?(O(ue|=(n=t)<<he&65535),ue=n>>>w-he,he+=r-w):(ue|=t<<he&65535,he+=r)}function rt(t,e){var n=2*t;nt(65535&e[n],65535&e[n+1])}function it(t,e){var n,r,i=-1,o=t[1],a=0,s=7,c=4;for(0===o&&(s=138,c=3),n=0;n<=e;n++)if(r=o,o=t[2*(n+1)+1],!(++a<s&&r==o)){if(a<c)do{rt(r,Zt)}while(0!=--a);else 0!==r?(r!=i&&(rt(r,Zt),a--),rt(p,Zt),nt(a-3,2)):a<=10?(rt(m,Zt),nt(a-3,3)):(rt(g,Zt),nt(a-11,7));a=0,i=r,0===o?(s=138,c=3):r==o?(s=6,c=3):(s=7,c=4)}}function ot(t,n,r){var i;for(nt(t-257,5),nt(n-1,5),nt(r-4,4),i=0;i<r;i++)nt(Zt[2*e.bl_order[i]+1],3);it(Kt,t-1),it($t,n-1)}function at(){16==he?(O(ue),ue=0,he=0):he>=8&&(f(255&ue),ue>>>=8,he-=8)}function st(){nt(Q<<1,3),rt(d,n.static_ltree),at(),1+le+10-he<9&&(nt(Q<<1,3),rt(d,n.static_ltree),at()),le=7}function ct(t,n){var r,i,o;if(te.pending_buf[se+2*ae]=t>>>8&255,te.pending_buf[se+2*ae+1]=255&t,te.pending_buf[ie+ae]=255&n,ae++,0===t?Kt[2*n]++:(ce++,t--,Kt[2*(e._length_code[n]+u+1)]++,$t[2*e.d_code(t)]++),0==(8191&ae)&&Gt>2){for(r=8*ae,i=Mt-Dt,o=0;o<c;o++)r+=$t[2*o]*(5+e.extra_dbits[o]);if(r>>>=3,ce<Math.floor(ae/2)&&r<Math.floor(i/2))return!0}return ae==oe-1}function lt(t,n){var r,i,o,a,s=0;if(0!==ae)do{r=te.pending_buf[se+2*s]<<8&65280|255&te.pending_buf[se+2*s+1],i=255&te.pending_buf[ie+s],s++,0===r?rt(i,t):(rt((o=e._length_code[i])+u+1,t),0!==(a=e.extra_lbits[o])&&nt(i-=e.base_length[o],a),r--,rt(o=e.d_code(r),n),0!==(a=e.extra_dbits[o])&&nt(r-=e.base_dist[o],a))}while(s<ae);rt(d,t),le=t[2*d+1]}function ut(){he>8?O(ue):he>0&&f(255&ue),ue=0,he=0}function ht(t,e,n){ut(),le=8,n&&(O(e),O(~e)),te.pending_buf.set(Tt.subarray(t,t+e),te.pending),te.pending+=e}function ft(t,e,n){nt((J<<1)+(n?1:0),3),ht(t,e,!0)}function dt(t,e,i){var o,a,c=0;Gt>0?(ee.build_tree(te),ne.build_tree(te),c=s(),o=te.opt_len+3+7>>>3,(a=te.static_len+3+7>>>3)<=o&&(o=a)):o=a=e+5,e+4<=o&&-1!=t?ft(t,e,i):a==o?(nt((Q<<1)+(i?1:0),3),lt(n.static_ltree,n.static_dtree)):(nt((K<<1)+(i?1:0),3),ot(ee.max_code+1,ne.max_code+1,c+1),lt(Kt,$t)),r(),i&&ut()}function pt(t){dt(Dt>=0?Dt:-1,Mt-Dt,t),Dt=Mt,xt.flush_pending()}function mt(){var t,e,n,r;do{if(0==(r=Pt-Ht-Mt)&&0===Mt&&0===Ht)r=At;else if(-1==r)r--;else if(Mt>=At+At-tt){Tt.set(Tt.subarray(At,At+At),0),Ut-=At,Mt-=At,Dt-=At,n=t=Ft;do{e=65535&Et[--n],Et[n]=e>=At?e-At:0}while(0!=--t);n=t=At;do{e=65535&It[--n],It[n]=e>=At?e-At:0}while(0!=--t);r+=At}if(0===xt.avail_in)return;t=xt.read_buf(Tt,Mt+Ht,r),(Ht+=t)>=$&&(Ot=255&Tt[Mt],Ot=(Ot<<jt^255&Tt[Mt+1])&Rt)}while(Ht<tt&&0!==xt.avail_in)}function gt(t){var e,n=65535;for(n>_t-5&&(n=_t-5);;){if(Ht<=1){if(mt(),0===Ht&&t==k)return L;if(0===Ht)break}if(Mt+=Ht,Ht=0,e=Dt+n,(0===Mt||Mt>=e)&&(Ht=Mt-e,Mt=e,pt(!1),0===xt.avail_out))return L;if(Mt-Dt>=At-tt&&(pt(!1),0===xt.avail_out))return L}return pt(t==A),0===xt.avail_out?t==A?U:L:t==A?H:M}function wt(t){var e,n,r=Xt,i=Mt,o=Wt,a=Mt>At-tt?Mt-(At-tt):0,s=Qt,c=qt,l=Mt+Z,u=Tt[i+o-1],h=Tt[i+o];Wt>=Jt&&(r>>=2),s>Ht&&(s=Ht);do{if(e=t,Tt[e+o]==h&&Tt[e+o-1]==u&&Tt[e]==Tt[i]&&Tt[++e]==Tt[i+1]){i+=2,e++;do{}while(Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&Tt[++i]==Tt[++e]&&i<l);if(n=Z-(l-i),i=l-Z,n>o){if(Ut=t,o=n,n>=s)break;u=Tt[i+o-1],h=Tt[i+o]}}}while((t=65535&It[t&c])>a&&0!=--r);return o<=Ht?o:Ht}function yt(t){for(var e,n=0;;){if(Ht<tt){if(mt(),Ht<tt&&t==k)return L;if(0===Ht)break}if(Ht>=$&&(Ot=(Ot<<jt^255&Tt[Mt+($-1)])&Rt,n=65535&Et[Ot],It[Mt&qt]=Et[Ot],Et[Ot]=Mt),0!==n&&(Mt-n&65535)<=At-tt&&Yt!=b&&(zt=wt(n)),zt>=$)if(e=ct(Mt-Ut,zt-$),Ht-=zt,zt<=Vt&&Ht>=$){zt--;do{Ot=(Ot<<jt^255&Tt[++Mt+($-1)])&Rt,n=65535&Et[Ot],It[Mt&qt]=Et[Ot],Et[Ot]=Mt}while(0!=--zt);Mt++}else Mt+=zt,zt=0,Ot=255&Tt[Mt],Ot=(Ot<<jt^255&Tt[Mt+1])&Rt;else e=ct(0,255&Tt[Mt]),Ht--,Mt++;if(e&&(pt(!1),0===xt.avail_out))return L}return pt(t==A),0===xt.avail_out?t==A?U:L:t==A?H:M}function vt(t){for(var e,n,r=0;;){if(Ht<tt){if(mt(),Ht<tt&&t==k)return L;if(0===Ht)break}if(Ht>=$&&(Ot=(Ot<<jt^255&Tt[Mt+($-1)])&Rt,r=65535&Et[Ot],It[Mt&qt]=Et[Ot],Et[Ot]=Mt),Wt=zt,Nt=Ut,zt=$-1,0!==r&&Wt<Vt&&(Mt-r&65535)<=At-tt&&(Yt!=b&&(zt=wt(r)),zt<=5&&(Yt==v||zt==$&&Mt-Ut>4096)&&(zt=$-1)),Wt>=$&&zt<=Wt){n=Mt+Ht-$,e=ct(Mt-1-Nt,Wt-$),Ht-=Wt-1,Wt-=2;do{++Mt<=n&&(Ot=(Ot<<jt^255&Tt[Mt+($-1)])&Rt,r=65535&Et[Ot],It[Mt&qt]=Et[Ot],Et[Ot]=Mt)}while(0!=--Wt);if(Lt=0,zt=$-1,Mt++,e&&(pt(!1),0===xt.avail_out))return L}else if(0!==Lt){if((e=ct(0,255&Tt[Mt-1]))&&pt(!1),Mt++,Ht--,0===xt.avail_out)return L}else Lt=1,Mt++,Ht--}return 0!==Lt&&(e=ct(0,255&Tt[Mt-1]),Lt=0),pt(t==A),0===xt.avail_out?t==A?U:L:t==A?H:M}function bt(e){return e.total_in=e.total_out=0,e.msg=null,te.pending=0,te.pending_out=0,kt=V,Ct=k,o(),t(),S}var xt,kt,_t,Ct,At,St,qt,Tt,Pt,It,Et,Ot,Ft,Bt,Rt,jt,Dt,zt,Nt,Lt,Mt,Ut,Ht,Wt,Xt,Vt,Gt,Yt,Jt,Qt,Kt,$t,Zt,te=this,ee=new e,ne=new e,re=new e;te.depth=[];var ie,oe,ae,se,ce,le,ue,he;te.bl_count=[],te.heap=[],Kt=[],$t=[],Zt=[],te.pqdownheap=function(t,e){for(var n=te.heap,r=n[e],o=e<<1;o<=te.heap_len&&(o<te.heap_len&&i(t,n[o+1],n[o],te.depth)&&o++,!i(t,r,n[o],te.depth));)n[e]=n[o],e=o,o<<=1;n[e]=r},te.deflateInit=function(t,e,n,r,i,o){return r||(r=Y),i||(i=B),o||(o=x),t.msg=null,e==y&&(e=6),i<1||i>F||r!=Y||n<9||n>15||e<0||e>9||o<0||o>b?P:(t.dstate=te,St=n,At=1<<St,qt=At-1,Bt=i+7,Ft=1<<Bt,Rt=Ft-1,jt=Math.floor((Bt+$-1)/$),Tt=new Uint8Array(2*At),It=[],Et=[],oe=1<<i+6,te.pending_buf=new Uint8Array(4*oe),_t=4*oe,se=Math.floor(oe/2),ie=3*oe,Gt=e,Yt=o,bt(t))},te.deflateEnd=function(){return kt!=X&&kt!=V&&kt!=G?P:(te.pending_buf=null,Et=null,It=null,Tt=null,te.dstate=null,kt==V?I:S)},te.deflateParams=function(t,e,n){var r=S;return e==y&&(e=6),e<0||e>9||n<0||n>b?P:(z[Gt].func!=z[e].func&&0!==t.total_in&&(r=t.deflate(_)),Gt!=e&&(Vt=z[Gt=e].max_lazy,Jt=z[Gt].good_length,Qt=z[Gt].nice_length,Xt=z[Gt].max_chain),Yt=n,r)},te.deflateSetDictionary=function(t,e,n){var r,i=n,o=0;if(!e||kt!=X)return P;if(i<$)return S;for(i>At-tt&&(o=n-(i=At-tt)),Tt.set(e.subarray(o,o+i),0),Mt=i,Dt=i,Ot=255&Tt[0],Ot=(Ot<<jt^255&Tt[1])&Rt,r=0;r<=i-$;r++)Ot=(Ot<<jt^255&Tt[r+($-1)])&Rt,It[r&qt]=Et[Ot],Et[Ot]=r;return S},te.deflate=function(t,e){var n,r,i,o,a;if(e>A||e<0)return P;if(!t.next_out||!t.next_in&&0!==t.avail_in||kt==G&&e!=A)return t.msg=N[T-P],P;if(0===t.avail_out)return t.msg=N[T-E],E;if(xt=t,o=Ct,Ct=e,kt==X&&(r=Y+(St-8<<4)<<8,(i=(Gt-1&255)>>1)>3&&(i=3),r|=i<<6,0!==Mt&&(r|=W),kt=V,et(r+=31-r%31)),0!==te.pending){if(xt.flush_pending(),0===xt.avail_out)return Ct=-1,S}else if(0===xt.avail_in&&e<=o&&e!=A)return xt.msg=N[T-E],E;if(kt==G&&0!==xt.avail_in)return t.msg=N[T-E],E;if(0!==xt.avail_in||0!==Ht||e!=k&&kt!=G){switch(a=-1,z[Gt].func){case R:a=gt(e);break;case j:a=yt(e);break;case D:a=vt(e)}if(a!=U&&a!=H||(kt=G),a==L||a==U)return 0===xt.avail_out&&(Ct=-1),S;if(a==M){if(e==_)st();else if(ft(0,0,!1),e==C)for(n=0;n<Ft;n++)Et[n]=0;if(xt.flush_pending(),0===xt.avail_out)return Ct=-1,S}}return e!=A?S:q}}function a(){var t=this;t.next_in_index=0,t.next_out_index=0,t.avail_in=0,t.total_in=0,t.avail_out=0,t.total_out=0}var s=15,c=30,l=19,u=256,h=u+1+29,f=2*h+1,d=256,p=16,m=17,g=18,w=16,y=-1,v=1,b=2,x=0,k=0,_=1,C=3,A=4,S=0,q=1,T=2,P=-2,I=-3,E=-5,O=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];e._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],e.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],e.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],e.d_code=function(t){return t<256?O[t]:O[256+(t>>>7)]},e.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],e.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],e.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],e.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],n.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],n.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],n.static_l_desc=new n(n.static_ltree,e.extra_lbits,u+1,h,s),n.static_d_desc=new n(n.static_dtree,e.extra_dbits,0,c,s),n.static_bl_desc=new n(null,e.extra_blbits,0,l,7);var F=9,B=8,R=0,j=1,D=2,z=[new r(0,0,0,0,R),new r(4,4,8,4,j),new r(4,5,16,8,j),new r(4,6,32,32,j),new r(4,4,16,16,D),new r(8,16,32,32,D),new r(8,16,128,128,D),new r(8,32,128,256,D),new r(32,128,258,1024,D),new r(32,258,258,4096,D)],N=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],L=0,M=1,U=2,H=3,W=32,X=42,V=113,G=666,Y=8,J=0,Q=1,K=2,$=3,Z=258,tt=Z+$+1;return a.prototype={deflateInit:function(t,e){var n=this;return n.dstate=new o,e||(e=s),n.dstate.deflateInit(n,t,e)},deflate:function(t){var e=this;return e.dstate?e.dstate.deflate(e,t):P},deflateEnd:function(){var t=this;if(!t.dstate)return P;var e=t.dstate.deflateEnd();return t.dstate=null,e},deflateParams:function(t,e){var n=this;return n.dstate?n.dstate.deflateParams(n,t,e):P},deflateSetDictionary:function(t,e){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,t,e):P},read_buf:function(t,e,n){var r=this,i=r.avail_in;return i>n&&(i=n),0===i?0:(r.avail_in-=i,t.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),e),r.next_in_index+=i,r.total_in+=i,i)},flush_pending:function(){var t=this,e=t.dstate.pending;e>t.avail_out&&(e=t.avail_out),0!==e&&(t.next_out.set(t.dstate.pending_buf.subarray(t.dstate.pending_out,t.dstate.pending_out+e),t.next_out_index),t.next_out_index+=e,t.dstate.pending_out+=e,t.total_out+=e,t.avail_out-=e,t.dstate.pending-=e,0===t.dstate.pending&&(t.dstate.pending_out=0))}},function(t){var e=this,n=new a,r=k,i=new Uint8Array(512);void 0===t&&(t=y),n.deflateInit(t),n.next_out=i,e.append=function(t,e){var o,a=[],s=0,c=0,l=0;if(t.length){n.next_in_index=0,n.next_in=t,n.avail_in=t.length;do{if(n.next_out_index=0,n.avail_out=512,n.deflate(r)!=S)throw"deflating: "+n.msg;n.next_out_index&&(512==n.next_out_index?a.push(new Uint8Array(i)):a.push(new Uint8Array(i.subarray(0,n.next_out_index)))),l+=n.next_out_index,e&&n.next_in_index>0&&n.next_in_index!=s&&(e(n.next_in_index),s=n.next_in_index)}while(n.avail_in>0||0===n.avail_out);return o=new Uint8Array(l),a.forEach(function(t){o.set(t,c),c+=t.length}),o}},e.flush=function(){var t,e,r=[],o=0,a=0;do{if(n.next_out_index=0,n.avail_out=512,(t=n.deflate(A))!=q&&t!=S)throw"deflating: "+n.msg;512-n.avail_out>0&&r.push(new Uint8Array(i.subarray(0,n.next_out_index))),a+=n.next_out_index}while(n.avail_in>0||0===n.avail_out);return n.deflateEnd(),e=new Uint8Array(a),r.forEach(function(t){e.set(t,o),o+=t.length}),e}}}();!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.html2canvas=t()}}(function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){(function(t){!function(r){function i(t){throw RangeError(E[t])}function o(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function a(t,e){return o(t.split(I),e).join(".")}function s(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function c(t){return o(t,function(t){var e="";return t>65535&&(e+=B((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=B(t)}).join("")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:b}function u(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function h(t,e,n){var r=0;for(t=n?F(t/C):t>>1,t+=F(t/e);t>O*k>>1;r+=b)t=F(t/O);return F(r+(O+1)*t/(t+_))}function f(t){var e,n,r,o,a,s,u,f,d,p,m=[],g=t.length,w=0,y=S,_=A;for((n=t.lastIndexOf(q))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&i("not-basic"),m.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<g;){for(a=w,s=1,u=b;o>=g&&i("invalid-input"),((f=l(t.charCodeAt(o++)))>=b||f>F((v-w)/s))&&i("overflow"),w+=f*s,d=u<=_?x:u>=_+k?k:u-_,!(f<d);u+=b)s>F(v/(p=b-d))&&i("overflow"),s*=p;_=h(w-a,e=m.length+1,0==a),F(w/e)>v-y&&i("overflow"),y+=F(w/e),w%=e,m.splice(w++,0,y)}return c(m)}function d(t){var e,n,r,o,a,c,l,f,d,p,m,g,w,y,_,C=[];for(g=(t=s(t)).length,e=S,n=0,a=A,c=0;c<g;++c)(m=t[c])<128&&C.push(B(m));for(r=o=C.length,o&&C.push(q);r<g;){for(l=v,c=0;c<g;++c)(m=t[c])>=e&&m<l&&(l=m);for(l-e>F((v-n)/(w=r+1))&&i("overflow"),n+=(l-e)*w,e=l,c=0;c<g;++c)if((m=t[c])<e&&++n>v&&i("overflow"),m==e){for(f=n,d=b;p=d<=a?x:d>=a+k?k:d-a,!(f<p);d+=b)_=f-p,y=b-p,C.push(B(u(p+_%y,0))),f=F(_/y);C.push(B(u(f,0))),a=h(n,w,r==o),n=0,++r}++n,++e}return C.join("")}var p="object"==typeof n&&n,m="object"==typeof e&&e&&e.exports==p&&e,g="object"==typeof t&&t;g.global!==g&&g.window!==g||(r=g);var w,y,v=2147483647,b=36,x=1,k=26,_=38,C=700,A=72,S=128,q="-",T=/^xn--/,P=/[^ -~]/,I=/\x2E|\u3002|\uFF0E|\uFF61/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=b-x,F=Math.floor,B=String.fromCharCode;if(w={version:"1.2.4",ucs2:{decode:s,encode:c},decode:f,encode:d,toASCII:function(t){return a(t,function(t){return P.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return a(t,function(t){return T.test(t)?f(t.slice(4).toLowerCase()):t})}},p&&!p.nodeType)if(m)m.exports=w;else for(y in w)w.hasOwnProperty(y)&&(p[y]=w[y]);else r.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){function r(t,e,n){!t.defaultView||e===t.defaultView.pageXOffset&&n===t.defaultView.pageYOffset||t.defaultView.scrollTo(e,n)}function i(t,e){try{e&&(e.width=t.width,e.height=t.height,e.getContext("2d").putImageData(t.getContext("2d").getImageData(0,0,t.width,t.height),0,0))}catch(e){s("Unable to copy canvas content from",t,e)}}function o(t,e){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),r=t.firstChild;r;)!0!==e&&1===r.nodeType&&"SCRIPT"===r.nodeName||n.appendChild(o(r,e)),r=r.nextSibling;return 1===t.nodeType&&(n._scrollTop=t.scrollTop,n._scrollLeft=t.scrollLeft,"CANVAS"===t.nodeName?i(t,n):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value)),n}function a(t){if(1===t.nodeType){t.scrollTop=t._scrollTop,t.scrollLeft=t._scrollLeft;for(var e=t.firstChild;e;)a(e),e=e.nextSibling}}var s=t("./log");e.exports=function(t,e,n,i,s,c,l){var u=o(t.documentElement,s.javascriptEnabled),h=e.createElement("iframe");return h.className="html2canvas-container",h.style.visibility="hidden",h.style.position="fixed",h.style.left="-10000px",h.style.top="0px",h.style.border="0",h.width=n,h.height=i,h.scrolling="no",e.body.appendChild(h),new Promise(function(e){var n=h.contentWindow.document;h.contentWindow.onload=h.onload=function(){var t=setInterval(function(){n.body.childNodes.length>0&&(a(n.documentElement),clearInterval(t),"view"===s.type&&(h.contentWindow.scrollTo(c,l),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||h.contentWindow.scrollY===l&&h.contentWindow.scrollX===c||(n.documentElement.style.top=-l+"px",n.documentElement.style.left=-c+"px",n.documentElement.style.position="absolute")),e(h))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),r(t,c,l),n.replaceChild(n.adoptNode(u),n.documentElement),n.close()})}},{"./log":13}],3:[function(t,e,n){function r(t){this.r=0,this.g=0,this.b=0,this.a=null,this.fromArray(t)||this.namedColor(t)||this.rgb(t)||this.rgba(t)||this.hex6(t)||this.hex3(t)}r.prototype.darken=function(t){var e=1-t;return new r([Math.round(this.r*e),Math.round(this.g*e),Math.round(this.b*e),this.a])},r.prototype.isTransparent=function(){return 0===this.a},r.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},r.prototype.fromArray=function(t){return Array.isArray(t)&&(this.r=Math.min(t[0],255),this.g=Math.min(t[1],255),this.b=Math.min(t[2],255),t.length>3&&(this.a=t[3])),Array.isArray(t)};var i=/^#([a-f0-9]{3})$/i;r.prototype.hex3=function(t){var e=null;return null!==(e=t.match(i))&&(this.r=parseInt(e[1][0]+e[1][0],16),this.g=parseInt(e[1][1]+e[1][1],16),this.b=parseInt(e[1][2]+e[1][2],16)),null!==e};var o=/^#([a-f0-9]{6})$/i;r.prototype.hex6=function(t){var e=null;return null!==(e=t.match(o))&&(this.r=parseInt(e[1].substring(0,2),16),this.g=parseInt(e[1].substring(2,4),16),this.b=parseInt(e[1].substring(4,6),16)),null!==e};var a=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;r.prototype.rgb=function(t){var e=null;return null!==(e=t.match(a))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3])),null!==e};var s=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;r.prototype.rgba=function(t){var e=null;return null!==(e=t.match(s))&&(this.r=Number(e[1]),this.g=Number(e[2]),this.b=Number(e[3]),this.a=Number(e[4])),null!==e},r.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},r.prototype.namedColor=function(t){t=t.toLowerCase();var e=c[t];if(e)this.r=e[0],this.g=e[1],this.b=e[2];else if("transparent"===t)return this.r=this.g=this.b=this.a=0,!0;return!!e},r.prototype.isColor=!0;var c={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],
purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=r},{}],4:[function(t,e,n){function r(t,e){var n=k++;if((e=e||{}).logging&&(g.options.logging=!0,g.options.start=Date.now()),e.async=void 0===e.async||e.async,e.allowTaint=void 0!==e.allowTaint&&e.allowTaint,e.removeContainer=void 0===e.removeContainer||e.removeContainer,e.javascriptEnabled=void 0!==e.javascriptEnabled&&e.javascriptEnabled,e.imageTimeout=void 0===e.imageTimeout?1e4:e.imageTimeout,e.renderer="function"==typeof e.renderer?e.renderer:f,e.strict=!!e.strict,"string"==typeof t){if("string"!=typeof e.proxy)return Promise.reject("Proxy must be used when rendering url");var r=null!=e.width?e.width:window.innerWidth,a=null!=e.height?e.height:window.innerHeight;return v(u(t),e.proxy,document,r,a,e).then(function(t){return o(t.contentWindow.document.documentElement,t,e,r,a)})}var s=(void 0===t?[document.documentElement]:t.length?t:[t])[0];return s.setAttribute(x+n,n),i(s.ownerDocument,e,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,n).then(function(t){return"function"==typeof e.onrendered&&(g("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),e.onrendered(t)),t})}function i(t,e,n,r,i){return y(t,t,n,r,e,t.defaultView.pageXOffset,t.defaultView.pageYOffset).then(function(a){g("Document cloned");var s=x+i,c="["+s+"='"+i+"']";t.querySelector(c).removeAttribute(s);var l=a.contentWindow,u=l.document.querySelector(c);return("function"==typeof e.onclone?Promise.resolve(e.onclone(l.document)):Promise.resolve(!0)).then(function(){return o(u,a,e,n,r)})})}function o(t,e,n,r,i){var o=e.contentWindow,u=new h(o.document),f=new d(n,u),m=b(t),w="view"===n.type?r:c(o.document),y="view"===n.type?i:l(o.document),v=new n.renderer(w,y,f,n,document);return new p(t,v,u,f,n).ready.then(function(){g("Finished rendering");var r;return r="view"===n.type?s(v.canvas,{width:v.canvas.width,height:v.canvas.height,top:0,left:0,x:0,y:0}):t===o.document.body||t===o.document.documentElement||null!=n.canvas?v.canvas:s(v.canvas,{width:null!=n.width?n.width:m.width,height:null!=n.height?n.height:m.height,top:m.top,left:m.left,x:0,y:0}),a(e,n),r})}function a(t,e){e.removeContainer&&(t.parentNode.removeChild(t),g("Cleaned up container"))}function s(t,e){var n=document.createElement("canvas"),r=Math.min(t.width-1,Math.max(0,e.left)),i=Math.min(t.width,Math.max(1,e.left+e.width)),o=Math.min(t.height-1,Math.max(0,e.top)),a=Math.min(t.height,Math.max(1,e.top+e.height));n.width=e.width,n.height=e.height;var s=i-r,c=a-o;return g("Cropping canvas at:","left:",e.left,"top:",e.top,"width:",s,"height:",c),g("Resulting crop with width",e.width,"and height",e.height,"with x",r,"and y",o),n.getContext("2d").drawImage(t,r,o,s,c,e.x,e.y,s,c),n}function c(t){return Math.max(Math.max(t.body.scrollWidth,t.documentElement.scrollWidth),Math.max(t.body.offsetWidth,t.documentElement.offsetWidth),Math.max(t.body.clientWidth,t.documentElement.clientWidth))}function l(t){return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))}function u(t){var e=document.createElement("a");return e.href=t,e.href=e.href,e}var h=t("./support"),f=t("./renderers/canvas"),d=t("./imageloader"),p=t("./nodeparser"),m=t("./nodecontainer"),g=t("./log"),w=t("./utils"),y=t("./clone"),v=t("./proxy").loadUrlDocument,b=w.getBounds,x="data-html2canvas-node",k=0;r.CanvasRenderer=f,r.NodeContainer=m,r.log=g,r.utils=w;var _="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:r;e.exports=_},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(t,e,n){function r(t){if(this.src=t,i("DummyImageContainer for",t),!this.promise||!this.image){i("Initiating DummyImageContainer"),r.prototype.image=new Image;var e=this.image;r.prototype.promise=new Promise(function(t,n){e.onload=t,e.onerror=n,e.src=o(),!0===e.complete&&t(e)})}}var i=t("./log"),o=t("./utils").smallImage;e.exports=r},{"./log":13,"./utils":26}],6:[function(t,e,n){var r=t("./utils").smallImage;e.exports=function(t,e){var n,i,o=document.createElement("div"),a=document.createElement("img"),s=document.createElement("span");o.style.visibility="hidden",o.style.fontFamily=t,o.style.fontSize=e,o.style.margin=0,o.style.padding=0,document.body.appendChild(o),a.src=r(),a.width=1,a.height=1,a.style.margin=0,a.style.padding=0,a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=e,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode("Hidden Text")),o.appendChild(s),o.appendChild(a),n=a.offsetTop-s.offsetTop+1,o.removeChild(s),o.appendChild(document.createTextNode("Hidden Text")),o.style.lineHeight="normal",a.style.verticalAlign="super",i=a.offsetTop-o.offsetTop+1,document.body.removeChild(o),this.baseline=n,this.lineWidth=1,this.middle=i}},{"./utils":26}],7:[function(t,e,n){function r(){this.data={}}var i=t("./font");r.prototype.getMetrics=function(t,e){return void 0===this.data[t+"-"+e]&&(this.data[t+"-"+e]=new i(t,e)),this.data[t+"-"+e]},e.exports=r},{"./font":6}],8:[function(t,e,n){function r(e,n,r){this.image=null,this.src=e;var o=this,a=i(e);this.promise=(n?new Promise(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(r.proxy,a,r)).then(function(e){return t("./core")(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:r.proxy,javascriptEnabled:r.javascriptEnabled,removeContainer:r.removeContainer,allowTaint:r.allowTaint,imageTimeout:r.imageTimeout/2})}).then(function(t){return o.image=t})}var i=t("./utils").getBounds,o=t("./proxy").loadUrlDocument;r.prototype.proxyLoad=function(t,e,n){var r=this.src;return o(r.src,t,r.ownerDocument,e.width,e.height,n)},e.exports=r},{"./core":4,"./proxy":16,"./utils":26}],9:[function(t,e,n){function r(t){this.src=t.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}r.TYPES={LINEAR:1,RADIAL:2},r.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=r},{}],10:[function(t,e,n){e.exports=function(t,e){this.src=t,this.image=new Image;var n=this;this.tainted=null,this.promise=new Promise(function(r,i){n.image.onload=r,n.image.onerror=i,e&&(n.image.crossOrigin="anonymous"),n.image.src=t,!0===n.image.complete&&r(n.image)})}},{}],11:[function(t,e,n){function r(t,e){this.link=null,this.options=t,this.support=e,this.origin=this.getOrigin(window.location.href)}var i=t("./log"),o=t("./imagecontainer"),a=t("./dummyimagecontainer"),s=t("./proxyimagecontainer"),c=t("./framecontainer"),l=t("./svgcontainer"),u=t("./svgnodecontainer"),h=t("./lineargradientcontainer"),f=t("./webkitgradientcontainer"),d=t("./utils").bind;r.prototype.findImages=function(t){var e=[];return t.reduce(function(t,e){switch(e.node.nodeName){case"IMG":return t.concat([{args:[e.node.src],method:"url"}]);case"svg":case"IFRAME":return t.concat([{args:[e.node],method:e.node.nodeName}])}return t},[]).forEach(this.addImage(e,this.loadImage),this),e},r.prototype.findBackgroundImage=function(t,e){return e.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(t,this.loadImage),this),t},r.prototype.addImage=function(t,e){return function(n){n.args.forEach(function(r){this.imageExists(t,r)||(t.splice(0,0,e.call(this,n)),i("Added image #"+t.length,"string"==typeof r?r.substring(0,100):r))},this)}},r.prototype.hasImageBackground=function(t){return"none"!==t.method},r.prototype.loadImage=function(t){if("url"===t.method){var e=t.args[0];return!this.isSVG(e)||this.support.svg||this.options.allowTaint?e.match(/data:image\/.*;base64,/i)?new o(e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(e)||!0===this.options.allowTaint||this.isSVG(e)?new o(e,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new o(e,!0):this.options.proxy?new s(e,this.options.proxy):new a(e):new l(e)}return"linear-gradient"===t.method?new h(t):"gradient"===t.method?new f(t):"svg"===t.method?new u(t.args[0],this.support.svg):"IFRAME"===t.method?new c(t.args[0],this.isSameOrigin(t.args[0].src),this.options):new a(t)},r.prototype.isSVG=function(t){return"svg"===t.substring(t.length-3).toLowerCase()||l.prototype.isInline(t)},r.prototype.imageExists=function(t,e){return t.some(function(t){return t.src===e})},r.prototype.isSameOrigin=function(t){return this.getOrigin(t)===this.origin},r.prototype.getOrigin=function(t){var e=this.link||(this.link=document.createElement("a"));return e.href=t,e.href=e.href,e.protocol+e.hostname+e.port},r.prototype.getPromise=function(t){return this.timeout(t,this.options.imageTimeout).catch(function(){return new a(t.src).promise.then(function(e){t.image=e})})},r.prototype.get=function(t){var e=null;return this.images.some(function(n){return(e=n).src===t})?e:null},r.prototype.fetch=function(t){return this.images=t.reduce(d(this.findBackgroundImage,this),this.findImages(t)),this.images.forEach(function(t,e){t.promise.then(function(){i("Succesfully loaded image #"+(e+1),t)},function(n){i("Failed loading image #"+(e+1),t,n)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),i("Finished searching images"),this},r.prototype.timeout=function(t,e){var n,r=Promise.race([t.promise,new Promise(function(r,o){n=setTimeout(function(){i("Timed out loading image",t),o(t)},e)})]).then(function(t){return clearTimeout(n),t});return r.catch(function(){clearTimeout(n)}),r},e.exports=r},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(t,e,n){function r(t){i.apply(this,arguments),this.type=i.TYPES.LINEAR;var e=r.REGEXP_DIRECTION.test(t.args[0])||!i.REGEXP_COLORSTOP.test(t.args[0]);e?t.args[0].split(/\s+/).reverse().forEach(function(t,e){switch(t){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,r=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=r,this.y1=n;break;case"center":break;default:var i=.01*parseFloat(t,10);if(isNaN(i))break;0===e?(this.y0=i,this.y1=1-this.y0):(this.x0=i,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=t.args.slice(e?1:0).map(function(t){var e=t.match(i.REGEXP_COLORSTOP),n=+e[2],r=0===n?"%":e[3];return{color:new o(e[1]),stop:"%"===r?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(t,e){null===t.stop&&this.colorStops.slice(e).some(function(n,r){return null!==n.stop&&(t.stop=(n.stop-this.colorStops[e-1].stop)/(r+1)+this.colorStops[e-1].stop,!0)},this)},this)}var i=t("./gradientcontainer"),o=t("./color");r.prototype=Object.create(i.prototype),r.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=r},{"./color":3,"./gradientcontainer":9}],13:[function(t,e,n){var r=function(){r.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-r.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};r.options={logging:!1},e.exports=r},{}],14:[function(t,e,n){function r(t,e){this.node=t,this.parent=e,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function i(t){var e=t.options[t.selectedIndex||0];return e?e.text||"":""}function o(t){if(t&&"matrix"===t[1])return t[2].split(",").map(function(t){return parseFloat(t.trim())});if(t&&"matrix3d"===t[1]){var e=t[2].split(",").map(function(t){return parseFloat(t.trim())});return[e[0],e[1],e[4],e[5],e[12],e[13]]}}function a(t){return-1!==t.toString().indexOf("%")}function s(t){return t.replace("px","")}function c(t){return parseFloat(t)}var l=t("./color"),u=t("./utils"),h=u.getBounds,f=u.parseBackgrounds,d=u.offsetBounds;r.prototype.cloneTo=function(t){t.visible=this.visible,t.borders=this.borders,t.bounds=this.bounds,t.clip=this.clip,t.backgroundClip=this.backgroundClip,t.computedStyles=this.computedStyles,t.styles=this.styles,t.backgroundImages=this.backgroundImages,t.opacity=this.opacity},r.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},r.prototype.assignStack=function(t){this.stack=t,t.children.push(this)},r.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},r.prototype.css=function(t){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[t]||(this.styles[t]=this.computedStyles[t])},r.prototype.prefixedCss=function(t){var e=["webkit","moz","ms","o"],n=this.css(t);return void 0===n&&e.some(function(e){return void 0!==(n=this.css(e+t.substr(0,1).toUpperCase()+t.substr(1)))},this),void 0===n?null:n},r.prototype.computedStyle=function(t){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,t)},r.prototype.cssInt=function(t){var e=parseInt(this.css(t),10);return isNaN(e)?0:e},r.prototype.color=function(t){return this.colors[t]||(this.colors[t]=new l(this.css(t)))},r.prototype.cssFloat=function(t){var e=parseFloat(this.css(t));return isNaN(e)?0:e},r.prototype.fontWeight=function(){var t=this.css("fontWeight");switch(parseInt(t,10)){case 401:t="bold";break;case 400:t="normal"}return t},r.prototype.parseClip=function(){var t=this.css("clip").match(this.CLIP);return t?{top:parseInt(t[1],10),right:parseInt(t[2],10),bottom:parseInt(t[3],10),left:parseInt(t[4],10)}:null},r.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=f(this.css("backgroundImage")))},r.prototype.cssList=function(t,e){var n=(this.css(t)||"").split(",");return n=n[e||0]||n[0]||"auto",1===(n=n.trim().split(" ")).length&&(n=[n[0],a(n[0])?"auto":n[0]]),n},r.prototype.parseBackgroundSize=function(t,e,n){var r,i,o=this.cssList("backgroundSize",n);if(a(o[0]))r=t.width*parseFloat(o[0])/100;else{if(/contain|cover/.test(o[0])){var s=t.width/t.height,c=e.width/e.height;return s<c^"contain"===o[0]?{width:t.height*c,height:t.height}:{width:t.width,height:t.width/c}}r=parseInt(o[0],10)}return i="auto"===o[0]&&"auto"===o[1]?e.height:"auto"===o[1]?r/e.width*e.height:a(o[1])?t.height*parseFloat(o[1])/100:parseInt(o[1],10),"auto"===o[0]&&(r=i/e.height*e.width),{width:r,height:i}},r.prototype.parseBackgroundPosition=function(t,e,n,r){var i,o,s=this.cssList("backgroundPosition",n);return i=a(s[0])?(t.width-(r||e).width)*(parseFloat(s[0])/100):parseInt(s[0],10),o="auto"===s[1]?i/e.width*e.height:a(s[1])?(t.height-(r||e).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(i=o/e.height*e.width),{left:i,top:o}},r.prototype.parseBackgroundRepeat=function(t){return this.cssList("backgroundRepeat",t)[0]},r.prototype.parseTextShadows=function(){var t=this.css("textShadow"),e=[];if(t&&"none"!==t)for(var n=t.match(this.TEXT_SHADOW_PROPERTY),r=0;n&&r<n.length;r++){var i=n[r].match(this.TEXT_SHADOW_VALUES);e.push({color:new l(i[0]),offsetX:i[1]?parseFloat(i[1].replace("px","")):0,offsetY:i[2]?parseFloat(i[2].replace("px","")):0,blur:i[3]?i[3].replace("px",""):0})}return e},r.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var t=this.parseBounds(),e=this.prefixedCss("transformOrigin").split(" ").map(s).map(c);e[0]+=t.left,e[1]+=t.top,this.transformData={origin:e,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},r.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var t=this.prefixedCss("transform"),e=t?o(t.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=e||[1,0,0,1,0,0]}return this.transformMatrix},r.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?d(this.node):h(this.node))},r.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},r.prototype.getValue=function(){var t=this.node.value||"";return"SELECT"===this.node.tagName?t=i(this.node):"password"===this.node.type&&(t=Array(t.length+1).join("•")),0===t.length?this.node.placeholder||"":t},r.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,r.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,r.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,r.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=r},{"./color":3,"./utils":26}],15:[function(t,e,n){function r(t,e,n,r,i){L("Starting NodeParser"),this.renderer=e,this.options=i,this.range=null,this.support=n,this.renderQueue=[],this.stack=new G(!0,1,t.ownerDocument,null);var o=new U(t,null);if(i.background&&e.rectangle(0,0,e.width,e.height,new V(i.background)),t===t.ownerDocument.documentElement){var a=new U(o.color("backgroundColor").isTransparent()?t.ownerDocument.body:t.ownerDocument.documentElement,null);e.rectangle(0,0,e.width,e.height,a.color("backgroundColor"))}o.visibile=o.isElementVisible(),this.createPseudoHideStyles(t.ownerDocument),this.disableAnimations(t.ownerDocument),this.nodes=R([o].concat(this.getChildren(o)).filter(function(t){return t.visible=t.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new X,L("Fetched nodes, total:",this.nodes.length),L("Calculate overflow clips"),this.calculateOverflowClips(),L("Start fetching images"),this.images=r.fetch(this.nodes.filter(q)),this.ready=this.images.ready.then(J(function(){return L("Images loaded, starting parsing"),L("Creating stacking contexts"),this.createStackingContexts(),L("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),L("Render queue created with "+this.renderQueue.length+" items"),new Promise(J(function(t){i.async?"function"==typeof i.async?i.async.call(this,this.renderQueue,t):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,t)):t():(this.renderQueue.forEach(this.paint,this),t())},this))},this))}function i(t){return t.parent&&t.parent.clip.length}function o(t){return t.replace(/(\-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function a(){}function s(t,e,n,r){return t.map(function(i,o){if(i.width>0){var a=e.left,s=e.top,c=e.width,l=e.height-t[2].width;switch(o){case 0:l=t[0].width,i.args=h({c1:[a,s],c2:[a+c,s],c3:[a+c-t[1].width,s+l],c4:[a+t[3].width,s+l]},r[0],r[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:a=e.left+e.width-t[1].width,c=t[1].width,i.args=h({c1:[a+c,s],c2:[a+c,s+l+t[2].width],c3:[a,s+l],c4:[a,s+t[0].width]},r[1],r[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:s=s+e.height-t[2].width,l=t[2].width,i.args=h({c1:[a+c,s+l],c2:[a,s+l],c3:[a+t[3].width,s],c4:[a+c-t[3].width,s]},r[2],r[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:c=t[3].width,i.args=h({c1:[a,s+l+t[2].width],c2:[a,s],c3:[a+c,s+t[0].width],c4:[a+c,s+l]},r[3],r[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return i})}function c(t,e,n,r){var i=(Math.sqrt(2)-1)/3*4,o=n*i,a=r*i,s=t+n,c=e+r;return{topLeft:u({x:t,y:c},{x:t,y:c-a},{x:s-o,y:e},{x:s,y:e}),topRight:u({x:t,y:e},{x:t+o,y:e},{x:s,y:c-a},{x:s,y:c}),bottomRight:u({x:s,y:e},{x:s,y:e+a},{x:t+o,y:c},{x:t,y:c}),bottomLeft:u({x:s,y:c},{x:s-o,y:c},{x:t,y:e+a},{x:t,y:e})}}function l(t,e,n){var r=t.left,i=t.top,o=t.width,a=t.height,s=e[0][0]<o/2?e[0][0]:o/2,l=e[0][1]<a/2?e[0][1]:a/2,u=e[1][0]<o/2?e[1][0]:o/2,h=e[1][1]<a/2?e[1][1]:a/2,f=e[2][0]<o/2?e[2][0]:o/2,d=e[2][1]<a/2?e[2][1]:a/2,p=e[3][0]<o/2?e[3][0]:o/2,m=e[3][1]<a/2?e[3][1]:a/2,g=o-u,w=a-d,y=o-f,v=a-m;return{topLeftOuter:c(r,i,s,l).topLeft.subdivide(.5),topLeftInner:c(r+n[3].width,i+n[0].width,Math.max(0,s-n[3].width),Math.max(0,l-n[0].width)).topLeft.subdivide(.5),topRightOuter:c(r+g,i,u,h).topRight.subdivide(.5),topRightInner:c(r+Math.min(g,o+n[3].width),i+n[0].width,g>o+n[3].width?0:u-n[3].width,h-n[0].width).topRight.subdivide(.5),bottomRightOuter:c(r+y,i+w,f,d).bottomRight.subdivide(.5),bottomRightInner:c(r+Math.min(y,o-n[3].width),i+Math.min(w,a+n[0].width),Math.max(0,f-n[1].width),d-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:c(r,i+v,p,m).bottomLeft.subdivide(.5),bottomLeftInner:c(r+n[3].width,i+v,Math.max(0,p-n[3].width),m-n[2].width).bottomLeft.subdivide(.5)}}function u(t,e,n,r){var i=function(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}};return{start:t,startControl:e,endControl:n,end:r,subdivide:function(o){var a=i(t,e,o),s=i(e,n,o),c=i(n,r,o),l=i(a,s,o),h=i(s,c,o),f=i(l,h,o);return[u(t,a,l,f),u(f,h,c,r)]},curveTo:function(t){t.push(["bezierCurve",e.x,e.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,e.x,e.y,t.x,t.y])}}}function h(t,e,n,r,i,o,a){var s=[];return e[0]>0||e[1]>0?(s.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(s)):s.push(["line",t.c1[0],t.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(s),s.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(s)):(s.push(["line",t.c2[0],t.c2[1]]),s.push(["line",t.c3[0],t.c3[1]])),e[0]>0||e[1]>0?(s.push(["line",i[1].end.x,i[1].end.y]),i[1].curveToReversed(s)):s.push(["line",t.c4[0],t.c4[1]]),s}function f(t,e,n,r,i,o,a){e[0]>0||e[1]>0?(t.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(t),r[1].curveTo(t)):t.push(["line",o,a]),(n[0]>0||n[1]>0)&&t.push(["line",i[0].start.x,i[0].start.y])}function d(t){return t.cssInt("zIndex")<0}function p(t){return t.cssInt("zIndex")>0}function m(t){return 0===t.cssInt("zIndex")}function g(t){return-1!==["inline","inline-block","inline-table"].indexOf(t.css("display"))}function w(t){return t instanceof G}function y(t){return t.node.data.trim().length>0}function v(t){return/^(normal|none|0px)$/.test(t.parent.css("letterSpacing"))}function b(t){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(e){var n=t.css("border"+e+"Radius").split(" ");return n.length<=1&&(n[1]=n[0]),n.map(O)})}function x(t){return t.nodeType===Node.TEXT_NODE||t.nodeType===Node.ELEMENT_NODE}function k(t){return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(t.css("position"))?t.css("zIndex"):"auto")}function _(t){return"static"!==t.css("position")}function C(t){return"none"!==t.css("float")}function A(t){return-1!==["inline-block","inline-table"].indexOf(t.css("display"))}function S(t){var e=this;return function(){return!t.apply(e,arguments)}}function q(t){return t.node.nodeType===Node.ELEMENT_NODE}function T(t){return!0===t.isPseudoElement}function P(t){return t.node.nodeType===Node.TEXT_NODE}function I(t){return function(e,n){return e.cssInt("zIndex")+t.indexOf(e)/t.length-(n.cssInt("zIndex")+t.indexOf(n)/t.length)}}function E(t){return t.getOpacity()<1}function O(t){return parseInt(t,10)}function F(t){return t.width}function B(t){return t.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(t.node.nodeName)}function R(t){return[].concat.apply([],t)}function j(t){var e=t.substr(0,1);return e===t.substr(t.length-1)&&e.match(/'|"/)?t.substr(1,t.length-2):t}function D(t){for(var e,n=[],r=0,i=!1;t.length;)z(t[r])===i?((e=t.splice(0,r)).length&&n.push(M.ucs2.encode(e)),i=!i,r=0):r++,r>=t.length&&(e=t.splice(0,r)).length&&n.push(M.ucs2.encode(e));return n}function z(t){return-1!==[32,13,10,9,45].indexOf(t)}function N(t){return/[^\u0000-\u00ff]/.test(t)}var L=t("./log"),M=t("punycode"),U=t("./nodecontainer"),H=t("./textcontainer"),W=t("./pseudoelementcontainer"),X=t("./fontmetrics"),V=t("./color"),G=t("./stackingcontext"),Y=t("./utils"),J=Y.bind,Q=Y.getBounds,K=Y.parseBackgrounds,$=Y.offsetBounds;r.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(t){if(q(t)){T(t)&&t.appendToDOM(),t.borders=this.parseBorders(t);var e="hidden"===t.css("overflow")?[t.borders.clip]:[],n=t.parseClip();n&&-1!==["absolute","fixed"].indexOf(t.css("position"))&&e.push([["rect",t.bounds.left+n.left,t.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),t.clip=i(t)?t.parent.clip.concat(e):e,t.backgroundClip="hidden"!==t.css("overflow")?t.clip.concat([t.borders.clip]):t.clip,T(t)&&t.cleanDOM()}else P(t)&&(t.clip=i(t)?t.parent.clip:[]);T(t)||(t.bounds=null)},this)},r.prototype.asyncRenderer=function(t,e,n){n=n||Date.now(),this.paint(t[this.renderIndex++]),t.length===this.renderIndex?e():n+20>Date.now()?this.asyncRenderer(t,e,n):setTimeout(J(function(){this.asyncRenderer(t,e)},this),0)},r.prototype.createPseudoHideStyles=function(t){this.createStyles(t,"."+W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},r.prototype.disableAnimations=function(t){this.createStyles(t,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},r.prototype.createStyles=function(t,e){var n=t.createElement("style");n.innerHTML=e,t.body.appendChild(n)},r.prototype.getPseudoElements=function(t){var e=[[t]];if(t.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(t,":before"),r=this.getPseudoElement(t,":after");n&&e.push(n),r&&e.push(r)}return R(e)},r.prototype.getPseudoElement=function(t,e){var n=t.computedStyle(e);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var r=j(n.content),i="url"===r.substr(0,3),a=document.createElement(i?"img":"html2canvaspseudoelement"),s=new W(a,t,e),c=n.length-1;c>=0;c--){var l=o(n.item(c));a.style[l]=n[l]}if(a.className=W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,i)return a.src=K(r)[0].args[0],[s];var u=document.createTextNode(r);return a.appendChild(u),[s,new H(u,s)]},r.prototype.getChildren=function(t){return R([].filter.call(t.node.childNodes,x).map(function(e){var n=[e.nodeType===Node.TEXT_NODE?new H(e,t):new U(e,t)].filter(B);return e.nodeType===Node.ELEMENT_NODE&&n.length&&"TEXTAREA"!==e.tagName?n[0].isElementVisible()?n.concat(this.getChildren(n[0])):[]:n},this))},r.prototype.newStackingContext=function(t,e){var n=new G(e,t.getOpacity(),t.node,t.parent);t.cloneTo(n),(e?n.getParentStack(this):n.parent.stack).contexts.push(n),t.stack=n},r.prototype.createStackingContexts=function(){this.nodes.forEach(function(t){q(t)&&(this.isRootElement(t)||E(t)||k(t)||this.isBodyWithTransparentRoot(t)||t.hasTransform())?this.newStackingContext(t,!0):q(t)&&(_(t)&&m(t)||A(t)||C(t))?this.newStackingContext(t,!1):t.assignStack(t.parent.stack)},this)},r.prototype.isBodyWithTransparentRoot=function(t){return"BODY"===t.node.nodeName&&t.parent.color("backgroundColor").isTransparent()},r.prototype.isRootElement=function(t){return null===t.parent},r.prototype.sortStackingContexts=function(t){t.contexts.sort(I(t.contexts.slice(0))),t.contexts.forEach(this.sortStackingContexts,this)},r.prototype.parseTextBounds=function(t){return function(e,n,r){if("none"!==t.parent.css("textDecoration").substr(0,4)||0!==e.trim().length){if(this.support.rangeBounds&&!t.parent.hasTransform()){var i=r.slice(0,n).join("").length;return this.getRangeBounds(t.node,i,e.length)}if(t.node&&"string"==typeof t.node.data){var o=t.node.splitText(e.length),a=this.getWrapperBounds(t.node,t.parent.hasTransform());return t.node=o,a}}else this.support.rangeBounds&&!t.parent.hasTransform()||(t.node=t.node.splitText(e.length));return{}}},r.prototype.getWrapperBounds=function(t,e){var n=t.ownerDocument.createElement("html2canvaswrapper"),r=t.parentNode,i=t.cloneNode(!0);n.appendChild(t.cloneNode(!0)),r.replaceChild(n,t);var o=e?$(n):Q(n);return r.replaceChild(i,n),o},r.prototype.getRangeBounds=function(t,e,n){var r=this.range||(this.range=t.ownerDocument.createRange());return r.setStart(t,e),r.setEnd(t,e+n),r.getBoundingClientRect()},r.prototype.parse=function(t){var e=t.contexts.filter(d),n=t.children.filter(q),r=n.filter(S(C)),i=r.filter(S(_)).filter(S(g)),o=n.filter(S(_)).filter(C),s=r.filter(S(_)).filter(g),c=t.contexts.concat(r.filter(_)).filter(m),l=t.children.filter(P).filter(y),u=t.contexts.filter(p);e.concat(i).concat(o).concat(s).concat(c).concat(l).concat(u).forEach(function(t){this.renderQueue.push(t),w(t)&&(this.parse(t),this.renderQueue.push(new a))},this)},r.prototype.paint=function(t){try{t instanceof a?this.renderer.ctx.restore():P(t)?(T(t.parent)&&t.parent.appendToDOM(),this.paintText(t),T(t.parent)&&t.parent.cleanDOM()):this.paintNode(t)}catch(t){if(L(t),this.options.strict)throw t}},r.prototype.paintNode=function(t){w(t)&&(this.renderer.setOpacity(t.opacity),this.renderer.ctx.save(),t.hasTransform()&&this.renderer.setTransform(t.parseTransform())),"INPUT"===t.node.nodeName&&"checkbox"===t.node.type?this.paintCheckbox(t):"INPUT"===t.node.nodeName&&"radio"===t.node.type?this.paintRadio(t):this.paintElement(t)},r.prototype.paintElement=function(t){var e=t.parseBounds();this.renderer.clip(t.backgroundClip,function(){this.renderer.renderBackground(t,e,t.borders.borders.map(F))},this),this.renderer.clip(t.clip,function(){this.renderer.renderBorders(t.borders.borders)},this),this.renderer.clip(t.backgroundClip,function(){switch(t.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(t.node);n?this.renderer.renderImage(t,e,t.borders,n):L("Error loading <"+t.node.nodeName+">",t.node);break;case"IMG":var r=this.images.get(t.node.src);r?this.renderer.renderImage(t,e,t.borders,r):L("Error loading <img>",t.node.src);break;case"CANVAS":this.renderer.renderImage(t,e,t.borders,{image:t.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(t)}},this)},r.prototype.paintCheckbox=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height),r={width:n-1,height:n-1,top:e.top,left:e.left},i=[3,3],o=[i,i,i,i],a=[1,1,1,1].map(function(t){return{color:new V("#A5A5A5"),width:t}}),c=l(r,o,a);this.renderer.clip(t.backgroundClip,function(){this.renderer.rectangle(r.left+1,r.top+1,r.width-2,r.height-2,new V("#DEDEDE")),this.renderer.renderBorders(s(a,r,c,o)),
t.node.checked&&(this.renderer.font(new V("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",r.left+n/6,r.top+n-1))},this)},r.prototype.paintRadio=function(t){var e=t.parseBounds(),n=Math.min(e.width,e.height)-2;this.renderer.clip(t.backgroundClip,function(){this.renderer.circleStroke(e.left+1,e.top+1,n,new V("#DEDEDE"),1,new V("#A5A5A5")),t.node.checked&&this.renderer.circle(Math.ceil(e.left+n/4)+1,Math.ceil(e.top+n/4)+1,Math.floor(n/2),new V("#424242"))},this)},r.prototype.paintFormValue=function(t){var e=t.getValue();if(e.length>0){var n=t.node.ownerDocument,r=n.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(e){try{r.style[e]=t.css(e)}catch(t){L("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}});var i=t.parseBounds();r.style.position="fixed",r.style.left=i.left+"px",r.style.top=i.top+"px",r.textContent=e,n.body.appendChild(r),this.paintText(new H(r.firstChild,t)),n.body.removeChild(r)}},r.prototype.paintText=function(t){t.applyTextTransform();var e=M.ucs2.decode(t.node.data),n=this.options.letterRendering&&!v(t)||N(t.node.data)?e.map(function(t){return M.ucs2.encode([t])}):D(e),r=t.parent.fontWeight(),i=t.parent.css("fontSize"),o=t.parent.css("fontFamily"),a=t.parent.parseTextShadows();this.renderer.font(t.parent.color("color"),t.parent.css("fontStyle"),t.parent.css("fontVariant"),r,i,o),a.length?this.renderer.fontShadow(a[0].color,a[0].offsetX,a[0].offsetY,a[0].blur):this.renderer.clearShadow(),this.renderer.clip(t.parent.clip,function(){n.map(this.parseTextBounds(t),this).forEach(function(e,r){e&&(this.renderer.text(n[r],e.left,e.bottom),this.renderTextDecoration(t.parent,e,this.fontMetrics.getMetrics(o,i)))},this)},this)},r.prototype.renderTextDecoration=function(t,e,n){switch(t.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(e.left,Math.round(e.top+n.baseline+n.lineWidth),e.width,1,t.color("color"));break;case"overline":this.renderer.rectangle(e.left,Math.round(e.top),e.width,1,t.color("color"));break;case"line-through":this.renderer.rectangle(e.left,Math.ceil(e.top+n.middle+n.lineWidth),e.width,1,t.color("color"))}};var Z={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};r.prototype.parseBorders=function(t){var e=t.parseBounds(),n=b(t),r=["Top","Right","Bottom","Left"].map(function(e,n){var r=t.css("border"+e+"Style"),i=t.color("border"+e+"Color");"inset"===r&&i.isBlack()&&(i=new V([255,255,255,i.a]));var o=Z[r]?Z[r][n]:null;return{width:t.cssInt("border"+e+"Width"),color:o?i[o[0]](o[1]):i,args:null}}),i=l(e,n,r);return{clip:this.parseBackgroundClip(t,i,r,n,e),borders:s(r,e,i,n)}},r.prototype.parseBackgroundClip=function(t,e,n,r,i){var o=[];switch(t.css("backgroundClip")){case"content-box":case"padding-box":f(o,r[0],r[1],e.topLeftInner,e.topRightInner,i.left+n[3].width,i.top+n[0].width),f(o,r[1],r[2],e.topRightInner,e.bottomRightInner,i.left+i.width-n[1].width,i.top+n[0].width),f(o,r[2],r[3],e.bottomRightInner,e.bottomLeftInner,i.left+i.width-n[1].width,i.top+i.height-n[2].width),f(o,r[3],r[0],e.bottomLeftInner,e.topLeftInner,i.left+n[3].width,i.top+i.height-n[2].width);break;default:f(o,r[0],r[1],e.topLeftOuter,e.topRightOuter,i.left,i.top),f(o,r[1],r[2],e.topRightOuter,e.bottomRightOuter,i.left+i.width,i.top),f(o,r[2],r[3],e.bottomRightOuter,e.bottomLeftOuter,i.left+i.width,i.top+i.height),f(o,r[3],r[0],e.bottomLeftOuter,e.topLeftOuter,i.left,i.top+i.height)}return o},e.exports=r},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(t,e,n){function r(t,e,n){var r="withCredentials"in new XMLHttpRequest;if(!e)return Promise.reject("No proxy configured");var s=o(r),l=a(e,t,s);return r?c(l):i(n,l,s).then(function(t){return f(t.content)})}function i(t,e,n){return new Promise(function(r,i){var o=t.createElement("script"),a=function(){delete window.html2canvas.proxy[n],t.body.removeChild(o)};window.html2canvas.proxy[n]=function(t){a(),r(t)},o.src=e,o.onerror=function(t){a(),i(t)},t.body.appendChild(o)})}function o(t){return t?"":"html2canvas_"+Date.now()+"_"+ ++d+"_"+Math.round(1e5*Math.random())}function a(t,e,n){return t+"?url="+encodeURIComponent(e)+(n.length?"&callback=html2canvas.proxy."+n:"")}function s(t){return function(e){var n,r=new DOMParser;try{n=r.parseFromString(e,"text/html")}catch(t){u("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(e),n.close()}catch(t){u("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=e}}var i=n.querySelector("base");if(!i||!i.href.host){var o=n.createElement("base");o.href=t,n.head.insertBefore(o,n.head.firstChild)}return n}}var c=t("./xhr"),l=t("./utils"),u=t("./log"),h=t("./clone"),f=l.decode64,d=0;n.Proxy=r,n.ProxyURL=function(t,e,n){var r="crossOrigin"in new Image,s=o(r),c=a(e,t,s);return r?Promise.resolve(c):i(n,c,s).then(function(t){return"data:"+t.type+";base64,"+t.content})},n.loadUrlDocument=function(t,e,n,i,o,a){return new r(t,e,window.document).then(s(t)).then(function(t){return h(t,n,i,o,a,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(t,e,n){var r=t("./proxy").ProxyURL;e.exports=function(t,e){var n=document.createElement("a");n.href=t,t=n.href,this.src=t,this.image=new Image;var i=this;this.promise=new Promise(function(n,o){i.image.crossOrigin="Anonymous",i.image.onload=n,i.image.onerror=o,new r(t,e,document).then(function(t){i.image.src=t}).catch(o)})}},{"./proxy":16}],18:[function(t,e,n){function r(t,e,n){i.call(this,t,e),this.isPseudoElement=!0,this.before=":before"===n}var i=t("./nodecontainer");r.prototype.cloneTo=function(t){r.prototype.cloneTo.call(this,t),t.isPseudoElement=!0,t.before=this.before},(r.prototype=Object.create(i.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},r.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},r.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",r.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=r},{"./nodecontainer":14}],19:[function(t,e,n){function r(t,e,n,r,i){this.width=t,this.height=e,this.images=n,this.options=r,this.document=i}var i=t("./log");r.prototype.renderImage=function(t,e,n,r){var i=t.cssInt("paddingLeft"),o=t.cssInt("paddingTop"),a=t.cssInt("paddingRight"),s=t.cssInt("paddingBottom"),c=n.borders,l=e.width-(c[1].width+c[3].width+i+a),u=e.height-(c[0].width+c[2].width+o+s);this.drawImage(r,0,0,r.image.width||l,r.image.height||u,e.left+i+c[3].width,e.top+o+c[0].width,l,u)},r.prototype.renderBackground=function(t,e,n){e.height>0&&e.width>0&&(this.renderBackgroundColor(t,e),this.renderBackgroundImage(t,e,n))},r.prototype.renderBackgroundColor=function(t,e){var n=t.color("backgroundColor");n.isTransparent()||this.rectangle(e.left,e.top,e.width,e.height,n)},r.prototype.renderBorders=function(t){t.forEach(this.renderBorder,this)},r.prototype.renderBorder=function(t){t.color.isTransparent()||null===t.args||this.drawShape(t.args,t.color)},r.prototype.renderBackgroundImage=function(t,e,n){t.parseBackgroundImages().reverse().forEach(function(r,o,a){switch(r.method){case"url":var s=this.images.get(r.args[0]);s?this.renderBackgroundRepeating(t,e,s,a.length-(o+1),n):i("Error loading background-image",r.args[0]);break;case"linear-gradient":case"gradient":var c=this.images.get(r.value);c?this.renderBackgroundGradient(c,e,n):i("Error loading background-image",r.args[0]);break;case"none":break;default:i("Unknown background-image type",r.args[0])}},this)},r.prototype.renderBackgroundRepeating=function(t,e,n,r,i){var o=t.parseBackgroundSize(e,n.image,r),a=t.parseBackgroundPosition(e,n.image,r,o);switch(t.parseBackgroundRepeat(r)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,a,o,e,e.left+i[3],e.top+a.top+i[0],99999,o.height,i);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,a,o,e,e.left+a.left+i[3],e.top+i[0],o.width,99999,i);break;case"no-repeat":this.backgroundRepeatShape(n,a,o,e,e.left+a.left+i[3],e.top+a.top+i[0],o.width,o.height,i);break;default:this.renderBackgroundRepeat(n,a,o,{top:e.top,left:e.left},i[3],i[0])}},e.exports=r},{"./log":13}],20:[function(t,e,n){function r(t,e){o.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=t,this.canvas.height=e),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},s("Initialized CanvasRenderer with size",t,"x",e)}function i(t){return t.length>0}var o=t("../renderer"),a=t("../lineargradientcontainer"),s=t("../log");(r.prototype=Object.create(o.prototype)).setFillStyle=function(t){return this.ctx.fillStyle="object"==typeof t&&t.isColor?t.toString():t,this.ctx},r.prototype.rectangle=function(t,e,n,r,i){this.setFillStyle(i).fillRect(t,e,n,r)},r.prototype.circle=function(t,e,n,r){this.setFillStyle(r),this.ctx.beginPath(),this.ctx.arc(t+n/2,e+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},r.prototype.circleStroke=function(t,e,n,r,i,o){this.circle(t,e,n,r),this.ctx.strokeStyle=o.toString(),this.ctx.stroke()},r.prototype.drawShape=function(t,e){this.shape(t),this.setFillStyle(e).fill()},r.prototype.taints=function(t){if(null===t.tainted){this.taintCtx.drawImage(t.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),t.tainted=!1}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d"),t.tainted=!0}}return t.tainted},r.prototype.drawImage=function(t,e,n,r,i,o,a,s,c){this.taints(t)&&!this.options.allowTaint||this.ctx.drawImage(t.image,e,n,r,i,o,a,s,c)},r.prototype.clip=function(t,e,n){this.ctx.save(),t.filter(i).forEach(function(t){this.shape(t).clip()},this),e.call(n),this.ctx.restore()},r.prototype.shape=function(t){return this.ctx.beginPath(),t.forEach(function(t,e){"rect"===t[0]?this.ctx.rect.apply(this.ctx,t.slice(1)):this.ctx[0===e?"moveTo":t[0]+"To"].apply(this.ctx,t.slice(1))},this),this.ctx.closePath(),this.ctx},r.prototype.font=function(t,e,n,r,i,o){this.setFillStyle(t).font=[e,n,r,i,o].join(" ").split(",")[0]},r.prototype.fontShadow=function(t,e,n,r){this.setVariable("shadowColor",t.toString()).setVariable("shadowOffsetY",e).setVariable("shadowOffsetX",n).setVariable("shadowBlur",r)},r.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},r.prototype.setOpacity=function(t){this.ctx.globalAlpha=t},r.prototype.setTransform=function(t){this.ctx.translate(t.origin[0],t.origin[1]),this.ctx.transform.apply(this.ctx,t.matrix),this.ctx.translate(-t.origin[0],-t.origin[1])},r.prototype.setVariable=function(t,e){return this.variables[t]!==e&&(this.variables[t]=this.ctx[t]=e),this},r.prototype.text=function(t,e,n){this.ctx.fillText(t,e,n)},r.prototype.backgroundRepeatShape=function(t,e,n,r,i,o,a,s,c){var l=[["line",Math.round(i),Math.round(o)],["line",Math.round(i+a),Math.round(o)],["line",Math.round(i+a),Math.round(s+o)],["line",Math.round(i),Math.round(s+o)]];this.clip([l],function(){this.renderBackgroundRepeat(t,e,n,r,c[3],c[0])},this)},r.prototype.renderBackgroundRepeat=function(t,e,n,r,i,o){var a=Math.round(r.left+e.left+i),s=Math.round(r.top+e.top+o);this.setFillStyle(this.ctx.createPattern(this.resizeImage(t,n),"repeat")),this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},r.prototype.renderBackgroundGradient=function(t,e){if(t instanceof a){var n=this.ctx.createLinearGradient(e.left+e.width*t.x0,e.top+e.height*t.y0,e.left+e.width*t.x1,e.top+e.height*t.y1);t.colorStops.forEach(function(t){n.addColorStop(t.stop,t.color.toString())}),this.rectangle(e.left,e.top,e.width,e.height,n)}},r.prototype.resizeImage=function(t,e){var n=t.image;if(n.width===e.width&&n.height===e.height)return n;var r=document.createElement("canvas");return r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(n,0,0,n.width,n.height,0,0,e.width,e.height),r},e.exports=r},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(t,e,n){function r(t,e,n,r){i.call(this,n,r),this.ownStacking=t,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*e}var i=t("./nodecontainer");(r.prototype=Object.create(i.prototype)).getParentStack=function(t){var e=this.parent?this.parent.stack:null;return e?e.ownStacking?e:e.getParentStack(t):t.stack},e.exports=r},{"./nodecontainer":14}],22:[function(t,e,n){function r(t){this.rangeBounds=this.testRangeBounds(t),this.cors=this.testCORS(),this.svg=this.testSVG()}r.prototype.testRangeBounds=function(t){var e,n,r=!1;return t.createRange&&(e=t.createRange()).getBoundingClientRect&&((n=t.createElement("boundtest")).style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),123===e.getBoundingClientRect().height&&(r=!0),t.body.removeChild(n)),r},r.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},r.prototype.testSVG=function(){var t=new Image,e=document.createElement("canvas"),n=e.getContext("2d");t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return!0},e.exports=r},{}],23:[function(t,e,n){function r(t){this.src=t,this.image=null;var e=this;this.promise=this.hasFabric().then(function(){return e.isInline(t)?Promise.resolve(e.inlineFormatting(t)):i(t)}).then(function(t){return new Promise(function(n){window.html2canvas.svg.fabric.loadSVGFromString(t,e.createCanvas.call(e,n))})})}var i=t("./xhr"),o=t("./utils").decode64;r.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},r.prototype.inlineFormatting=function(t){return/^data:image\/svg\+xml;base64,/.test(t)?this.decode64(this.removeContentType(t)):this.removeContentType(t)},r.prototype.removeContentType=function(t){return t.replace(/^data:image\/svg\+xml(;base64)?,/,"")},r.prototype.isInline=function(t){return/^data:image\/svg\+xml/i.test(t)},r.prototype.createCanvas=function(t){var e=this;return function(n,r){var i=new window.html2canvas.svg.fabric.StaticCanvas("c");e.image=i.lowerCanvasEl,i.setWidth(r.width).setHeight(r.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(n,r)).renderAll(),t(i.lowerCanvasEl)}},r.prototype.decode64=function(t){return"function"==typeof window.atob?window.atob(t):o(t)},e.exports=r},{"./utils":26,"./xhr":28}],24:[function(t,e,n){function r(t,e){this.src=t,this.image=null;var n=this;this.promise=e?new Promise(function(e,r){n.image=new Image,n.image.onload=e,n.image.onerror=r,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(t),!0===n.image.complete&&e(n.image)}):this.hasFabric().then(function(){return new Promise(function(e){window.html2canvas.svg.fabric.parseSVGDocument(t,n.createCanvas.call(n,e))})})}var i=t("./svgcontainer");r.prototype=Object.create(i.prototype),e.exports=r},{"./svgcontainer":23}],25:[function(t,e,n){function r(t,e){o.call(this,t,e)}function i(t,e,n){if(t.length>0)return e+n.toUpperCase()}var o=t("./nodecontainer");(r.prototype=Object.create(o.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},r.prototype.transform=function(t){var e=this.node.data;switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,i);case"uppercase":return e.toUpperCase();default:return e}},e.exports=r},{"./nodecontainer":14}],26:[function(t,e,n){n.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},n.bind=function(t,e){return function(){return t.apply(e,arguments)}},n.decode64=function(t){var e,n,r,i,o,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=t.length,u="";for(e=0;e<l;e+=4)o=c.indexOf(t[e])<<2|(n=c.indexOf(t[e+1]))>>4,a=(15&n)<<4|(r=c.indexOf(t[e+2]))>>2,s=(3&r)<<6|(i=c.indexOf(t[e+3])),u+=64===r?String.fromCharCode(o):64===i||-1===i?String.fromCharCode(o,a):String.fromCharCode(o,a,s);return u},n.getBounds=function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),n=null==t.offsetWidth?e.width:t.offsetWidth;return{top:e.top,bottom:e.bottom||e.top+e.height,right:e.left+n,left:e.left,width:n,height:null==t.offsetHeight?e.height:t.offsetHeight}}return{}},n.offsetBounds=function(t){var e=t.offsetParent?n.offsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,right:t.offsetLeft+e.left+t.offsetWidth,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},n.parseBackgrounds=function(t){var e,n,r,i,o,a,s,c=[],l=0,u=0,h=function(){e&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===e.substr(0,1)&&(i=e.indexOf("-",1)+1)>0&&(r=e.substr(0,i),e=e.substr(i)),c.push({prefix:r,method:e.toLowerCase(),value:o,args:s,image:null})),s=[],e=r=n=o=""};return s=[],e=r=n=o="",t.split("").forEach(function(t){if(!(0===l&&" \r\n\t".indexOf(t)>-1)){switch(t){case'"':a?a===t&&(a=null):a=t;break;case"(":if(a)break;if(0===l)return l=1,void(o+=t);u++;break;case")":if(a)break;if(1===l){if(0===u)return l=0,o+=t,void h();u--}break;case",":if(a)break;if(0===l)return void h();if(1===l&&0===u&&!e.match(/^url$/i))return s.push(n),n="",void(o+=t)}o+=t,0===l?e+=t:n+=t}}),h(),c}},{}],27:[function(t,e,n){function r(t){i.apply(this,arguments),this.type="linear"===t.args[0]?i.TYPES.LINEAR:i.TYPES.RADIAL}var i=t("./gradientcontainer");r.prototype=Object.create(i.prototype),e.exports=r},{"./gradientcontainer":9}],28:[function(t,e,n){e.exports=function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.responseText):n(new Error(r.statusText))},r.onerror=function(){n(new Error("Network Error"))},r.send()})}},{}]},{},[4])(4)}),function(t){var e;e=function(){function e(t){var e,n,r,i,o,a,s,c,l,u,h,f,d,p,m;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(e=this.readUInt32(),u=function(){var t,e;for(e=[],s=t=0;t<4;s=++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),i=this.readUInt16()||100,a.delay=1e3*o/i,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===u&&(this.pos+=4,e-=4),t=(null!=a?a.data:void 0)||this.imgData,s=d=0;0<=e?d<e:d>e;s=0<=e?++d:--d)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((h=r-this.transparency.indexed.length)>0)for(s=p=0;0<=h?p<h:p>h;s=0<=h?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":c=(f=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,f.slice(0,c)),this.text[l]=String.fromCharCode.apply(String,f.slice(c+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(m=this.colorType)||6===m,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var n,r,i;e.load=function(t,n,r){var i;return"function"==typeof n&&(r=n),(i=new XMLHttpRequest).open("GET",t,!0),i.responseType="arraybuffer",i.onload=function(){var t,o;return t=new Uint8Array(i.response||i.mozResponseArrayBuffer),o=new e(t),"function"==typeof(null!=n?n.getContext:void 0)&&o.render(n),"function"==typeof r?r(o):void 0},i.send(null)},e.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},e.prototype.readUInt32=function(){var t,e,n,r;return t=this.data[this.pos++]<<24,e=this.data[this.pos++]<<16,n=this.data[this.pos++]<<8,r=this.data[this.pos++],t|e|n|r},e.prototype.readUInt16=function(){var t,e;return t=this.data[this.pos++]<<8,e=this.data[this.pos++],t|e},e.prototype.decodePixels=function(t){var e,n,r,i,o,a,c,l,u,h,f,d,p,m,g,w,y,v,b,x,k,_,C;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);for(t=(t=new s(t)).getBytes(),w=(d=this.pixelBitlength/8)*this.width,p=new Uint8Array(w*this.height),a=t.length,g=0,m=0,n=0;m<a;){switch(t[m++]){case 0:for(i=b=0;b<w;i=b+=1)p[n++]=t[m++];break;case 1:for(i=x=0;x<w;i=x+=1)e=t[m++],o=i<d?0:p[n-d],p[n++]=(e+o)%256;break;case 2:for(i=k=0;k<w;i=k+=1)e=t[m++],r=(i-i%d)/d,y=g&&p[(g-1)*w+r*d+i%d],p[n++]=(y+e)%256;break;case 3:for(i=_=0;_<w;i=_+=1)e=t[m++],r=(i-i%d)/d,o=i<d?0:p[n-d],y=g&&p[(g-1)*w+r*d+i%d],p[n++]=(e+Math.floor((o+y)/2))%256;break;case 4:for(i=C=0;C<w;i=C+=1)e=t[m++],r=(i-i%d)/d,o=i<d?0:p[n-d],0===g?y=v=0:(y=p[(g-1)*w+r*d+i%d],v=r&&p[(g-1)*w+(r-1)*d+i%d]),c=o+y-v,l=Math.abs(c-o),h=Math.abs(c-y),f=Math.abs(c-v),u=l<=h&&l<=f?o:h<=f?y:v,p[n++]=(e+u)%256;break;default:throw new Error("Invalid filter algorithm: "+t[m-1])}g++}return p},e.prototype.decodePalette=function(){var t,e,n,r,i,o,a,s,c;for(n=this.palette,o=this.transparency.indexed||[],i=new Uint8Array((o.length||0)+n.length),r=0,t=0,e=a=0,s=n.length;a<s;e=a+=3)i[r++]=n[e],i[r++]=n[e+1],i[r++]=n[e+2],i[r++]=null!=(c=o[t++])?c:255;return i},e.prototype.copyToImageData=function(t,e){var n,r,i,o,a,s,c,l,u,h,f;if(r=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),r=4,n=!0),i=t.data||t,l=i.length,a=u||e,o=s=0,1===r)for(;o<l;)c=u?4*e[o/4]:s,h=a[c++],i[o++]=h,i[o++]=h,i[o++]=h,i[o++]=n?a[c++]:255,s=c;else for(;o<l;)c=u?4*e[o/4]:s,i[o++]=a[c++],i[o++]=a[c++],i[o++]=a[c++],i[o++]=n?a[c++]:255,s=c},e.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};try{r=t.document.createElement("canvas"),i=r.getContext("2d")}catch(t){return-1}return n=function(t){var e;return i.width=t.width,i.height=t.height,i.clearRect(0,0,t.width,t.height),i.putImageData(t,0,0),e=new Image,e.src=r.toDataURL(),e},e.prototype.decodeFrames=function(t){var e,r,i,o,a,s,c,l;if(this.animation){for(l=[],r=a=0,s=(c=this.animation.frames).length;a<s;r=++a)e=c[r],i=t.createImageData(e.width,e.height),o=this.decodePixels(new Uint8Array(e.data)),this.copyToImageData(i,o),e.imageData=i,l.push(e.image=n(i));return l}},e.prototype.renderFrame=function(t,e){var n,r,i;return r=this.animation.frames,n=r[e],i=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=i?i.disposeOp:void 0)?t.clearRect(i.xOffset,i.yOffset,i.width,i.height):2===(null!=i?i.disposeOp:void 0)&&t.putImageData(i.imageData,i.xOffset,i.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},e.prototype.animate=function(t){var e,n,r,i,o,a,s=this;return n=0,a=this.animation,i=a.numFrames,r=a.frames,o=a.numPlays,(e=function(){var a,c;if(a=n++%i,c=r[a],s.renderFrame(t,a),i>1&&n/i<o)return s.animation._timeout=setTimeout(e,c.delay)})()},e.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},e.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},e}(),t.PNG=e}("undefined"!=typeof window&&window||void 0);var a=function(){function t(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return t.prototype={ensureBuffer:function(t){var e=this.buffer,n=e?e.byteLength:0;if(t<n)return e;for(var r=512;r<t;)r<<=1;for(var i=new Uint8Array(r),o=0;o<n;++o)i[o]=e[o];return this.buffer=i},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var e=this.pos;if(t){for(this.ensureBuffer(e+t),r=e+t;!this.eof&&this.bufferLength<r;)this.readBlock();var n=this.bufferLength;r>n&&(r=n)}else{for(;!this.eof;)this.readBlock();var r=this.bufferLength}return this.pos=r,this.buffer.subarray(e,r)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,e,n){for(var r=t+e;this.bufferLength<=r&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,e,n)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},t}(),s=function(){function t(t){throw new Error(t)}function e(e){var n=0,r=e[n++],i=e[n++];-1!=r&&-1!=i||t("Invalid header in flate stream"),8!=(15&r)&&t("Unknown compression method in flate stream"),((r<<8)+i)%31!=0&&t("Bad FCHECK in flate stream"),32&i&&t("FDICT bit set in flate stream"),this.bytes=e,this.bytesPos=n,this.codeSize=0,this.codeBuf=0,a.call(this)}if("undefined"!=typeof Uint32Array){var n=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),i=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),o=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],s=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return e.prototype=Object.create(a.prototype),e.prototype.getBits=function(e){for(var n,r=this.codeSize,i=this.codeBuf,o=this.bytes,a=this.bytesPos;r<e;)void 0===(n=o[a++])&&t("Bad encoding in flate stream"),i|=n<<r,r+=8;return n=i&(1<<e)-1,this.codeBuf=i>>e,this.codeSize=r-=e,this.bytesPos=a,n},e.prototype.getCode=function(e){for(var n=e[0],r=e[1],i=this.codeSize,o=this.codeBuf,a=this.bytes,s=this.bytesPos;i<r;){var c;void 0===(c=a[s++])&&t("Bad encoding in flate stream"),o|=c<<i,i+=8}var l=n[o&(1<<r)-1],u=l>>16,h=65535&l;return(0==i||i<u||0==u)&&t("Bad encoding in flate stream"),this.codeBuf=o>>u,this.codeSize=i-u,this.bytesPos=s,h},e.prototype.generateHuffmanTable=function(t){for(var e=t.length,n=0,r=0;r<e;++r)t[r]>n&&(n=t[r]);for(var i=1<<n,o=new Uint32Array(i),a=1,s=0,c=2;a<=n;++a,s<<=1,c<<=1)for(var l=0;l<e;++l)if(t[l]==a){
for(var u=0,h=s,r=0;r<a;++r)u=u<<1|1&h,h>>=1;for(r=u;r<i;r+=c)o[r]=a<<16|l;++s}return[o,n]},e.prototype.readBlock=function(){function e(t,e,n,r,i){for(var o=t.getBits(n)+r;o-- >0;)e[p++]=i}var a=this.getBits(3);if(1&a&&(this.eof=!0),0!=(a>>=1)){var c,l;if(1==a)c=o,l=s;else if(2==a){for(var u=this.getBits(5)+257,h=this.getBits(5)+1,f=this.getBits(4)+4,d=Array(n.length),p=0;p<f;)d[n[p++]]=this.getBits(3);for(var m=this.generateHuffmanTable(d),g=0,p=0,w=u+h,y=new Array(w);p<w;){var v=this.getCode(m);16==v?e(this,y,2,3,g):17==v?e(this,y,3,3,g=0):18==v?e(this,y,7,11,g=0):y[p++]=g=v}c=this.generateHuffmanTable(y.slice(0,u)),l=this.generateHuffmanTable(y.slice(u,w))}else t("Unknown block type in flate stream");for(var b=(O=this.buffer)?O.length:0,x=this.bufferLength;;){var k=this.getCode(c);if(k<256)x+1>=b&&(b=(O=this.ensureBuffer(x+1)).length),O[x++]=k;else{if(256==k)return void(this.bufferLength=x);var _=(k=r[k-=257])>>16;_>0&&(_=this.getBits(_)),g=(65535&k)+_,k=this.getCode(l),(_=(k=i[k])>>16)>0&&(_=this.getBits(_));var C=(65535&k)+_;x+g>=b&&(b=(O=this.ensureBuffer(x+g)).length);for(var A=0;A<g;++A,++x)O[x]=O[x-C]}}}else{var S,q=this.bytes,T=this.bytesPos;void 0===(S=q[T++])&&t("Bad block header in flate stream");var P=S;void 0===(S=q[T++])&&t("Bad block header in flate stream"),P|=S<<8,void 0===(S=q[T++])&&t("Bad block header in flate stream");var I=S;void 0===(S=q[T++])&&t("Bad block header in flate stream"),(I|=S<<8)!=(65535&~P)&&t("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var E=this.bufferLength,O=this.ensureBuffer(E+P),F=E+P;this.bufferLength=F;for(var B=E;B<F;++B){if(void 0===(S=q[T++])){this.eof=!0;break}O[B]=S}this.bytesPos=T}},e}}();return function(t){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0===t.btoa&&(t.btoa=function(t){var n,r,i,o,a,s=0,c=0,l="",u=[];if(!t)return t;do{n=(a=t.charCodeAt(s++)<<16|t.charCodeAt(s++)<<8|t.charCodeAt(s++))>>18&63,r=a>>12&63,i=a>>6&63,o=63&a,u[c++]=e.charAt(n)+e.charAt(r)+e.charAt(i)+e.charAt(o)}while(s<t.length);l=u.join("");var h=t.length%3;return(h?l.slice(0,h-3):l)+"===".slice(h||3)}),void 0===t.atob&&(t.atob=function(t){var n,r,i,o,a,s,c=0,l=0,u=[];if(!t)return t;t+="";do{n=(s=e.indexOf(t.charAt(c++))<<18|e.indexOf(t.charAt(c++))<<12|(o=e.indexOf(t.charAt(c++)))<<6|(a=e.indexOf(t.charAt(c++))))>>16&255,r=s>>8&255,i=255&s,u[l++]=64==o?String.fromCharCode(n):64==a?String.fromCharCode(n,r):String.fromCharCode(n,r,i)}while(c<t.length);return u.join("")}),Array.prototype.map||(Array.prototype.map=function(t){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;for(var e=Object(this),n=e.length>>>0,r=new Array(n),i=arguments.length>1?arguments[1]:void 0,o=0;o<n;o++)o in e&&(r[o]=t.call(i,e[o],o,e));return r}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;for(var n=Object(this),r=n.length>>>0,i=0;i<r;i++)i in n&&t.call(e,n[i],i,n)}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError;var o,a,s=[];for(o in i)t.call(i,o)&&s.push(o);if(e)for(a=0;a<r;a++)t.call(i,n[a])&&s.push(n[a]);return s}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0),e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],25:[function(require,module,exports){
"use strict";function _classCallCheck(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function _addMiniSignalBinding(n,i){return n._head?(n._tail._next=i,i._prev=n._tail,n._tail=i):(n._head=i,n._tail=i),i._owner=n,i}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function n(n,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}(),MiniSignalBinding=function(){function n(i,t,e){void 0===t&&(t=!1),_classCallCheck(this,n),this._fn=i,this._once=t,this._thisArg=e,this._next=this._prev=this._owner=null}return _createClass(n,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),n}(),MiniSignal=function(){function n(){_classCallCheck(this,n),this._head=this._tail=void 0}return _createClass(n,[{key:"handlers",value:function(){var n=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],i=this._head;if(n)return!!i;for(var t=[];i;)t.push(i),i=i._next;return t}},{key:"has",value:function(n){if(!(n instanceof MiniSignalBinding))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return n._owner===this}},{key:"dispatch",value:function(){var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,arguments),n=n._next;return!0}},{key:"add",value:function(n){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof n)throw new Error("MiniSignal#add(): First arg must be a Function.");return _addMiniSignalBinding(this,new MiniSignalBinding(n,!1,i))}},{key:"once",value:function(n){var i=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof n)throw new Error("MiniSignal#once(): First arg must be a Function.");return _addMiniSignalBinding(this,new MiniSignalBinding(n,!0,i))}},{key:"detach",value:function(n){if(!(n instanceof MiniSignalBinding))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return n._owner!==this?this:(n._prev&&(n._prev._next=n._next),n._next&&(n._next._prev=n._prev),n===this._head?(this._head=n._next,null===n._next&&(this._tail=null)):n===this._tail&&(this._tail=n._prev,this._tail._next=null),n._owner=null,this)}},{key:"detachAll",value:function(){var n=this._head;if(!n)return this;for(this._head=this._tail=null;n;)n._owner=null,n=n._next;return this}}]),n}();MiniSignal.MiniSignalBinding=MiniSignalBinding,exports.default=MiniSignal,module.exports=exports.default;
},{}],26:[function(require,module,exports){
"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};
},{}],27:[function(require,module,exports){
"use strict";module.exports=function(e,r){r=r||{};for(var o={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t=o.parser[r.strictMode?"strict":"loose"].exec(e),s={},a=14;a--;)s[o.key[a]]=t[a]||"";return s[o.q.name]={},s[o.key[12]].replace(o.q.parser,function(e,r,t){r&&(s[o.q.name][r]=t)}),s};
},{}],28:[function(require,module,exports){
(function (process){
function normalizeArray(r,t){for(var e=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function filter(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(r){return splitPathRe.exec(r).slice(1)};exports.resolve=function(){for(var r="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(r=n+"/"+r,t="/"===n.charAt(0))}return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),(t?"/":"")+r||"."},exports.normalize=function(r){var t=exports.isAbsolute(r),e="/"===substr(r,-1);return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),r||t||(r="."),r&&e&&(r+="/"),(t?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),s=e(t.split("/")),i=Math.min(n.length,s.length),o=i,u=0;u<i;u++)if(n[u]!==s[u]){o=u;break}for(var l=[],u=o;u<n.length;u++)l.push("..");return l=l.concat(s.slice(o)),l.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){var t=splitPath(r),e=t[0],n=t[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},exports.basename=function(r,t){var e=splitPath(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){return splitPath(r)[3]};var substr="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return t<0&&(t=r.length+t),r.substr(t,e)};
}).call(this,require('_process'))

},{"_process":196}],29:[function(require,module,exports){
var EMPTY_ARRAY_BUFFER=new ArrayBuffer(0),Buffer=function(e,t,f,r){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=r||e.STATIC_DRAW,this.data=EMPTY_ARRAY_BUFFER,f&&this.upload(f),this._updateID=0};Buffer.prototype.upload=function(e,t,f){f||this.bind();var r=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?r.bufferSubData(this.type,t,e):r.bufferData(this.type,e,this.drawType),this.data=e},Buffer.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},Buffer.createVertexBuffer=function(e,t,f){return new Buffer(e,e.ARRAY_BUFFER,t,f)},Buffer.createIndexBuffer=function(e,t,f){return new Buffer(e,e.ELEMENT_ARRAY_BUFFER,t,f)},Buffer.create=function(e,t,f,r){return new Buffer(e,t,f,r)},Buffer.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},module.exports=Buffer;
},{}],30:[function(require,module,exports){
var Texture=require("./GLTexture"),Framebuffer=function(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=r||100};Framebuffer.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new Texture(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},Framebuffer.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},Framebuffer.prototype.clear=function(e,t,r,i){this.bind();var f=this.gl;f.clearColor(e,t,r,i),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT)},Framebuffer.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},Framebuffer.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},Framebuffer.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t))},Framebuffer.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},Framebuffer.createRGBA=function(e,t,r,i){var f=Texture.fromData(e,null,t,r);f.enableNearestScaling(),f.enableWrapClamp();var n=new Framebuffer(e,t,r);return n.enableTexture(f),n.unbind(),n},Framebuffer.createFloat32=function(e,t,r,i){var f=new Texture.fromData(e,i,t,r);f.enableNearestScaling(),f.enableWrapClamp();var n=new Framebuffer(e,t,r);return n.enableTexture(f),n.unbind(),n},module.exports=Framebuffer;
},{"./GLTexture":32}],31:[function(require,module,exports){
var compileProgram=require("./shader/compileProgram"),extractAttributes=require("./shader/extractAttributes"),extractUniforms=require("./shader/extractUniforms"),setPrecision=require("./shader/setPrecision"),generateUniformAccessObject=require("./shader/generateUniformAccessObject"),Shader=function(r,t,e,i,s){this.gl=r,i&&(t=setPrecision(t,i),e=setPrecision(e,i)),this.program=compileProgram(r,t,e,s),this.attributes=extractAttributes(r,this.program),this.uniformData=extractUniforms(r,this.program),this.uniforms=generateUniformAccessObject(r,this.uniformData)};Shader.prototype.bind=function(){return this.gl.useProgram(this.program),this},Shader.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},module.exports=Shader;
},{"./shader/compileProgram":37,"./shader/extractAttributes":39,"./shader/extractUniforms":40,"./shader/generateUniformAccessObject":41,"./shader/setPrecision":45}],32:[function(require,module,exports){
var Texture=function(t,e,i,r,T){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=r||t.RGBA,this.type=T||t.UNSIGNED_BYTE};Texture.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=r};var FLOATING_POINT_AVAILABLE=!1;Texture.prototype.uploadData=function(t,e,i){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!FLOATING_POINT_AVAILABLE){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");FLOATING_POINT_AVAILABLE=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},Texture.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},Texture.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},Texture.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},Texture.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},Texture.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},Texture.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},Texture.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},Texture.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},Texture.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},Texture.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},Texture.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},Texture.fromSource=function(t,e,i){var r=new Texture(t);return r.premultiplyAlpha=i||!1,r.upload(e),r},Texture.fromData=function(t,e,i,r){var T=new Texture(t);return T.uploadData(e,i,r),T},module.exports=Texture;
},{}],33:[function(require,module,exports){
function VertexArrayObject(t,e){if(this.nativeVaoExtension=null,VertexArrayObject.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var setVertexAttribArrays=require("./setVertexAttribArrays");VertexArrayObject.prototype.constructor=VertexArrayObject,module.exports=VertexArrayObject,VertexArrayObject.FORCE_NATIVE=!1,VertexArrayObject.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},VertexArrayObject.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},VertexArrayObject.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var i=this.attributes[r];e!==i.buffer&&(i.buffer.bind(),e=i.buffer),t.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||t.FLOAT,i.normalized||!1,i.stride||0,i.start||0)}return setVertexAttribArrays(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},VertexArrayObject.prototype.addAttribute=function(t,e,r,i,a,n){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:i||!1,stride:a||0,start:n||0}),this.dirty=!0,this},VertexArrayObject.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},VertexArrayObject.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},VertexArrayObject.prototype.draw=function(t,e,r){var i=this.gl;return this.indexBuffer?i.drawElements(t,e||this.indexBuffer.data.length,i.UNSIGNED_SHORT,2*(r||0)):i.drawArrays(t,r,e||this.getSize()),this},VertexArrayObject.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},VertexArrayObject.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)};
},{"./setVertexAttribArrays":36}],34:[function(require,module,exports){
var createContext=function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r};module.exports=createContext;
},{}],35:[function(require,module,exports){
var gl={createContext:require("./createContext"),setVertexAttribArrays:require("./setVertexAttribArrays"),GLBuffer:require("./GLBuffer"),GLFramebuffer:require("./GLFramebuffer"),GLShader:require("./GLShader"),GLTexture:require("./GLTexture"),VertexArrayObject:require("./VertexArrayObject"),shader:require("./shader")};"undefined"!=typeof module&&module.exports&&(module.exports=gl),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=gl);
},{"./GLBuffer":29,"./GLFramebuffer":30,"./GLShader":31,"./GLTexture":32,"./VertexArrayObject":33,"./createContext":34,"./setVertexAttribArrays":36,"./shader":42}],36:[function(require,module,exports){
var setVertexAttribArrays=function(t,r,e){var a;if(e){var i=e.tempAttribState,b=e.attribState;for(a=0;a<i.length;a++)i[a]=!1;for(a=0;a<r.length;a++)i[r[a].attribute.location]=!0;for(a=0;a<b.length;a++)b[a]!==i[a]&&(b[a]=i[a],e.attribState[a]?t.enableVertexAttribArray(a):t.disableVertexAttribArray(a))}else for(a=0;a<r.length;a++){var l=r[a];t.enableVertexAttribArray(l.attribute.location)}};module.exports=setVertexAttribArrays;
},{}],37:[function(require,module,exports){
var compileProgram=function(r,e,o,a){var t=compileShader(r,r.VERTEX_SHADER,e),g=compileShader(r,r.FRAGMENT_SHADER,o),l=r.createProgram();if(r.attachShader(l,t),r.attachShader(l,g),a)for(var n in a)r.bindAttribLocation(l,a[n],n);return r.linkProgram(l),r.getProgramParameter(l,r.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",r.getProgramParameter(l,r.VALIDATE_STATUS)),console.error("gl.getError()",r.getError()),""!==r.getProgramInfoLog(l)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(l)),r.deleteProgram(l),l=null),r.deleteShader(t),r.deleteShader(g),l},compileShader=function(r,e,o){var a=r.createShader(e);return r.shaderSource(a,o),r.compileShader(a),r.getShaderParameter(a,r.COMPILE_STATUS)?a:(console.log(r.getShaderInfoLog(a)),null)};module.exports=compileProgram;
},{}],38:[function(require,module,exports){
var defaultValue=function(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return booleanArray(2*e);case"bvec3":return booleanArray(3*e);case"bvec4":return booleanArray(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},booleanArray=function(r){for(var e=new Array(r),a=0;a<e.length;a++)e[a]=!1;return e};module.exports=defaultValue;
},{}],39:[function(require,module,exports){
var mapType=require("./mapType"),mapSize=require("./mapSize"),extractAttributes=function(t,e){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<i;a++){var o=t.getActiveAttrib(e,a),p=mapType(t,o.type);r[o.name]={type:p,size:mapSize(p),location:t.getAttribLocation(e,o.name),pointer:pointer}}return r},pointer=function(t,e,r,i){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,r||0,i||0)};module.exports=extractAttributes;
},{"./mapSize":43,"./mapType":44}],40:[function(require,module,exports){
var mapType=require("./mapType"),defaultValue=require("./defaultValue"),extractUniforms=function(e,a){for(var r={},t=e.getProgramParameter(a,e.ACTIVE_UNIFORMS),i=0;i<t;i++){var o=e.getActiveUniform(a,i),u=o.name.replace(/\[.*?\]/,""),m=mapType(e,o.type);r[u]={type:m,size:o.size,location:e.getUniformLocation(a,u),value:defaultValue(m,o.size)}}return r};module.exports=extractUniforms;
},{"./defaultValue":38,"./mapType":44}],41:[function(require,module,exports){
function generateSetter(n,i){return function(t){this.data[n].value=t;var f=this.data[n].location;1===i.size?GLSL_SINGLE_SETTERS[i.type](this.gl,f,t):GLSL_ARRAY_SETTERS[i.type](this.gl,f,t)}}function getUniformGroup(n,i){for(var t=i,f=0;f<n.length-1;f++){var o=t[n[f]]||{data:{}};t[n[f]]=o,t=o}return t}var generateUniformAccessObject=function(n,i){var t={data:{}};t.gl=n;for(var f=Object.keys(i),o=0;o<f.length;o++){var e=f[o],u=e.split("."),r=u[u.length-1],c=getUniformGroup(u,t),v=i[e];c.data[r]=v,c.gl=n,Object.defineProperty(c,r,{get:generateGetter(r),set:generateSetter(r,v)})}return t},generateGetter=function(n){return function(){return this.data[n].value}},GLSL_SINGLE_SETTERS={float:function(n,i,t){n.uniform1f(i,t)},vec2:function(n,i,t){n.uniform2f(i,t[0],t[1])},vec3:function(n,i,t){n.uniform3f(i,t[0],t[1],t[2])},vec4:function(n,i,t){n.uniform4f(i,t[0],t[1],t[2],t[3])},int:function(n,i,t){n.uniform1i(i,t)},ivec2:function(n,i,t){n.uniform2i(i,t[0],t[1])},ivec3:function(n,i,t){n.uniform3i(i,t[0],t[1],t[2])},ivec4:function(n,i,t){n.uniform4i(i,t[0],t[1],t[2],t[3])},bool:function(n,i,t){n.uniform1i(i,t)},bvec2:function(n,i,t){n.uniform2i(i,t[0],t[1])},bvec3:function(n,i,t){n.uniform3i(i,t[0],t[1],t[2])},bvec4:function(n,i,t){n.uniform4i(i,t[0],t[1],t[2],t[3])},mat2:function(n,i,t){n.uniformMatrix2fv(i,!1,t)},mat3:function(n,i,t){n.uniformMatrix3fv(i,!1,t)},mat4:function(n,i,t){n.uniformMatrix4fv(i,!1,t)},sampler2D:function(n,i,t){n.uniform1i(i,t)}},GLSL_ARRAY_SETTERS={float:function(n,i,t){n.uniform1fv(i,t)},vec2:function(n,i,t){n.uniform2fv(i,t)},vec3:function(n,i,t){n.uniform3fv(i,t)},vec4:function(n,i,t){n.uniform4fv(i,t)},int:function(n,i,t){n.uniform1iv(i,t)},ivec2:function(n,i,t){n.uniform2iv(i,t)},ivec3:function(n,i,t){n.uniform3iv(i,t)},ivec4:function(n,i,t){n.uniform4iv(i,t)},bool:function(n,i,t){n.uniform1iv(i,t)},bvec2:function(n,i,t){n.uniform2iv(i,t)},bvec3:function(n,i,t){n.uniform3iv(i,t)},bvec4:function(n,i,t){n.uniform4iv(i,t)},sampler2D:function(n,i,t){n.uniform1iv(i,t)}};module.exports=generateUniformAccessObject;
},{}],42:[function(require,module,exports){
module.exports={compileProgram:require("./compileProgram"),defaultValue:require("./defaultValue"),extractAttributes:require("./extractAttributes"),extractUniforms:require("./extractUniforms"),generateUniformAccessObject:require("./generateUniformAccessObject"),setPrecision:require("./setPrecision"),mapSize:require("./mapSize"),mapType:require("./mapType")};
},{"./compileProgram":37,"./defaultValue":38,"./extractAttributes":39,"./extractUniforms":40,"./generateUniformAccessObject":41,"./mapSize":43,"./mapType":44,"./setPrecision":45}],43:[function(require,module,exports){
var mapSize=function(e){return GLSL_TO_SIZE[e]},GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};module.exports=mapSize;
},{}],44:[function(require,module,exports){
var mapType=function(L,T){if(!GL_TABLE){var _=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(var O=0;O<_.length;++O){var e=_[O];GL_TABLE[L[e]]=GL_TO_GLSL_TYPES[e]}}return GL_TABLE[T]},GL_TABLE=null,GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};module.exports=mapType;
},{}],45:[function(require,module,exports){
var setPrecision=function(i,e){return"precision"!==i.substring(0,9)?"precision "+e+" float;\n"+i:i};module.exports=setPrecision;
},{}],46:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _core=require("../core"),core=_interopRequireWildcard(_core),_ismobilejs=require("ismobilejs"),_ismobilejs2=_interopRequireDefault(_ismobilejs),_accessibleTarget=require("./accessibleTarget"),_accessibleTarget2=_interopRequireDefault(_accessibleTarget);core.utils.mixins.delayMixin(core.DisplayObject.prototype,_accessibleTarget2.default);var KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2,AccessibilityManager=function(){function e(t){_classCallCheck(this,e),!_ismobilejs2.default.tablet&&!_ismobilejs2.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=DIV_TOUCH_SIZE+"px",i.style.height=DIV_TOUCH_SIZE+"px",i.style.position="absolute",i.style.top=DIV_TOUCH_POS_X+"px",i.style.left=DIV_TOUCH_POS_Y+"px",i.style.zIndex=DIV_TOUCH_ZINDEX,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width=DIV_HOOK_SIZE+"px",t.style.height=DIV_HOOK_SIZE+"px",t.style.position="absolute",t.style.top=DIV_HOOK_POS_X+"px",t.style.left=DIV_HOOK_POS_Y+"px",t.style.zIndex=DIV_HOOK_ZINDEX,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)}),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,i=t.length-1;i>=0;i--)this.updateAccessibleObjects(t[i])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,i=e.height/this.renderer.height,s=this.div;s.style.left=e.left+"px",s.style.top=e.top+"px",s.style.width=this.renderer.width+"px",s.style.height=this.renderer.height+"px";for(var n=0;n<this.children.length;n++){var r=this.children[n];if(r.renderId!==this.renderId)r._accessibleActive=!1,core.utils.removeItems(this.children,n,1),this.div.removeChild(r._accessibleDiv),this.pool.push(r._accessibleDiv),r._accessibleDiv=null,n--,0===this.children.length&&this.deactivate();else{s=r._accessibleDiv;var o=r.hitArea,l=r.worldTransform;r.hitArea?(s.style.left=(l.tx+o.x*l.a)*t+"px",s.style.top=(l.ty+o.y*l.d)*i+"px",s.style.width=o.width*l.a*t+"px",s.style.height=o.height*l.d*i+"px"):(o=r.getBounds(),this.capHitArea(o),s.style.left=o.x*t+"px",s.style.top=o.y*i+"px",s.style.width=o.width*t+"px",s.style.height=o.height*i+"px")}}this.renderId++}},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=DIV_TOUCH_SIZE+"px",t.style.height=DIV_TOUCH_SIZE+"px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=DIV_TOUCH_ZINDEX,t.style.borderStyle="none",t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleTitle||e.accessibleHint||(t.title="displayObject "+this.tabIndex),e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},e.prototype._onFocus=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){e.keyCode===KEY_CODE_TAB&&this.activate()},e.prototype._onMouseMove=function(){this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();exports.default=AccessibilityManager,core.WebGLRenderer.registerPlugin("accessibility",AccessibilityManager),core.CanvasRenderer.registerPlugin("accessibility",AccessibilityManager);
},{"../core":71,"./accessibleTarget":47,"ismobilejs":23}],47:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1};
},{}],48:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _accessibleTarget=require("./accessibleTarget");Object.defineProperty(exports,"accessibleTarget",{enumerable:!0,get:function(){return _interopRequireDefault(_accessibleTarget).default}});var _AccessibilityManager=require("./AccessibilityManager");Object.defineProperty(exports,"AccessibilityManager",{enumerable:!0,get:function(){return _interopRequireDefault(_AccessibilityManager).default}});
},{"./AccessibilityManager":46,"./accessibleTarget":47}],49:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_autoDetectRenderer=require("./autoDetectRenderer"),_Container=require("./display/Container"),_Container2=_interopRequireDefault(_Container),_ticker=require("./ticker"),_settings=require("./settings"),_settings2=_interopRequireDefault(_settings),_const=require("./const"),Application=function(){function e(t,r,i,n,s){_classCallCheck(this,e),"number"==typeof t&&(t=Object.assign({width:t,height:r||_settings2.default.RENDER_OPTIONS.height,forceCanvas:!!n,sharedTicker:!!s},i)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,_autoDetectRenderer.autoDetectRenderer)(t),this.stage=new _Container2.default,this._ticker=null,this.ticker=t.sharedTicker?_ticker.shared:new _ticker.Ticker,t.autoStart&&this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(e){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}this.stage.destroy(),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},_createClass(e,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,_const.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),e}();exports.default=Application;
},{"./autoDetectRenderer":51,"./const":52,"./display/Container":54,"./settings":107,"./ticker":127}],50:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function checkPrecision(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var r=e.slice(0);return r.unshift("precision "+t+" float;"),r}}else if("precision"!==e.trim().substring(0,9))return"precision "+t+" float;\n"+e;return e}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_settings=require("./settings"),_settings2=_interopRequireDefault(_settings),Shader=function(e){function t(r,i,n,o,s){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.call(this,r,checkPrecision(i,s||_settings2.default.PRECISION_VERTEX),checkPrecision(n,s||_settings2.default.PRECISION_FRAGMENT),void 0,o))}return _inherits(t,e),t}(_pixiGlCore.GLShader);exports.default=Shader;
},{"./settings":107,"pixi-gl-core":35}],51:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}function autoDetectRenderer(e,r,n,t){var u=e&&e.forceCanvas;return void 0!==t&&(u=t),!u&&utils.isWebGLSupported()?new _WebGLRenderer2.default(e,r,n):new _CanvasRenderer2.default(e,r,n)}exports.__esModule=!0,exports.autoDetectRenderer=autoDetectRenderer;var _utils=require("./utils"),utils=_interopRequireWildcard(_utils),_CanvasRenderer=require("./renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),_WebGLRenderer=require("./renderers/webgl/WebGLRenderer"),_WebGLRenderer2=_interopRequireDefault(_WebGLRenderer);
},{"./renderers/canvas/CanvasRenderer":83,"./renderers/webgl/WebGLRenderer":90,"./utils":131}],52:[function(require,module,exports){
"use strict";exports.__esModule=!0;var VERSION=exports.VERSION="4.7.3",PI_2=exports.PI_2=2*Math.PI,RAD_TO_DEG=exports.RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=exports.DEG_TO_RAD=Math.PI/180,RENDERER_TYPE=exports.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES=exports.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},DRAW_MODES=exports.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES=exports.SCALE_MODES={LINEAR:0,NEAREST:1},WRAP_MODES=exports.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},GC_MODES=exports.GC_MODES={AUTO:0,MANUAL:1},URL_FILE_EXTENSION=exports.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,DATA_URI=exports.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,SVG_SIZE=exports.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,SHAPES=exports.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},PRECISION=exports.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},TRANSFORM_MODE=exports.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},TEXT_GRADIENT=exports.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},UPDATE_PRIORITY=exports.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50};
},{}],53:[function(require,module,exports){
"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _math=require("../math"),Bounds=function(){function i(){_classCallCheck(this,i),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(i){return this.minX>this.maxX||this.minY>this.maxY?_math.Rectangle.EMPTY:(i=i||new _math.Rectangle(0,0,1,1),i.x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)},i.prototype.addPoint=function(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)},i.prototype.addQuad=function(i){var t=this.minX,m=this.minY,n=this.maxX,a=this.maxY,s=i[0],h=i[1];t=s<t?s:t,m=h<m?h:m,n=s>n?s:n,a=h>a?h:a,s=i[2],h=i[3],t=s<t?s:t,m=h<m?h:m,n=s>n?s:n,a=h>a?h:a,s=i[4],h=i[5],t=s<t?s:t,m=h<m?h:m,n=s>n?s:n,a=h>a?h:a,s=i[6],h=i[7],t=s<t?s:t,m=h<m?h:m,n=s>n?s:n,a=h>a?h:a,this.minX=t,this.minY=m,this.maxX=n,this.maxY=a},i.prototype.addFrame=function(i,t,m,n,a){var s=i.worldTransform,h=s.a,x=s.b,Y=s.c,X=s.d,o=s.tx,r=s.ty,e=this.minX,c=this.minY,d=this.maxX,u=this.maxY,p=h*t+Y*m+o,f=x*t+X*m+r;e=p<e?p:e,c=f<c?f:c,d=p>d?p:d,u=f>u?f:u,p=h*n+Y*m+o,f=x*n+X*m+r,e=p<e?p:e,c=f<c?f:c,d=p>d?p:d,u=f>u?f:u,p=h*t+Y*a+o,f=x*t+X*a+r,e=p<e?p:e,c=f<c?f:c,d=p>d?p:d,u=f>u?f:u,p=h*n+Y*a+o,f=x*n+X*a+r,e=p<e?p:e,c=f<c?f:c,d=p>d?p:d,u=f>u?f:u,this.minX=e,this.minY=c,this.maxX=d,this.maxY=u},i.prototype.addVertices=function(i,t,m,n){for(var a=i.worldTransform,s=a.a,h=a.b,x=a.c,Y=a.d,X=a.tx,o=a.ty,r=this.minX,e=this.minY,c=this.maxX,d=this.maxY,u=m;u<n;u+=2){var p=t[u],f=t[u+1],y=s*p+x*f+X,l=Y*f+h*p+o;r=y<r?y:r,e=l<e?l:e,c=y>c?y:c,d=l>d?l:d}this.minX=r,this.minY=e,this.maxX=c,this.maxY=d},i.prototype.addBounds=function(i){var t=this.minX,m=this.minY,n=this.maxX,a=this.maxY;this.minX=i.minX<t?i.minX:t,this.minY=i.minY<m?i.minY:m,this.maxX=i.maxX>n?i.maxX:n,this.maxY=i.maxY>a?i.maxY:a},i.prototype.addBoundsMask=function(i,t){var m=i.minX>t.minX?i.minX:t.minX,n=i.minY>t.minY?i.minY:t.minY,a=i.maxX<t.maxX?i.maxX:t.maxX,s=i.maxY<t.maxY?i.maxY:t.maxY;if(m<=a&&n<=s){var h=this.minX,x=this.minY,Y=this.maxX,X=this.maxY;this.minX=m<h?m:h,this.minY=n<x?n:x,this.maxX=a>Y?a:Y,this.maxY=s>X?s:X}},i.prototype.addBoundsArea=function(i,t){var m=i.minX>t.x?i.minX:t.x,n=i.minY>t.y?i.minY:t.y,a=i.maxX<t.x+t.width?i.maxX:t.x+t.width,s=i.maxY<t.y+t.height?i.maxY:t.y+t.height;if(m<=a&&n<=s){var h=this.minX,x=this.minY,Y=this.maxX,X=this.maxY;this.minX=m<h?m:h,this.minY=n<x?n:x,this.maxX=a>Y?a:Y,this.maxY=s>X?s:X}},i}();exports.default=Bounds;
},{"../math":76}],54:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_utils=require("../utils"),_DisplayObject2=require("./DisplayObject"),_DisplayObject3=_interopRequireDefault(_DisplayObject2),Container=function(e){function t(){_classCallCheck(this,t);var r=_possibleConstructorReturn(this,e.call(this));return r.children=[],r}return _inherits(t,e),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(e);(0,_utils.removeItems)(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var r=0;r<t;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(e);if(-1===n)return null;e.parent=null,e.transform._parentID=-1,(0,_utils.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,_utils.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},t.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=e,n="number"==typeof t?t:this.children.length,i=n-r,s=void 0;if(i>0&&i<=n){s=this.children.splice(r,i);for(var h=0;h<s.length;++h)s[h].parent=null,s[h].transform&&(s[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var o=0;o<s.length;++o)s[o].emit("removed",this);return s}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];r.visible&&r.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}r&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var i=0,s=this.children.length;i<s;i++)this.children[i].renderWebGL(e);e.flush(),r&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(e){},t.prototype._renderCanvas=function(e){},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(t){e.prototype.destroy.call(this);var r="boolean"==typeof t?t:t&&t.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(t)},_createClass(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),t}(_DisplayObject3.default);exports.default=Container,Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;
},{"../utils":131,"./DisplayObject":55}],55:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_const=require("../const"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_TransformStatic=require("./TransformStatic"),_TransformStatic2=_interopRequireDefault(_TransformStatic),_Transform=require("./Transform"),_Transform2=_interopRequireDefault(_Transform),_Bounds=require("./Bounds"),_Bounds2=_interopRequireDefault(_Bounds),_math=require("../math"),DisplayObject=function(t){function e(){_classCallCheck(this,e);var r=_possibleConstructorReturn(this,t.call(this)),n=_settings2.default.TRANSFORM_MODE===_const.TRANSFORM_MODE.STATIC?_TransformStatic2.default:_Transform2.default;return r.tempDisplayObjectParent=null,r.transform=new n,r.alpha=1,r.visible=!0,r.renderable=!0,r.parent=null,r.worldAlpha=1,r.filterArea=null,r._filters=null,r._enabledFilters=null,r._bounds=new _Bounds2.default,r._boundsID=0,r._lastBoundsID=-1,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._destroyed=!1,r}return _inherits(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new _math.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new _math.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=r,this.transform=e,n},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=s,this.skew.x=i,this.skew.y=o,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},_createClass(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(_eventemitter2.default);exports.default=DisplayObject,DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;
},{"../const":52,"../math":76,"../settings":107,"./Bounds":53,"./Transform":56,"./TransformStatic":58,"eventemitter3":21}],56:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var o=e[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,s,o){return s&&t(e.prototype,s),o&&t(e,o),e}}(),_math=require("../math"),_TransformBase2=require("./TransformBase"),_TransformBase3=_interopRequireDefault(_TransformBase2),Transform=function(t){function e(){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this));return s.position=new _math.Point(0,0),s.scale=new _math.Point(1,1),s.skew=new _math.ObservablePoint(s.updateSkew,s,0,0),s.pivot=new _math.Point(0,0),s._rotation=0,s._cx=1,s._sx=0,s._cy=0,s._sy=1,s}return _inherits(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var s=t.worldTransform,o=this.worldTransform;o.a=e.a*s.a+e.b*s.c,o.b=e.a*s.b+e.b*s.d,o.c=e.c*s.a+e.d*s.c,o.d=e.c*s.b+e.d*s.d,o.tx=e.tx*s.a+e.ty*s.c+s.tx,o.ty=e.tx*s.b+e.ty*s.d+s.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},_createClass(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(_TransformBase3.default);exports.default=Transform;
},{"../math":76,"./TransformBase":57}],57:[function(require,module,exports){
"use strict";function _classCallCheck(r,a){if(!(r instanceof a))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _math=require("../math"),TransformBase=function(){function r(){_classCallCheck(this,r),this.worldTransform=new _math.Matrix,this.localTransform=new _math.Matrix,this._worldID=0,this._parentID=0}return r.prototype.updateLocalTransform=function(){},r.prototype.updateTransform=function(r){var a=r.worldTransform,t=this.worldTransform,o=this.localTransform;t.a=o.a*a.a+o.b*a.c,t.b=o.a*a.b+o.b*a.d,t.c=o.c*a.a+o.d*a.c,t.d=o.c*a.b+o.d*a.d,t.tx=o.tx*a.a+o.ty*a.c+a.tx,t.ty=o.tx*a.b+o.ty*a.d+a.ty,this._worldID++},r}();exports.default=TransformBase,TransformBase.prototype.updateWorldTransform=TransformBase.prototype.updateTransform,TransformBase.IDENTITY=new TransformBase;
},{"../math":76}],58:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var o=e[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,s,o){return s&&t(e.prototype,s),o&&t(e,o),e}}(),_math=require("../math"),_TransformBase2=require("./TransformBase"),_TransformBase3=_interopRequireDefault(_TransformBase2),TransformStatic=function(t){function e(){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this));return s.position=new _math.ObservablePoint(s.onChange,s,0,0),s.scale=new _math.ObservablePoint(s.onChange,s,1,1),s.pivot=new _math.ObservablePoint(s.onChange,s,0,0),s.skew=new _math.ObservablePoint(s.updateSkew,s,0,0),s._rotation=0,s._cx=1,s._sx=0,s._cy=0,s._sy=1,s._localID=0,s._currentLocalID=0,s}return _inherits(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var s=t.worldTransform,o=this.worldTransform;o.a=e.a*s.a+e.b*s.c,o.b=e.a*s.b+e.b*s.d,o.c=e.c*s.a+e.d*s.c,o.d=e.c*s.b+e.d*s.d,o.tx=e.tx*s.a+e.ty*s.c+s.tx,o.ty=e.tx*s.b+e.ty*s.d+s.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},_createClass(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(_TransformBase3.default);exports.default=TransformStatic;
},{"../math":76,"./TransformBase":57}],59:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _Container2=require("../display/Container"),_Container3=_interopRequireDefault(_Container2),_RenderTexture=require("../textures/RenderTexture"),_RenderTexture2=_interopRequireDefault(_RenderTexture),_Texture=require("../textures/Texture"),_Texture2=_interopRequireDefault(_Texture),_GraphicsData=require("./GraphicsData"),_GraphicsData2=_interopRequireDefault(_GraphicsData),_Sprite=require("../sprites/Sprite"),_Sprite2=_interopRequireDefault(_Sprite),_math=require("../math"),_utils=require("../utils"),_const=require("../const"),_Bounds=require("../display/Bounds"),_Bounds2=_interopRequireDefault(_Bounds),_bezierCurveTo2=require("./utils/bezierCurveTo"),_bezierCurveTo3=_interopRequireDefault(_bezierCurveTo2),_CanvasRenderer=require("../renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),canvasRenderer=void 0,tempMatrix=new _math.Matrix,tempPoint=new _math.Point,tempColor1=new Float32Array(4),tempColor2=new Float32Array(4),Graphics=function(t){function e(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this));return i.fillAlpha=1,i.lineWidth=0,i.nativeLines=r,i.lineColor=0,i.graphicsData=[],i.tint=16777215,i._prevTint=16777215,i.blendMode=_const.BLEND_MODES.NORMAL,i.currentPath=null,i._webGL={},i.isMask=!1,i.boundsPadding=0,i._localBounds=new _Bounds2.default,i.dirty=0,i.fastRectDirty=-1,i.clearDirty=0,i.boundsDirty=-1,i.cachedSpriteDirty=!1,i._spriteRect=null,i._fastRect=!1,i}return _inherits(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var r=0;r<this.graphicsData.length;++r)t.graphicsData.push(this.graphicsData[r].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this.currentPath)if(this.currentPath.shape.points.length){var i=new _math.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var r=new _math.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,n=0,s=0;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],o=a[a.length-1],l=1;l<=20;++l){var p=l/20;n=h+(t-h)*p,s=o+(e-o)*p,a.push(n+(t+(r-t)*p-n)*p,s+(e+(i-e)*p-s)*p)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,r,i,a,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,h=s[s.length-2],o=s[s.length-1];return s.length-=2,(0,_bezierCurveTo3.default)(h,o,t,e,r,i,a,n,s),this.dirty++,this},e.prototype.arcTo=function(t,e,r,i,a){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var n=this.currentPath.shape.points,s=n[n.length-2],h=n[n.length-1],o=h-e,l=s-t,p=i-e,u=r-t,c=Math.abs(o*u-l*p);if(c<1e-8||0===a)n[n.length-2]===t&&n[n.length-1]===e||n.push(t,e);else{var d=o*o+l*l,f=p*p+u*u,_=o*p+l*u,g=a*Math.sqrt(d)/c,y=a*Math.sqrt(f)/c,v=g*_/d,P=y*_/f,R=g*u+y*l,m=g*p+y*o,w=l*(y+v),D=o*(y+v),b=u*(g+P),C=p*(g+P),T=Math.atan2(D-m,w-R),x=Math.atan2(C-m,b-R);this.arc(R+t,m+e,a,T,x,l*p>u*o)}return this.dirty++,this},e.prototype.arc=function(t,e,r,i,a){var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(i===a)return this;!n&&a<=i?a+=_const.PI_2:n&&i<=a&&(i+=_const.PI_2);var s=a-i,h=40*Math.ceil(Math.abs(s)/_const.PI_2);if(0===s)return this;var o=t+Math.cos(i)*r,l=e+Math.sin(i)*r,p=this.currentPath?this.currentPath.shape.points:null;p?p[p.length-2]===o&&p[p.length-1]===l||p.push(o,l):(this.moveTo(o,l),p=this.currentPath.shape.points);for(var u=s/(2*h),c=2*u,d=Math.cos(u),f=Math.sin(u),_=h-1,g=_%1/_,y=0;y<=_;++y){var v=y+g*y,P=u+i+c*v,R=Math.cos(P),m=-Math.sin(P);p.push((d*R+f*m)*r+t,(d*-m+f*R)*r+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,r,i){return this.drawShape(new _math.Rectangle(t,e,r,i)),this},e.prototype.drawRoundedRect=function(t,e,r,i,a){return this.drawShape(new _math.RoundedRectangle(t,e,r,i,a)),this},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new _math.Circle(t,e,r)),this},e.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new _math.Ellipse(t,e,r,i)),this},e.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof _math.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}var a=new _math.Polygon(e);return a.closed=r,this.drawShape(a),this},e.prototype.drawStar=function(t,e,r,i,a){var n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;a=a||i/2;for(var s=-1*Math.PI/2+n,h=2*r,o=_const.PI_2/h,l=[],p=0;p<h;p++){var u=p%2?a:i,c=p*o+s;l.push(t+u*Math.cos(c),e+u*Math.sin(c))}return this.drawPolygon(l)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_const.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new _Sprite2.default(new _Texture2.default(_Texture2.default.WHITE)));var r=this._spriteRect;if(16777215===this.tint)r.tint=this.graphicsData[0].fillColor;else{var i=tempColor1,a=tempColor2;(0,_utils.hex2rgb)(this.graphicsData[0].fillColor,i),(0,_utils.hex2rgb)(this.tint,a),i[0]*=a[0],i[1]*=a[1],i[2]*=a[2],r.tint=(0,_utils.rgb2hex)(i)}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=e.width,r._texture._frame.height=e.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-e.x/e.width,-e.y/e.height),r._onAnchorUpdate(),r._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);for(var e=this.graphicsData,r=0;r<e.length;++r){var i=e[r];if(i.fill&&(i.shape&&i.shape.contains(tempPoint.x,tempPoint.y))){if(i.holes)for(var a=0;a<i.holes.length;a++){var n=i.holes[a];if(n.contains(tempPoint.x,tempPoint.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var a=0,n=0,s=0,h=0,o=0,l=0;l<this.graphicsData.length;l++){var p=this.graphicsData[l],u=p.type,c=p.lineWidth;if(a=p.shape,u===_const.SHAPES.RECT||u===_const.SHAPES.RREC)n=a.x-c/2,s=a.y-c/2,h=a.width+c,o=a.height+c,t=n<t?n:t,e=n+h>e?n+h:e,r=s<r?s:r,i=s+o>i?s+o:i;else if(u===_const.SHAPES.CIRC)n=a.x,s=a.y,h=a.radius+c/2,o=a.radius+c/2,t=n-h<t?n-h:t,e=n+h>e?n+h:e,r=s-o<r?s-o:r,i=s+o>i?s+o:i;else if(u===_const.SHAPES.ELIP)n=a.x,s=a.y,h=a.width+c/2,o=a.height+c/2,t=n-h<t?n-h:t,e=n+h>e?n+h:e,r=s-o<r?s-o:r,i=s+o>i?s+o:i;else for(var d=a.points,f=0,_=0,g=0,y=0,v=0,P=0,R=0,m=0,w=0;w+2<d.length;w+=2)n=d[w],s=d[w+1],f=d[w+2],_=d[w+3],g=Math.abs(f-n),y=Math.abs(_-s),o=c,(h=Math.sqrt(g*g+y*y))<1e-9||(v=(o/h*y+g)/2,P=(o/h*g+y)/2,R=(f+n)/2,m=(_+s)/2,t=R-v<t?R-v:t,e=R+v>e?R+v:e,r=m-P<r?m-P:r,i=m+P>i?m+P:i)}else t=0,e=0,r=0,i=0;var D=this.boundsPadding;this._localBounds.minX=t-D,this._localBounds.maxX=e+D,this._localBounds.minY=r-D,this._localBounds.maxY=i+D},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new _GraphicsData2.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===_const.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),i=_RenderTexture2.default.create(r.width,r.height,t,e);canvasRenderer||(canvasRenderer=new _CanvasRenderer2.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(tempMatrix),tempMatrix.invert(),tempMatrix.tx-=r.x,tempMatrix.ty-=r.y,canvasRenderer.render(this,i,!0,tempMatrix);var a=_Texture2.default.fromCanvas(i.baseTexture._canvasRenderTarget.canvas,t,"graphics");return a.baseTexture.resolution=e,a.baseTexture.update(),a},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();for(var i in this._webgl)for(var a=0;a<this._webgl[i].data.length;++a)this._webgl[i].data[a].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(_Container3.default);exports.default=Graphics,Graphics._SPRITE_TEXTURE=null;
},{"../const":52,"../display/Bounds":53,"../display/Container":54,"../math":76,"../renderers/canvas/CanvasRenderer":83,"../sprites/Sprite":108,"../textures/RenderTexture":119,"../textures/Texture":121,"../utils":131,"./GraphicsData":60,"./utils/bezierCurveTo":62}],60:[function(require,module,exports){
"use strict";function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var GraphicsData=function(){function i(t,l,s,h,e,n,o,a){_classCallCheck(this,i),this.lineWidth=t,this.nativeLines=o,this.lineColor=l,this.lineAlpha=s,this._lineTint=l,this.fillColor=h,this.fillAlpha=e,this._fillTint=h,this.fill=n,this.holes=[],this.shape=a,this.type=a.type}return i.prototype.clone=function(){return new i(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},i.prototype.addHole=function(i){this.holes.push(i)},i.prototype.destroy=function(){this.shape=null,this.holes=null},i}();exports.default=GraphicsData;
},{}],61:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _CanvasRenderer=require("../../renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),_const=require("../../const"),CanvasGraphicsRenderer=function(){function e(t){_classCallCheck(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,l=t.context,r=e.worldAlpha,i=e.transform.worldTransform,n=t.resolution;this._prevTint!==this.tint&&(this.dirty=!0),l.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1),t.setBlendMode(e.blendMode);for(var o=0;o<e.graphicsData.length;o++){var a=e.graphicsData[o],s=a.shape,h=a._fillTint,p=a._lineTint;if(l.lineWidth=a.lineWidth,a.type===_const.SHAPES.POLY){l.beginPath(),this.renderPolygon(s.points,s.closed,l);for(var f=0;f<a.holes.length;f++)this.renderPolygon(a.holes[f].points,!0,l);a.fill&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fill()),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.stroke())}else if(a.type===_const.SHAPES.RECT)(a.fillColor||0===a.fillColor)&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fillRect(s.x,s.y,s.width,s.height)),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.strokeRect(s.x,s.y,s.width,s.height));else if(a.type===_const.SHAPES.CIRC)l.beginPath(),l.arc(s.x,s.y,s.radius,0,2*Math.PI),l.closePath(),a.fill&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fill()),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.stroke());else if(a.type===_const.SHAPES.ELIP){var d=2*s.width,u=2*s.height,c=s.x-d/2,g=s.y-u/2;l.beginPath();var v=d/2*.5522848,y=u/2*.5522848,C=c+d,b=g+u,S=c+d/2,T=g+u/2;l.moveTo(c,T),l.bezierCurveTo(c,T-y,S-v,g,S,g),l.bezierCurveTo(S+v,g,C,T-y,C,T),l.bezierCurveTo(C,T+y,S+v,b,S,b),l.bezierCurveTo(S-v,b,c,T+y,c,T),l.closePath(),a.fill&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fill()),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.stroke())}else if(a.type===_const.SHAPES.RREC){var A=s.x,_=s.y,P=s.width,R=s.height,k=s.radius,x=Math.min(P,R)/2|0;k=k>x?x:k,l.beginPath(),l.moveTo(A,_+k),l.lineTo(A,_+R-k),l.quadraticCurveTo(A,_+R,A+k,_+R),l.lineTo(A+P-k,_+R),l.quadraticCurveTo(A+P,_+R,A+P,_+R-k),l.lineTo(A+P,_+k),l.quadraticCurveTo(A+P,_,A+P-k,_),l.lineTo(A+k,_),l.quadraticCurveTo(A,_,A,_+k),l.closePath(),(a.fillColor||0===a.fillColor)&&(l.globalAlpha=a.fillAlpha*r,l.fillStyle="#"+("00000"+(0|h).toString(16)).substr(-6),l.fill()),a.lineWidth&&(l.globalAlpha=a.lineAlpha*r,l.strokeStyle="#"+("00000"+(0|p).toString(16)).substr(-6),l.stroke())}}},e.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint;for(var t=(e.tint>>16&255)/255,l=(e.tint>>8&255)/255,r=(255&e.tint)/255,i=0;i<e.graphicsData.length;++i){var n=e.graphicsData[i],o=0|n.fillColor,a=0|n.lineColor;n._fillTint=((o>>16&255)/255*t*255<<16)+((o>>8&255)/255*l*255<<8)+(255&o)/255*r*255,n._lineTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*l*255<<8)+(255&a)/255*r*255}},e.prototype.renderPolygon=function(e,t,l){l.moveTo(e[0],e[1]);for(var r=1;r<e.length/2;++r)l.lineTo(e[2*r],e[2*r+1]);t&&l.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();exports.default=CanvasGraphicsRenderer,_CanvasRenderer2.default.registerPlugin("graphics",CanvasGraphicsRenderer);
},{"../../const":52,"../../renderers/canvas/CanvasRenderer":83}],62:[function(require,module,exports){
"use strict";function bezierCurveTo(e,r,u,o,t,s,i,v){var n=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],p=0,a=0,d=0,f=0,h=0;n.push(e,r);for(var l=1,b=0;l<=20;++l)b=l/20,p=1-b,a=p*p,d=a*p,f=b*b,h=f*b,n.push(d*e+3*a*b*u+3*p*f*t+h*i,d*r+3*a*b*o+3*p*f*s+h*v);return n}exports.__esModule=!0,exports.default=bezierCurveTo;
},{}],63:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _utils=require("../../utils"),_const=require("../../const"),_ObjectRenderer2=require("../../renderers/webgl/utils/ObjectRenderer"),_ObjectRenderer3=_interopRequireDefault(_ObjectRenderer2),_WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),_WebGLRenderer2=_interopRequireDefault(_WebGLRenderer),_WebGLGraphicsData=require("./WebGLGraphicsData"),_WebGLGraphicsData2=_interopRequireDefault(_WebGLGraphicsData),_PrimitiveShader=require("./shaders/PrimitiveShader"),_PrimitiveShader2=_interopRequireDefault(_PrimitiveShader),_buildPoly=require("./utils/buildPoly"),_buildPoly2=_interopRequireDefault(_buildPoly),_buildRectangle=require("./utils/buildRectangle"),_buildRectangle2=_interopRequireDefault(_buildRectangle),_buildRoundedRectangle=require("./utils/buildRoundedRectangle"),_buildRoundedRectangle2=_interopRequireDefault(_buildRoundedRectangle),_buildCircle=require("./utils/buildCircle"),_buildCircle2=_interopRequireDefault(_buildCircle),GraphicsRenderer=function(e){function t(r){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,r));return i.graphicsDataPool=[],i.primitiveShader=null,i.gl=r.gl,i.CONTEXT_UID=0,i}return _inherits(t,e),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new _PrimitiveShader2.default(this.gl)},t.prototype.destroy=function(){_ObjectRenderer3.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(e){var t=this.renderer,r=t.gl,i=void 0,a=e._webGL[this.CONTEXT_UID];a&&e.dirty===a.dirty||(this.updateGraphics(e),a=e._webGL[this.CONTEXT_UID]);var n=this.primitiveShader;t.bindShader(n),t.state.setBlendMode(e.blendMode);for(var l=0,o=a.data.length;l<o;l++){i=a.data[l];var s=i.shader;t.bindShader(s),s.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),s.uniforms.tint=(0,_utils.hex2rgb)(e.tint),s.uniforms.alpha=e.worldAlpha,t.bindVao(i.vao),i.nativeLines?r.drawArrays(r.LINES,0,i.points.length/6):i.vao.draw(r.TRIANGLE_STRIP,i.indices.length)}},t.prototype.updateGraphics=function(e){var t=this.renderer.gl,r=e._webGL[this.CONTEXT_UID];if(r||(r=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),r.dirty=e.dirty,e.clearDirty!==r.clearDirty){r.clearDirty=e.clearDirty;for(var i=0;i<r.data.length;i++)this.graphicsDataPool.push(r.data[i]);r.data.length=0,r.lastIndex=0}for(var a=void 0,n=void 0,l=r.lastIndex;l<e.graphicsData.length;l++){var o=e.graphicsData[l];a=this.getWebGLData(r,0),o.nativeLines&&o.lineWidth&&(n=this.getWebGLData(r,0,!0),r.lastIndex++),o.type===_const.SHAPES.POLY&&(0,_buildPoly2.default)(o,a,n),o.type===_const.SHAPES.RECT?(0,_buildRectangle2.default)(o,a,n):o.type===_const.SHAPES.CIRC||o.type===_const.SHAPES.ELIP?(0,_buildCircle2.default)(o,a,n):o.type===_const.SHAPES.RREC&&(0,_buildRoundedRectangle2.default)(o,a,n),r.lastIndex++}this.renderer.bindVao(null);for(var s=0;s<r.data.length;s++)a=r.data[s],a.dirty&&a.upload()},t.prototype.getWebGLData=function(e,t,r){var i=e.data[e.data.length-1];return(!i||i.nativeLines!==r||i.points.length>32e4)&&(i=this.graphicsDataPool.pop()||new _WebGLGraphicsData2.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),i.nativeLines=r,i.reset(t),e.data.push(i)),i.dirty=!0,i},t}(_ObjectRenderer3.default);exports.default=GraphicsRenderer,_WebGLRenderer2.default.registerPlugin("graphics",GraphicsRenderer);
},{"../../const":52,"../../renderers/webgl/WebGLRenderer":90,"../../renderers/webgl/utils/ObjectRenderer":100,"../../utils":131,"./WebGLGraphicsData":64,"./shaders/PrimitiveShader":65,"./utils/buildCircle":66,"./utils/buildPoly":68,"./utils/buildRectangle":69,"./utils/buildRoundedRectangle":70}],64:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),WebGLGraphicsData=function(){function t(i,e,s){_classCallCheck(this,t),this.gl=i,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=_pixiGlCore2.default.GLBuffer.createVertexBuffer(i),this.indexBuffer=_pixiGlCore2.default.GLBuffer.createIndexBuffer(i),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=e,this.vao=new _pixiGlCore2.default.VertexArrayObject(i,s).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,i.FLOAT,!1,24,0).addAttribute(this.buffer,e.attributes.aColor,i.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();exports.default=WebGLGraphicsData;
},{"pixi-gl-core":35}],65:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _Shader2=require("../../../Shader"),_Shader3=_interopRequireDefault(_Shader2),PrimitiveShader=function(e){function t(r){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.call(this,r,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return _inherits(t,e),t}(_Shader3.default);exports.default=PrimitiveShader;
},{"../../../Shader":50}],66:[function(require,module,exports){
"use strict";function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function buildCircle(i,t,e){var r=i.shape,u=r.x,s=r.y,l=void 0,o=void 0;if(i.type===_const.SHAPES.CIRC?(l=r.radius,o=r.radius):(l=r.width,o=r.height),0!==l&&0!==o){var a=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),h=2*Math.PI/a;if(i.fill){var n=(0,_utils.hex2rgb)(i.fillColor),d=i.fillAlpha,p=n[0]*d,f=n[1]*d,_=n[2]*d,c=t.points,M=t.indices,v=c.length/6;M.push(v);for(var b=0;b<a+1;b++)c.push(u,s,p,f,_,d),c.push(u+Math.sin(h*b)*l,s+Math.cos(h*b)*o,p,f,_,d),M.push(v++,v++);M.push(v-1)}if(i.lineWidth){var q=i.points;i.points=[];for(var C=0;C<a+1;C++)i.points.push(u+Math.sin(h*C)*l,s+Math.cos(h*C)*o);(0,_buildLine2.default)(i,t,e),i.points=q}}}exports.__esModule=!0,exports.default=buildCircle;var _buildLine=require("./buildLine"),_buildLine2=_interopRequireDefault(_buildLine),_const=require("../../../const"),_utils=require("../../../utils");
},{"../../../const":52,"../../../utils":131,"./buildLine":67}],67:[function(require,module,exports){
"use strict";function buildLine(h,s){var t=h.points;if(0!==t.length){var i=new _math.Point(t[0],t[1]),u=new _math.Point(t[t.length-2],t[t.length-1]);if(i.x===u.x&&i.y===u.y){t=t.slice(),t.pop(),t.pop(),u=new _math.Point(t[t.length-2],t[t.length-1]);var e=u.x+.5*(i.x-u.x),n=u.y+.5*(i.y-u.y);t.unshift(e,n),t.push(e,n)}var p=s.points,l=s.indices,r=t.length/2,a=t.length,o=p.length/6,v=h.lineWidth/2,f=(0,_utils.hex2rgb)(h.lineColor),g=h.lineAlpha,x=f[0]*g,_=f[1]*g,d=f[2]*g,b=t[0],q=t[1],M=t[2],c=t[3],m=0,y=0,L=-(q-c),w=b-M,P=0,A=0,C=0,N=0,W=Math.sqrt(L*L+w*w);L/=W,w/=W,L*=v,w*=v,p.push(b-L,q-w,x,_,d,g),p.push(b+L,q+w,x,_,d,g);for(var j=1;j<r-1;++j){b=t[2*(j-1)],q=t[2*(j-1)+1],M=t[2*j],c=t[2*j+1],m=t[2*(j+1)],y=t[2*(j+1)+1],L=-(q-c),w=b-M,W=Math.sqrt(L*L+w*w),L/=W,w/=W,L*=v,w*=v,P=-(c-y),A=M-m,W=Math.sqrt(P*P+A*A),P/=W,A/=W,P*=v,A*=v;var k=-w+q-(-w+c),z=-L+M-(-L+b),B=(-L+b)*(-w+c)-(-L+M)*(-w+q),D=-A+y-(-A+c),E=-P+M-(-P+m),F=(-P+m)*(-A+c)-(-P+M)*(-A+y),G=k*E-D*z;if(Math.abs(G)<.1)G+=10.1,p.push(M-L,c-w,x,_,d,g),p.push(M+L,c+w,x,_,d,g);else{var H=(z*F-E*B)/G,I=(D*B-k*F)/G;(H-M)*(H-M)+(I-c)*(I-c)>196*v*v?(C=L-P,N=w-A,W=Math.sqrt(C*C+N*N),C/=W,N/=W,C*=v,N*=v,p.push(M-C,c-N),p.push(x,_,d,g),p.push(M+C,c+N),p.push(x,_,d,g),p.push(M-C,c-N),p.push(x,_,d,g),a++):(p.push(H,I),p.push(x,_,d,g),p.push(M-(H-M),c-(I-c)),p.push(x,_,d,g))}}b=t[2*(r-2)],q=t[2*(r-2)+1],M=t[2*(r-1)],c=t[2*(r-1)+1],L=-(q-c),w=b-M,W=Math.sqrt(L*L+w*w),L/=W,w/=W,L*=v,w*=v,p.push(M-L,c-w),p.push(x,_,d,g),p.push(M+L,c+w),p.push(x,_,d,g),l.push(o);for(var J=0;J<a;++J)l.push(o++);l.push(o-1)}}function buildNativeLine(h,s){var t=0,i=h.points;if(0!==i.length){var u=s.points,e=i.length/2,n=(0,_utils.hex2rgb)(h.lineColor),p=h.lineAlpha,l=n[0]*p,r=n[1]*p,a=n[2]*p;for(t=1;t<e;t++){var o=i[2*(t-1)],v=i[2*(t-1)+1],f=i[2*t],g=i[2*t+1];u.push(o,v),u.push(l,r,a,p),u.push(f,g),u.push(l,r,a,p)}}}exports.__esModule=!0,exports.default=function(h,s,t){h.nativeLines?buildNativeLine(h,t):buildLine(h,s)};var _math=require("../../../math"),_utils=require("../../../utils");
},{"../../../math":76,"../../../utils":131}],68:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function buildPoly(e,i,u){e.points=e.shape.points.slice();var t=e.points;if(e.fill&&t.length>=6){for(var l=[],r=e.holes,n=0;n<r.length;n++){var s=r[n];l.push(t.length/2),t=t.concat(s.points)}var o=i.points,a=i.indices,p=t.length/2,h=(0,_utils.hex2rgb)(e.fillColor),f=e.fillAlpha,_=h[0]*f,d=h[1]*f,c=h[2]*f,b=(0,_earcut2.default)(t,l,2);if(!b)return;for(var g=o.length/6,v=0;v<b.length;v+=3)a.push(b[v]+g),a.push(b[v]+g),a.push(b[v+1]+g),a.push(b[v+2]+g),a.push(b[v+2]+g);for(var q=0;q<p;q++)o.push(t[2*q],t[2*q+1],_,d,c,f)}e.lineWidth>0&&(0,_buildLine2.default)(e,i,u)}exports.__esModule=!0,exports.default=buildPoly;var _buildLine=require("./buildLine"),_buildLine2=_interopRequireDefault(_buildLine),_utils=require("../../../utils"),_earcut=require("earcut"),_earcut2=_interopRequireDefault(_earcut);
},{"../../../utils":131,"./buildLine":67,"earcut":20}],69:[function(require,module,exports){
"use strict";function _interopRequireDefault(i){return i&&i.__esModule?i:{default:i}}function buildRectangle(i,e,u){var l=i.shape,t=l.x,s=l.y,n=l.width,p=l.height;if(i.fill){var r=(0,_utils.hex2rgb)(i.fillColor),h=i.fillAlpha,d=r[0]*h,o=r[1]*h,a=r[2]*h,f=e.points,_=e.indices,b=f.length/6;f.push(t,s),f.push(d,o,a,h),f.push(t+n,s),f.push(d,o,a,h),f.push(t,s+p),f.push(d,o,a,h),f.push(t+n,s+p),f.push(d,o,a,h),_.push(b,b,b+1,b+2,b+3,b+3)}if(i.lineWidth){var c=i.points;i.points=[t,s,t+n,s,t+n,s+p,t,s+p,t,s],(0,_buildLine2.default)(i,e,u),i.points=c}}exports.__esModule=!0,exports.default=buildRectangle;var _buildLine=require("./buildLine"),_buildLine2=_interopRequireDefault(_buildLine),_utils=require("../../../utils");
},{"../../../utils":131,"./buildLine":67}],70:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function buildRoundedRectangle(e,t,u){var i=e.shape,r=i.x,l=i.y,n=i.width,a=i.height,d=i.radius,s=[];if(s.push(r,l+d),quadraticBezierCurve(r,l+a-d,r,l+a,r+d,l+a,s),quadraticBezierCurve(r+n-d,l+a,r+n,l+a,r+n,l+a-d,s),quadraticBezierCurve(r+n,l+d,r+n,l,r+n-d,l,s),quadraticBezierCurve(r+d,l,r,l,r,l+d+1e-10,s),e.fill){for(var o=(0,_utils.hex2rgb)(e.fillColor),f=e.fillAlpha,h=o[0]*f,p=o[1]*f,c=o[2]*f,_=t.points,g=t.indices,v=_.length/6,q=(0,_earcut2.default)(s,null,2),b=0,P=q.length;b<P;b+=3)g.push(q[b]+v),g.push(q[b]+v),g.push(q[b+1]+v),g.push(q[b+2]+v),g.push(q[b+2]+v);for(var R=0,C=s.length;R<C;R++)_.push(s[R],s[++R],h,p,c,f)}if(e.lineWidth){var z=e.points;e.points=s,(0,_buildLine2.default)(e,t,u),e.points=z}}function getPt(e,t,u){return e+(t-e)*u}function quadraticBezierCurve(e,t,u,i,r,l){for(var n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],a=n,d=0,s=0,o=0,f=0,h=0,p=0,c=0,_=0;c<=20;++c)_=c/20,d=getPt(e,u,_),s=getPt(t,i,_),o=getPt(u,r,_),f=getPt(i,l,_),h=getPt(d,o,_),p=getPt(s,f,_),a.push(h,p);return a}exports.__esModule=!0,exports.default=buildRoundedRectangle;var _earcut=require("earcut"),_earcut2=_interopRequireDefault(_earcut),_buildLine=require("./buildLine"),_buildLine2=_interopRequireDefault(_buildLine),_utils=require("../../../utils");
},{"../../../utils":131,"./buildLine":67,"earcut":20}],71:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.autoDetectRenderer=exports.Application=exports.Filter=exports.SpriteMaskFilter=exports.Quad=exports.RenderTarget=exports.ObjectRenderer=exports.WebGLManager=exports.Shader=exports.CanvasRenderTarget=exports.TextureUvs=exports.VideoBaseTexture=exports.BaseRenderTexture=exports.RenderTexture=exports.BaseTexture=exports.TextureMatrix=exports.Texture=exports.Spritesheet=exports.CanvasGraphicsRenderer=exports.GraphicsRenderer=exports.GraphicsData=exports.Graphics=exports.TextMetrics=exports.TextStyle=exports.Text=exports.SpriteRenderer=exports.CanvasTinter=exports.CanvasSpriteRenderer=exports.Sprite=exports.TransformBase=exports.TransformStatic=exports.Transform=exports.Container=exports.DisplayObject=exports.Bounds=exports.glCore=exports.WebGLRenderer=exports.CanvasRenderer=exports.ticker=exports.utils=exports.settings=void 0;var _const=require("./const");Object.keys(_const).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _const[e]}})});var _math=require("./math");Object.keys(_math).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _math[e]}})});var _pixiGlCore=require("pixi-gl-core");Object.defineProperty(exports,"glCore",{enumerable:!0,get:function(){return _interopRequireDefault(_pixiGlCore).default}});var _Bounds=require("./display/Bounds");Object.defineProperty(exports,"Bounds",{enumerable:!0,get:function(){return _interopRequireDefault(_Bounds).default}});var _DisplayObject=require("./display/DisplayObject");Object.defineProperty(exports,"DisplayObject",{enumerable:!0,get:function(){return _interopRequireDefault(_DisplayObject).default}});var _Container=require("./display/Container");Object.defineProperty(exports,"Container",{enumerable:!0,get:function(){return _interopRequireDefault(_Container).default}});var _Transform=require("./display/Transform");Object.defineProperty(exports,"Transform",{enumerable:!0,get:function(){return _interopRequireDefault(_Transform).default}});var _TransformStatic=require("./display/TransformStatic");Object.defineProperty(exports,"TransformStatic",{enumerable:!0,get:function(){return _interopRequireDefault(_TransformStatic).default}});var _TransformBase=require("./display/TransformBase");Object.defineProperty(exports,"TransformBase",{enumerable:!0,get:function(){return _interopRequireDefault(_TransformBase).default}});var _Sprite=require("./sprites/Sprite");Object.defineProperty(exports,"Sprite",{enumerable:!0,get:function(){return _interopRequireDefault(_Sprite).default}});var _CanvasSpriteRenderer=require("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(exports,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasSpriteRenderer).default}});var _CanvasTinter=require("./sprites/canvas/CanvasTinter");Object.defineProperty(exports,"CanvasTinter",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasTinter).default}});var _SpriteRenderer=require("./sprites/webgl/SpriteRenderer");Object.defineProperty(exports,"SpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_SpriteRenderer).default}});var _Text=require("./text/Text");Object.defineProperty(exports,"Text",{enumerable:!0,get:function(){return _interopRequireDefault(_Text).default}});var _TextStyle=require("./text/TextStyle");Object.defineProperty(exports,"TextStyle",{enumerable:!0,get:function(){return _interopRequireDefault(_TextStyle).default}});var _TextMetrics=require("./text/TextMetrics");Object.defineProperty(exports,"TextMetrics",{enumerable:!0,get:function(){return _interopRequireDefault(_TextMetrics).default}});var _Graphics=require("./graphics/Graphics");Object.defineProperty(exports,"Graphics",{enumerable:!0,get:function(){return _interopRequireDefault(_Graphics).default}});var _GraphicsData=require("./graphics/GraphicsData");Object.defineProperty(exports,"GraphicsData",{enumerable:!0,get:function(){return _interopRequireDefault(_GraphicsData).default}});var _GraphicsRenderer=require("./graphics/webgl/GraphicsRenderer");Object.defineProperty(exports,"GraphicsRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_GraphicsRenderer).default}});var _CanvasGraphicsRenderer=require("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(exports,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasGraphicsRenderer).default}});var _Spritesheet=require("./textures/Spritesheet");Object.defineProperty(exports,"Spritesheet",{enumerable:!0,get:function(){return _interopRequireDefault(_Spritesheet).default}});var _Texture=require("./textures/Texture");Object.defineProperty(exports,"Texture",{enumerable:!0,get:function(){return _interopRequireDefault(_Texture).default}});var _TextureMatrix=require("./textures/TextureMatrix");Object.defineProperty(exports,"TextureMatrix",{enumerable:!0,get:function(){return _interopRequireDefault(_TextureMatrix).default}});var _BaseTexture=require("./textures/BaseTexture");Object.defineProperty(exports,"BaseTexture",{enumerable:!0,get:function(){return _interopRequireDefault(_BaseTexture).default}});var _RenderTexture=require("./textures/RenderTexture");Object.defineProperty(exports,"RenderTexture",{enumerable:!0,get:function(){return _interopRequireDefault(_RenderTexture).default}});var _BaseRenderTexture=require("./textures/BaseRenderTexture");Object.defineProperty(exports,"BaseRenderTexture",{enumerable:!0,get:function(){return _interopRequireDefault(_BaseRenderTexture).default}});var _VideoBaseTexture=require("./textures/VideoBaseTexture");Object.defineProperty(exports,"VideoBaseTexture",{enumerable:!0,get:function(){return _interopRequireDefault(_VideoBaseTexture).default}});var _TextureUvs=require("./textures/TextureUvs");Object.defineProperty(exports,"TextureUvs",{enumerable:!0,get:function(){return _interopRequireDefault(_TextureUvs).default}});var _CanvasRenderTarget=require("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(exports,"CanvasRenderTarget",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasRenderTarget).default}});var _Shader=require("./Shader");Object.defineProperty(exports,"Shader",{enumerable:!0,get:function(){return _interopRequireDefault(_Shader).default}});var _WebGLManager=require("./renderers/webgl/managers/WebGLManager");Object.defineProperty(exports,"WebGLManager",{enumerable:!0,get:function(){return _interopRequireDefault(_WebGLManager).default}});var _ObjectRenderer=require("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(exports,"ObjectRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_ObjectRenderer).default}});var _RenderTarget=require("./renderers/webgl/utils/RenderTarget");Object.defineProperty(exports,"RenderTarget",{enumerable:!0,get:function(){return _interopRequireDefault(_RenderTarget).default}});var _Quad=require("./renderers/webgl/utils/Quad");Object.defineProperty(exports,"Quad",{enumerable:!0,get:function(){return _interopRequireDefault(_Quad).default}});var _SpriteMaskFilter=require("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(exports,"SpriteMaskFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_SpriteMaskFilter).default}});var _Filter=require("./renderers/webgl/filters/Filter");Object.defineProperty(exports,"Filter",{enumerable:!0,get:function(){return _interopRequireDefault(_Filter).default}});var _Application=require("./Application");Object.defineProperty(exports,"Application",{enumerable:!0,get:function(){return _interopRequireDefault(_Application).default}});var _autoDetectRenderer=require("./autoDetectRenderer");Object.defineProperty(exports,"autoDetectRenderer",{enumerable:!0,get:function(){return _autoDetectRenderer.autoDetectRenderer}});var _utils=require("./utils"),utils=_interopRequireWildcard(_utils),_ticker=require("./ticker"),ticker=_interopRequireWildcard(_ticker),_settings=require("./settings"),_settings2=_interopRequireDefault(_settings),_CanvasRenderer=require("./renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),_WebGLRenderer=require("./renderers/webgl/WebGLRenderer"),_WebGLRenderer2=_interopRequireDefault(_WebGLRenderer);exports.settings=_settings2.default,exports.utils=utils,exports.ticker=ticker,exports.CanvasRenderer=_CanvasRenderer2.default,exports.WebGLRenderer=_WebGLRenderer2.default;
},{"./Application":49,"./Shader":50,"./autoDetectRenderer":51,"./const":52,"./display/Bounds":53,"./display/Container":54,"./display/DisplayObject":55,"./display/Transform":56,"./display/TransformBase":57,"./display/TransformStatic":58,"./graphics/Graphics":59,"./graphics/GraphicsData":60,"./graphics/canvas/CanvasGraphicsRenderer":61,"./graphics/webgl/GraphicsRenderer":63,"./math":76,"./renderers/canvas/CanvasRenderer":83,"./renderers/canvas/utils/CanvasRenderTarget":85,"./renderers/webgl/WebGLRenderer":90,"./renderers/webgl/filters/Filter":92,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":95,"./renderers/webgl/managers/WebGLManager":99,"./renderers/webgl/utils/ObjectRenderer":100,"./renderers/webgl/utils/Quad":101,"./renderers/webgl/utils/RenderTarget":102,"./settings":107,"./sprites/Sprite":108,"./sprites/canvas/CanvasSpriteRenderer":109,"./sprites/canvas/CanvasTinter":110,"./sprites/webgl/SpriteRenderer":112,"./text/Text":114,"./text/TextMetrics":115,"./text/TextStyle":116,"./textures/BaseRenderTexture":117,"./textures/BaseTexture":118,"./textures/RenderTexture":119,"./textures/Spritesheet":120,"./textures/Texture":121,"./textures/TextureMatrix":122,"./textures/TextureUvs":123,"./textures/VideoBaseTexture":124,"./ticker":127,"./utils":131,"pixi-gl-core":35}],72:[function(require,module,exports){
"use strict";function _interopRequireDefault(u){return u&&u.__esModule?u:{default:u}}function signum(u){return u<0?-1:u>0?1:0}function init(){for(var u=0;u<16;u++){var r=[];mul.push(r);for(var t=0;t<16;t++)for(var n=signum(ux[u]*ux[t]+vx[u]*uy[t]),i=signum(uy[u]*ux[t]+vy[u]*uy[t]),e=signum(ux[u]*vx[t]+vx[u]*vy[t]),o=signum(uy[u]*vx[t]+vy[u]*vy[t]),a=0;a<16;a++)if(ux[a]===n&&uy[a]===i&&vx[a]===e&&vy[a]===o){r.push(a);break}}for(var v=0;v<16;v++){var p=new _Matrix2.default;p.set(ux[v],uy[v],vx[v],vy[v],0,0),tempMatrices.push(p)}}exports.__esModule=!0;var _Matrix=require("./Matrix"),_Matrix2=_interopRequireDefault(_Matrix),ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],tempMatrices=[],mul=[];init();var GroupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(u){return ux[u]},uY:function(u){return uy[u]},vX:function(u){return vx[u]},vY:function(u){return vy[u]},inv:function(u){return 8&u?15&u:7&-u},add:function(u,r){return mul[u][r]},sub:function(u,r){return mul[u][GroupD8.inv(r)]},rotate180:function(u){return 4^u},isVertical:function(u){return 2==(3&u)},byDirection:function(u,r){return 2*Math.abs(u)<=Math.abs(r)?r>=0?GroupD8.S:GroupD8.N:2*Math.abs(r)<=Math.abs(u)?u>0?GroupD8.E:GroupD8.W:r>0?u>0?GroupD8.SE:GroupD8.SW:u>0?GroupD8.NE:GroupD8.NW},matrixAppendRotationInv:function(u,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=tempMatrices[GroupD8.inv(r)];i.tx=t,i.ty=n,u.append(i)}};exports.default=GroupD8;
},{"./Matrix":73}],73:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,i){for(var s=0;s<i.length;s++){var h=i[s];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}return function(i,s,h){return s&&t(i.prototype,s),h&&t(i,h),i}}(),_Point=require("./Point"),_Point2=_interopRequireDefault(_Point),_const=require("../const"),Matrix=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;_classCallCheck(this,t),this.a=i,this.b=s,this.c=h,this.d=n,this.tx=r,this.ty=e,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,i,s,h,n,r){return this.a=t,this.b=i,this.c=s,this.d=h,this.tx=n,this.ty=r,this},t.prototype.toArray=function(t,i){this.array||(this.array=new Float32Array(9));var s=i||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s},t.prototype.apply=function(t,i){i=i||new _Point2.default;var s=t.x,h=t.y;return i.x=this.a*s+this.c*h+this.tx,i.y=this.b*s+this.d*h+this.ty,i},t.prototype.applyInverse=function(t,i){i=i||new _Point2.default;var s=1/(this.a*this.d+this.c*-this.b),h=t.x,n=t.y;return i.x=this.d*s*h+-this.c*s*n+(this.ty*this.c-this.tx*this.d)*s,i.y=this.a*s*n+-this.b*s*h+(-this.ty*this.a+this.tx*this.b)*s,i},t.prototype.translate=function(t,i){return this.tx+=t,this.ty+=i,this},t.prototype.scale=function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this},t.prototype.rotate=function(t){var i=Math.cos(t),s=Math.sin(t),h=this.a,n=this.c,r=this.tx;return this.a=h*i-this.b*s,this.b=h*s+this.b*i,this.c=n*i-this.d*s,this.d=n*s+this.d*i,this.tx=r*i-this.ty*s,this.ty=r*s+this.ty*i,this},t.prototype.append=function(t){var i=this.a,s=this.b,h=this.c,n=this.d;return this.a=t.a*i+t.b*h,this.b=t.a*s+t.b*n,this.c=t.c*i+t.d*h,this.d=t.c*s+t.d*n,this.tx=t.tx*i+t.ty*h+this.tx,this.ty=t.tx*s+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,i,s,h,n,r,e,a,o){return this.a=Math.cos(e+o)*n,this.b=Math.sin(e+o)*n,this.c=-Math.sin(e-a)*r,this.d=Math.cos(e-a)*r,this.tx=t-(s*this.a+h*this.c),this.ty=i-(s*this.b+h*this.d),this},t.prototype.prepend=function(t){var i=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var s=this.a,h=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=h*t.a+this.d*t.c,this.d=h*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var i=this.a,s=this.b,h=this.c,n=this.d,r=-Math.atan2(-h,n),e=Math.atan2(s,i),a=Math.abs(r+e);return a<1e-5||Math.abs(_const.PI_2-a)<1e-5?(t.rotation=e,i<0&&n>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=r,t.skew.y=e),t.scale.x=Math.sqrt(i*i+s*s),t.scale.y=Math.sqrt(h*h+n*n),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,i=this.b,s=this.c,h=this.d,n=this.tx,r=t*h-i*s;return this.a=h/r,this.b=-i/r,this.c=-s/r,this.d=t/r,this.tx=(s*this.ty-h*n)/r,this.ty=-(t*this.ty-i*n)/r,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var i=new t;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},_createClass(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();exports.default=Matrix;
},{"../const":52,"./Point":75}],74:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),ObservablePoint=function(){function t(e,s){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,t),this._x=i,this._y=n,this.cb=e,this.scope=s}return t.prototype.set=function(t,e){var s=t||0,i=e||(0!==e?s:0);this._x===s&&this._y===i||(this._x=s,this._y=i,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},_createClass(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();exports.default=ObservablePoint;
},{}],75:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Point=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this.x=n,this.y=o}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,n){this.x=t||0,this.y=n||(0!==n?this.x:0)},t}();exports.default=Point;
},{}],76:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _Point=require("./Point");Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return _interopRequireDefault(_Point).default}});var _ObservablePoint=require("./ObservablePoint");Object.defineProperty(exports,"ObservablePoint",{enumerable:!0,get:function(){return _interopRequireDefault(_ObservablePoint).default}});var _Matrix=require("./Matrix");Object.defineProperty(exports,"Matrix",{enumerable:!0,get:function(){return _interopRequireDefault(_Matrix).default}});var _GroupD=require("./GroupD8");Object.defineProperty(exports,"GroupD8",{enumerable:!0,get:function(){return _interopRequireDefault(_GroupD).default}});var _Circle=require("./shapes/Circle");Object.defineProperty(exports,"Circle",{enumerable:!0,get:function(){return _interopRequireDefault(_Circle).default}});var _Ellipse=require("./shapes/Ellipse");Object.defineProperty(exports,"Ellipse",{enumerable:!0,get:function(){return _interopRequireDefault(_Ellipse).default}});var _Polygon=require("./shapes/Polygon");Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return _interopRequireDefault(_Polygon).default}});var _Rectangle=require("./shapes/Rectangle");Object.defineProperty(exports,"Rectangle",{enumerable:!0,get:function(){return _interopRequireDefault(_Rectangle).default}});var _RoundedRectangle=require("./shapes/RoundedRectangle");Object.defineProperty(exports,"RoundedRectangle",{enumerable:!0,get:function(){return _interopRequireDefault(_RoundedRectangle).default}});
},{"./GroupD8":72,"./Matrix":73,"./ObservablePoint":74,"./Point":75,"./shapes/Circle":77,"./shapes/Ellipse":78,"./shapes/Polygon":79,"./shapes/Rectangle":80,"./shapes/RoundedRectangle":81}],77:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _Rectangle=require("./Rectangle"),_Rectangle2=_interopRequireDefault(_Rectangle),_const=require("../../const"),Circle=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,t),this.x=e,this.y=i,this.radius=s,this.type=_const.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,s=this.x-t,n=this.y-e;return s*=s,n*=n,s+n<=i},t.prototype.getBounds=function(){return new _Rectangle2.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();exports.default=Circle;
},{"../../const":52,"./Rectangle":80}],78:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _Rectangle=require("./Rectangle"),_Rectangle2=_interopRequireDefault(_Rectangle),_const=require("../../const"),Ellipse=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,t),this.x=e,this.y=i,this.width=h,this.height=n,this.type=_const.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,h=(e-this.y)/this.height;return i*=i,h*=h,i+h<=1},t.prototype.getBounds=function(){return new _Rectangle2.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();exports.default=Ellipse;
},{"../../const":52,"./Rectangle":80}],79:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _Point=require("../Point"),_Point2=_interopRequireDefault(_Point),_const=require("../../const"),Polygon=function(){function t(){for(var n=arguments.length,o=Array(n),e=0;e<n;e++)o[e]=arguments[e];if(_classCallCheck(this,t),Array.isArray(o[0])&&(o=o[0]),o[0]instanceof _Point2.default){for(var i=[],s=0,r=o.length;s<r;s++)i.push(o[s].x,o[s].y);o=i}this.closed=!0,this.points=o,this.type=_const.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,n){for(var o=!1,e=this.points.length/2,i=0,s=e-1;i<e;s=i++){var r=this.points[2*i],a=this.points[2*i+1],l=this.points[2*s],u=this.points[2*s+1];a>n!=u>n&&t<(n-a)/(u-a)*(l-r)+r&&(o=!o)}return o},t}();exports.default=Polygon;
},{"../../const":52,"../Point":75}],80:[function(require,module,exports){
"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,i){for(var h=0;h<i.length;h++){var e=i[h];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,h,e){return h&&t(i.prototype,h),e&&t(i,e),i}}(),_const=require("../../const"),Rectangle=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,t),this.x=Number(i),this.y=Number(h),this.width=Number(e),this.height=Number(s),this.type=_const.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,i){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height)},t.prototype.pad=function(t,i){t=t||0,i=i||(0!==i?t:0),this.x-=t,this.y-=i,this.width+=2*t,this.height+=2*i},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var i=Math.min(this.x,t.x),h=Math.max(this.x+this.width,t.x+t.width),e=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);this.x=i,this.width=h-i,this.y=e,this.height=s-e},_createClass(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();exports.default=Rectangle;
},{"../../const":52}],81:[function(require,module,exports){
"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _const=require("../../const"),RoundedRectangle=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;_classCallCheck(this,t),this.x=i,this.y=s,this.width=h,this.height=r,this.radius=e,this.type=_const.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){if(i>=this.y+this.radius&&i<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var s=t-(this.x+this.radius),h=i-(this.y+this.radius),r=this.radius*this.radius;if(s*s+h*h<=r)return!0;if((s=t-(this.x+this.width-this.radius))*s+h*h<=r)return!0;if(h=i-(this.y+this.height-this.radius),s*s+h*h<=r)return!0;if((s=t-(this.x+this.radius))*s+h*h<=r)return!0}return!1},t}();exports.default=RoundedRectangle;
},{"../../const":52}],82:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_utils=require("../utils"),_math=require("../math"),_const=require("../const"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_Container=require("../display/Container"),_Container2=_interopRequireDefault(_Container),_RenderTexture=require("../textures/RenderTexture"),_RenderTexture2=_interopRequireDefault(_RenderTexture),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),tempMatrix=new _math.Matrix,SystemRenderer=function(e){function t(r,n,i,o){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this));return(0,_utils.sayHello)(r),"number"==typeof n&&(n=Object.assign({width:n,height:i||_settings2.default.RENDER_OPTIONS.height},o)),n=Object.assign({},_settings2.default.RENDER_OPTIONS,n),s.options=n,s.type=_const.RENDERER_TYPE.UNKNOWN,s.screen=new _math.Rectangle(0,0,n.width,n.height),s.view=n.view||document.createElement("canvas"),s.resolution=n.resolution||_settings2.default.RESOLUTION,s.transparent=n.transparent,s.autoResize=n.autoResize||!1,s.blendModes=null,s.preserveDrawingBuffer=n.preserveDrawingBuffer,s.clearBeforeRender=n.clearBeforeRender,s.roundPixels=n.roundPixels,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,0],s._backgroundColorString="#000000",s.backgroundColor=n.backgroundColor||s._backgroundColor,s._tempDisplayObjectParent=new _Container2.default,s._lastObjectRendered=s._tempDisplayObjectParent,s}return _inherits(t,e),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(e,t,r,n){n=n||e.getLocalBounds();var i=_RenderTexture2.default.create(0|n.width,0|n.height,t,r);return tempMatrix.tx=-n.x,tempMatrix.ty=-n.y,this.render(e,i,!1,tempMatrix,!0),i},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=_const.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},_createClass(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,_utils.hex2string)(e),(0,_utils.hex2rgb)(e,this._backgroundColorRgba)}}]),t}(_eventemitter2.default);exports.default=SystemRenderer;
},{"../const":52,"../display/Container":54,"../math":76,"../settings":107,"../textures/RenderTexture":119,"../utils":131,"eventemitter3":21}],83:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _SystemRenderer2=require("../SystemRenderer"),_SystemRenderer3=_interopRequireDefault(_SystemRenderer2),_CanvasMaskManager=require("./utils/CanvasMaskManager"),_CanvasMaskManager2=_interopRequireDefault(_CanvasMaskManager),_CanvasRenderTarget=require("./utils/CanvasRenderTarget"),_CanvasRenderTarget2=_interopRequireDefault(_CanvasRenderTarget),_mapCanvasBlendModesToPixi=require("./utils/mapCanvasBlendModesToPixi"),_mapCanvasBlendModesToPixi2=_interopRequireDefault(_mapCanvasBlendModesToPixi),_utils=require("../../utils"),_const=require("../../const"),_settings=require("../../settings"),_settings2=_interopRequireDefault(_settings),CanvasRenderer=function(e){function t(n,o,r){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,"Canvas",n,o,r));return i.type=_const.RENDERER_TYPE.CANVAS,i.rootContext=i.view.getContext("2d",{alpha:i.transparent}),i.context=i.rootContext,i.refresh=!0,i.maskManager=new _CanvasMaskManager2.default(i),i.smoothProperty="imageSmoothingEnabled",i.rootContext.imageSmoothingEnabled||(i.rootContext.webkitImageSmoothingEnabled?i.smoothProperty="webkitImageSmoothingEnabled":i.rootContext.mozImageSmoothingEnabled?i.smoothProperty="mozImageSmoothingEnabled":i.rootContext.oImageSmoothingEnabled?i.smoothProperty="oImageSmoothingEnabled":i.rootContext.msImageSmoothingEnabled&&(i.smoothProperty="msImageSmoothingEnabled")),i.initPlugins(),i.blendModes=(0,_mapCanvasBlendModesToPixi2.default)(),i._activeBlendMode=null,i.renderingToScreen=!1,i.resize(i.options.width,i.options.height),i}return _inherits(t,e),t.prototype.render=function(e,t,n,o,r){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var i=this.resolution;t?(t=t.baseTexture||t,t._canvasRenderTarget||(t._canvasRenderTarget=new _CanvasRenderTarget2.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(t||(this._lastObjectRendered=e),!r){var a=e.parent,l=this._tempDisplayObjectParent.transform.worldTransform;o?(o.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=a}s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=_const.BLEND_MODES.NORMAL,s.globalCompositeOperation=this.blendModes[_const.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==n?n:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var h=this.context;this.context=s,e.renderCanvas(this),this.context=h,s.restore(),this.resolution=i,this.emit("postrender")}},t.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,n){e.prototype.resize.call(this,t,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=_settings2.default.SCALE_MODE===_const.SCALE_MODES.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(_SystemRenderer3.default);exports.default=CanvasRenderer,_utils.pluginTarget.mixin(CanvasRenderer);
},{"../../const":52,"../../settings":107,"../../utils":131,"../SystemRenderer":82,"./utils/CanvasMaskManager":84,"./utils/CanvasRenderTarget":85,"./utils/mapCanvasBlendModesToPixi":87}],84:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _const=require("../../../const"),CanvasMaskManager=function(){function e(t){_classCallCheck(this,e),this.renderer=t}return e.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var r=e.alpha,a=e.transform.worldTransform,o=t.resolution;t.context.setTransform(a.a*o,a.b*o,a.c*o,a.d*o,a.tx*o,a.ty*o),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=r},e.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,r=e.graphicsData.length;if(0!==r){t.beginPath();for(var a=0;a<r;a++){var o=e.graphicsData[a],n=o.shape;if(o.type===_const.SHAPES.POLY){var s=n.points;t.moveTo(s[0],s[1]);for(var i=1;i<s.length/2;i++)t.lineTo(s[2*i],s[2*i+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath()}else if(o.type===_const.SHAPES.RECT)t.rect(n.x,n.y,n.width,n.height),t.closePath();else if(o.type===_const.SHAPES.CIRC)t.arc(n.x,n.y,n.radius,0,2*Math.PI),t.closePath();else if(o.type===_const.SHAPES.ELIP){var c=2*n.width,h=2*n.height,l=n.x-c/2,p=n.y-h/2,u=c/2*.5522848,v=h/2*.5522848,d=l+c,f=p+h,T=l+c/2,C=p+h/2;t.moveTo(l,C),t.bezierCurveTo(l,C-v,T-u,p,T,p),t.bezierCurveTo(T+u,p,d,C-v,d,C),t.bezierCurveTo(d,C+v,T+u,f,T,f),t.bezierCurveTo(T-u,f,l,C+v,l,C),t.closePath()}else if(o.type===_const.SHAPES.RREC){var y=n.x,P=n.y,x=n.width,g=n.height,S=n.radius,_=Math.min(x,g)/2|0;S=S>_?_:S,t.moveTo(y,P+S),t.lineTo(y,P+g-S),t.quadraticCurveTo(y,P+g,y+S,P+g),t.lineTo(y+x-S,P+g),t.quadraticCurveTo(y+x,P+g,y+x,P+g-S),t.lineTo(y+x,P+S),t.quadraticCurveTo(y+x,P,y+x-S,P),t.lineTo(y+S,P),t.quadraticCurveTo(y,P,y,P+S),t.closePath()}}}},e.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},e.prototype.destroy=function(){},e}();exports.default=CanvasMaskManager;
},{"../../../const":52}],85:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}(),_settings=require("../../../settings"),_settings2=_interopRequireDefault(_settings),CanvasRenderTarget=function(){function t(e,n,s){_classCallCheck(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=s||_settings2.default.RESOLUTION,this.resize(e,n)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},_createClass(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();exports.default=CanvasRenderTarget;
},{"../../../settings":107}],86:[function(require,module,exports){
"use strict";function createColoredCanvas(e){var t=document.createElement("canvas");t.width=6,t.height=1;var a=t.getContext("2d");return a.fillStyle=e,a.fillRect(0,0,6,1),t}function canUseNewCanvasBlendModes(){if("undefined"==typeof document)return!1;var e=createColoredCanvas("#ff00ff"),t=createColoredCanvas("#ffff00"),a=document.createElement("canvas");a.width=6,a.height=1;var n=a.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(e,0,0),n.drawImage(t,2,0);var r=n.getImageData(2,0,1,1);if(!r)return!1;var o=r.data;return 255===o[0]&&0===o[1]&&0===o[2]}exports.__esModule=!0,exports.default=canUseNewCanvasBlendModes;
},{}],87:[function(require,module,exports){
"use strict";function _interopRequireDefault(E){return E&&E.__esModule?E:{default:E}}function mapCanvasBlendModesToPixi(){var E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,_canUseNewCanvasBlendModes2.default)()?(E[_const.BLEND_MODES.NORMAL]="source-over",E[_const.BLEND_MODES.ADD]="lighter",E[_const.BLEND_MODES.MULTIPLY]="multiply",E[_const.BLEND_MODES.SCREEN]="screen",E[_const.BLEND_MODES.OVERLAY]="overlay",E[_const.BLEND_MODES.DARKEN]="darken",E[_const.BLEND_MODES.LIGHTEN]="lighten",E[_const.BLEND_MODES.COLOR_DODGE]="color-dodge",E[_const.BLEND_MODES.COLOR_BURN]="color-burn",E[_const.BLEND_MODES.HARD_LIGHT]="hard-light",E[_const.BLEND_MODES.SOFT_LIGHT]="soft-light",E[_const.BLEND_MODES.DIFFERENCE]="difference",E[_const.BLEND_MODES.EXCLUSION]="exclusion",E[_const.BLEND_MODES.HUE]="hue",E[_const.BLEND_MODES.SATURATION]="saturate",E[_const.BLEND_MODES.COLOR]="color",E[_const.BLEND_MODES.LUMINOSITY]="luminosity"):(E[_const.BLEND_MODES.NORMAL]="source-over",E[_const.BLEND_MODES.ADD]="lighter",E[_const.BLEND_MODES.MULTIPLY]="source-over",E[_const.BLEND_MODES.SCREEN]="source-over",E[_const.BLEND_MODES.OVERLAY]="source-over",E[_const.BLEND_MODES.DARKEN]="source-over",E[_const.BLEND_MODES.LIGHTEN]="source-over",E[_const.BLEND_MODES.COLOR_DODGE]="source-over",E[_const.BLEND_MODES.COLOR_BURN]="source-over",E[_const.BLEND_MODES.HARD_LIGHT]="source-over",E[_const.BLEND_MODES.SOFT_LIGHT]="source-over",E[_const.BLEND_MODES.DIFFERENCE]="source-over",E[_const.BLEND_MODES.EXCLUSION]="source-over",E[_const.BLEND_MODES.HUE]="source-over",E[_const.BLEND_MODES.SATURATION]="source-over",E[_const.BLEND_MODES.COLOR]="source-over",E[_const.BLEND_MODES.LUMINOSITY]="source-over"),E[_const.BLEND_MODES.NORMAL_NPM]=E[_const.BLEND_MODES.NORMAL],E[_const.BLEND_MODES.ADD_NPM]=E[_const.BLEND_MODES.ADD],E[_const.BLEND_MODES.SCREEN_NPM]=E[_const.BLEND_MODES.SCREEN],E}exports.__esModule=!0,exports.default=mapCanvasBlendModesToPixi;var _const=require("../../../const"),_canUseNewCanvasBlendModes=require("./canUseNewCanvasBlendModes"),_canUseNewCanvasBlendModes2=_interopRequireDefault(_canUseNewCanvasBlendModes);
},{"../../../const":52,"./canUseNewCanvasBlendModes":86}],88:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _const=require("../../const"),_settings=require("../../settings"),_settings2=_interopRequireDefault(_settings),TextureGarbageCollector=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=_settings2.default.GC_MAX_IDLE,this.checkCountMax=_settings2.default.GC_MAX_CHECK_COUNT,this.mode=_settings2.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode!==_const.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},e.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,r=!1,n=0;n<t.length;n++){var s=t[n];!s._glRenderTargets&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[n]=null,r=!0)}if(r){for(var u=0,o=0;o<t.length;o++)null!==t[o]&&(t[u++]=t[o]);t.length=u}},e.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])},e}();exports.default=TextureGarbageCollector;
},{"../../const":52,"../../settings":107}],89:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_const=require("../../const"),_RenderTarget=require("./utils/RenderTarget"),_RenderTarget2=_interopRequireDefault(_RenderTarget),_utils=require("../../utils"),TextureManager=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(e,t){var r=this.gl,s=!!e._glRenderTargets;if(!e.hasLoaded)return null;var i=this.renderer.boundTextures;if(void 0===t){t=0;for(var a=0;a<i.length;++a)if(i[a]===e){t=a;break}}i[t]=e,r.activeTexture(r.TEXTURE0+t);var n=e._glTextures[this.renderer.CONTEXT_UID];if(n)s?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):n.upload(e.source);else{if(s){var u=new _RenderTarget2.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);u.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=u,n=u.texture}else n=new _pixiGlCore.GLTexture(this.gl,null,null,null,null),n.bind(t),n.premultiplyAlpha=!0,n.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=n,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&n.enableMipmap(),e.wrapMode===_const.WRAP_MODES.CLAMP?n.enableWrapClamp():e.wrapMode===_const.WRAP_MODES.REPEAT?n.enableWrapRepeat():n.enableWrapMirrorRepeat()):n.enableWrapClamp(),e.scaleMode===_const.SCALE_MODES.NEAREST?n.enableNearestScaling():n.enableLinearScaling()}return n},e.prototype.destroyTexture=function(e,t){if(e=e.baseTexture||e,e.hasLoaded){var r=this.renderer.CONTEXT_UID,s=e._glTextures,i=e._glRenderTargets;if(s[r]&&(this.renderer.unbindTexture(e),s[r].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete s[r],!t)){var a=this._managedTextures.indexOf(e);-1!==a&&(0,_utils.removeItems)(this._managedTextures,a,1)}i&&i[r]&&(i[r].destroy(),delete i[r])}},e.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}();exports.default=TextureManager;
},{"../../const":52,"../../utils":131,"./utils/RenderTarget":102,"pixi-gl-core":35}],90:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _SystemRenderer2=require("../SystemRenderer"),_SystemRenderer3=_interopRequireDefault(_SystemRenderer2),_MaskManager=require("./managers/MaskManager"),_MaskManager2=_interopRequireDefault(_MaskManager),_StencilManager=require("./managers/StencilManager"),_StencilManager2=_interopRequireDefault(_StencilManager),_FilterManager=require("./managers/FilterManager"),_FilterManager2=_interopRequireDefault(_FilterManager),_RenderTarget=require("./utils/RenderTarget"),_RenderTarget2=_interopRequireDefault(_RenderTarget),_ObjectRenderer=require("./utils/ObjectRenderer"),_ObjectRenderer2=_interopRequireDefault(_ObjectRenderer),_TextureManager=require("./TextureManager"),_TextureManager2=_interopRequireDefault(_TextureManager),_BaseTexture=require("../../textures/BaseTexture"),_BaseTexture2=_interopRequireDefault(_BaseTexture),_TextureGarbageCollector=require("./TextureGarbageCollector"),_TextureGarbageCollector2=_interopRequireDefault(_TextureGarbageCollector),_WebGLState=require("./WebGLState"),_WebGLState2=_interopRequireDefault(_WebGLState),_mapWebGLDrawModesToPixi=require("./utils/mapWebGLDrawModesToPixi"),_mapWebGLDrawModesToPixi2=_interopRequireDefault(_mapWebGLDrawModesToPixi),_validateContext=require("./utils/validateContext"),_validateContext2=_interopRequireDefault(_validateContext),_utils=require("../../utils"),_pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_const=require("../../const"),CONTEXT_UID=0,WebGLRenderer=function(e){function t(r,n,i){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,e.call(this,"WebGL",r,n,i));return a.legacy=a.options.legacy,a.legacy&&(_pixiGlCore2.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=_const.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new _MaskManager2.default(a),a.stencilManager=new _StencilManager2.default(a),a.emptyRenderer=new _ObjectRenderer2.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,_validateContext2.default)(a.options.context),a.gl=a.options.context||_pixiGlCore2.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=CONTEXT_UID++,a.state=new _WebGLState2.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,_mapWebGLDrawModesToPixi2.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return _inherits(t,e),t.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new _TextureManager2.default(this),this.filterManager=new _FilterManager2.default(this),this.textureGC=new _TextureGarbageCollector2.default(this),this.state.resetToDefault(),this.rootRenderTarget=new _RenderTarget2.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new _pixiGlCore2.default.GLTexture.fromData(e,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<t;i++){var a=new _BaseTexture2.default;a._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=a,this.bindTexture(null,i)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(e,t,r,n,i){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!i){var a=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=a}this.bindRenderTexture(t,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(e,t){_SystemRenderer3.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(e,t){var r=e.baseTexture,n=r._glRenderTargets[this.CONTEXT_UID];return n&&n.clear(t),this},t.prototype.bindRenderTexture=function(e,t){var r=void 0;if(e){var n=e.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),r=n._glRenderTargets[this.CONTEXT_UID],r.setFrame(e.frame)}else r=this.rootRenderTarget;return r.transform=t,this.bindRenderTarget(r),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(e,t,r){if(e=e||this.emptyTextures[t],e=e.baseTexture||e,e.touched=this.textureGC.count,r)t=t||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===e)return n;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,a=e._glTextures[this.CONTEXT_UID];return a?(this.boundTextures[t]=e,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,a.texture)):this.textureManager.updateTexture(e,t),t},t.prototype.unbindTexture=function(e){var t=this.gl;e=e.baseTexture||e;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new _pixiGlCore2.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e?this:(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e,this)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.emptyTextures[e];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(_SystemRenderer3.default);exports.default=WebGLRenderer,_utils.pluginTarget.mixin(WebGLRenderer);
},{"../../const":52,"../../textures/BaseTexture":118,"../../utils":131,"../SystemRenderer":82,"./TextureGarbageCollector":88,"./TextureManager":89,"./WebGLState":91,"./managers/FilterManager":96,"./managers/MaskManager":97,"./managers/StencilManager":98,"./utils/ObjectRenderer":100,"./utils/RenderTarget":102,"./utils/mapWebGLDrawModesToPixi":105,"./utils/validateContext":106,"pixi-gl-core":35}],91:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _mapWebGLBlendModesToPixi=require("./utils/mapWebGLBlendModesToPixi"),_mapWebGLBlendModesToPixi2=_interopRequireDefault(_mapWebGLBlendModesToPixi),BLEND=0,DEPTH_TEST=1,FRONT_FACE=2,CULL_FACE=3,BLEND_FUNC=4,WebGLState=function(){function t(e){_classCallCheck(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,_mapWebGLBlendModesToPixi2.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[BLEND]),this.setDepthTest(t[DEPTH_TEST]),this.setFrontFace(t[FRONT_FACE]),this.setCullFace(t[CULL_FACE]),this.setBlendMode(t[BLEND_FUNC])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[BLEND]!==t&&(this.activeState[BLEND]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[BLEND_FUNC]){this.activeState[BLEND_FUNC]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[DEPTH_TEST]!==t&&(this.activeState[DEPTH_TEST]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[CULL_FACE]!==t&&(this.activeState[CULL_FACE]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[FRONT_FACE]!==t&&(this.activeState[FRONT_FACE]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();exports.default=WebGLState;
},{"./utils/mapWebGLBlendModesToPixi":104}],92:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_extractUniformsFromSrc=require("./extractUniformsFromSrc"),_extractUniformsFromSrc2=_interopRequireDefault(_extractUniformsFromSrc),_utils=require("../../../utils"),_const=require("../../../const"),_settings=require("../../../settings"),_settings2=_interopRequireDefault(_settings),SOURCE_KEY_MAP={},Filter=function(){function e(t,r,i){_classCallCheck(this,e),this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this._blendMode=_const.BLEND_MODES.NORMAL,this.uniformData=i||(0,_extractUniformsFromSrc2.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value,this.uniformData[o].type&&(this.uniformData[o].type=this.uniformData[o].type.toLowerCase());this.glShaders={},SOURCE_KEY_MAP[this.vertexSrc+this.fragmentSrc]||(SOURCE_KEY_MAP[this.vertexSrc+this.fragmentSrc]=(0,_utils.uid)()),this.glShaderKey=SOURCE_KEY_MAP[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=_settings2.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return e.prototype.apply=function(e,t,r,i,o){e.applyFilter(this,t,r,i)},_createClass(e,[{key:"blendMode",get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),e}();exports.default=Filter;
},{"../../../const":52,"../../../settings":107,"../../../utils":131,"./extractUniformsFromSrc":93}],93:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function extractUniformsFromSrc(e,r,t){var i=extractUniformsFromString(e,t),a=extractUniformsFromString(r,t);return Object.assign(i,a)}function extractUniformsFromString(e){for(var r=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),t={},i=void 0,a=e.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<a.length;o++){var l=a[o].trim();if(l.indexOf("uniform")>-1){var n=l.split(" "),u=n[1],f=n[2],s=1;f.indexOf("[")>-1&&(i=f.split(/\[|]/),f=i[0],s*=Number(i[1])),f.match(r)||(t[f]={value:defaultValue(u,s),name:f,type:u})}}return t}exports.__esModule=!0,exports.default=extractUniformsFromSrc;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),defaultValue=_pixiGlCore2.default.shader.defaultValue;
},{"pixi-gl-core":35}],94:[function(require,module,exports){
"use strict";function calculateScreenSpaceMatrix(e,t,a){var r=e.identity();return r.translate(t.x/a.width,t.y/a.height),r.scale(a.width,a.height),r}function calculateNormalizedScreenSpaceMatrix(e,t,a){var r=e.identity();r.translate(t.x/a.width,t.y/a.height);var i=a.width/t.width,c=a.height/t.height;return r.scale(i,c),r}function calculateSpriteMatrix(e,t,a,r){var i=r._texture.orig,c=e.set(a.width,0,0,a.height,t.x,t.y),l=r.worldTransform.copy(_math.Matrix.TEMP_MATRIX);return l.invert(),c.prepend(l),c.scale(1/i.width,1/i.height),c.translate(r.anchor.x,r.anchor.y),c}exports.__esModule=!0,exports.calculateScreenSpaceMatrix=calculateScreenSpaceMatrix,exports.calculateNormalizedScreenSpaceMatrix=calculateNormalizedScreenSpaceMatrix,exports.calculateSpriteMatrix=calculateSpriteMatrix;var _math=require("../../../math");
},{"../../../math":76}],95:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _Filter2=require("../Filter"),_Filter3=_interopRequireDefault(_Filter2),_math=require("../../../../math"),_path=require("path"),_TextureMatrix=require("../../../../textures/TextureMatrix"),_TextureMatrix2=_interopRequireDefault(_TextureMatrix),SpriteMaskFilter=function(e){function r(t){_classCallCheck(this,r);var a=new _math.Matrix,n=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return t.renderable=!1,n.maskSprite=t,n.maskMatrix=a,n}return _inherits(r,e),r.prototype.apply=function(e,r,t){var a=this.maskSprite,n=this.maskSprite.texture;n.valid&&(n.transform||(n.transform=new _TextureMatrix2.default(n,0)),n.transform.update(),this.uniforms.mask=n,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,a).prepend(n.transform.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=n.transform.uClampFrame,e.applyFilter(this,r,t))},r}(_Filter3.default);exports.default=SpriteMaskFilter;
},{"../../../../math":76,"../../../../textures/TextureMatrix":122,"../Filter":92,"path":28}],96:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _WebGLManager2=require("./WebGLManager"),_WebGLManager3=_interopRequireDefault(_WebGLManager2),_RenderTarget=require("../utils/RenderTarget"),_RenderTarget2=_interopRequireDefault(_RenderTarget),_Quad=require("../utils/Quad"),_Quad2=_interopRequireDefault(_Quad),_math=require("../../../math"),_Shader=require("../../../Shader"),_Shader2=_interopRequireDefault(_Shader),_filterTransforms=require("../filters/filterTransforms"),filterTransforms=_interopRequireWildcard(_filterTransforms),_bitTwiddle=require("bit-twiddle"),_bitTwiddle2=_interopRequireDefault(_bitTwiddle),FilterState=function e(){_classCallCheck(this,e),this.renderTarget=null,this.sourceFrame=new _math.Rectangle,this.destinationFrame=new _math.Rectangle,this.filters=[],this.target=null,this.resolution=1},screenKey="screen",FilterManager=function(e){function r(t){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,e.call(this,t));return i.gl=i.renderer.gl,i.quad=new _Quad2.default(i.gl,t.state.attribState),i.shaderCache={},i.pool={},i.filterData=null,i.managedFilters=[],i.renderer.on("prerender",i.onPrerender,i),i._screenWidth=t.view.width,i._screenHeight=t.view.height,i}return _inherits(r,e),r.prototype.pushFilter=function(e,r){var t=this.renderer,i=this.filterData;if(!i){i=this.renderer._activeRenderTarget.filterStack;var a=new FilterState;a.sourceFrame=a.destinationFrame=this.renderer._activeRenderTarget.size,a.renderTarget=t._activeRenderTarget,this.renderer._activeRenderTarget.filterData=i={index:0,stack:[a]},this.filterData=i}var n=i.stack[++i.index],s=i.stack[0].destinationFrame;n||(n=i.stack[i.index]=new FilterState);var o=e.filterArea&&0===e.filterArea.x&&0===e.filterArea.y&&e.filterArea.width===t.screen.width&&e.filterArea.height===t.screen.height,l=r[0].resolution,d=0|r[0].padding,h=o?t.screen:e.filterArea||e.getBounds(!0),u=n.sourceFrame,f=n.destinationFrame;u.x=(h.x*l|0)/l,u.y=(h.y*l|0)/l,u.width=(h.width*l|0)/l,u.height=(h.height*l|0)/l,o||(i.stack[0].renderTarget.transform||r[0].autoFit&&u.fit(s),u.pad(d)),f.width=u.width,f.height=u.height;var c=this.getPotRenderTarget(t.gl,u.width,u.height,l);n.target=e,n.filters=r,n.resolution=l,n.renderTarget=c,c.setFrame(f,u),t.bindRenderTarget(c),c.clear()},r.prototype.popFilter=function(){var e=this.filterData,r=e.stack[e.index-1],t=e.stack[e.index];this.quad.map(t.renderTarget.size,t.sourceFrame).upload();var i=t.filters;if(1===i.length)i[0].apply(this,t.renderTarget,r.renderTarget,!1,t),this.freePotRenderTarget(t.renderTarget);else{var a=t.renderTarget,n=this.getPotRenderTarget(this.renderer.gl,t.sourceFrame.width,t.sourceFrame.height,t.resolution);n.setFrame(t.destinationFrame,t.sourceFrame),n.clear();var s=0;for(s=0;s<i.length-1;++s){i[s].apply(this,a,n,!0,t);var o=a;a=n,n=o}i[s].apply(this,a,r.renderTarget,!1,t),this.freePotRenderTarget(a),this.freePotRenderTarget(n)}0===--e.index&&(this.filterData=null)},r.prototype.applyFilter=function(e,r,t,i){var a=this.renderer,n=a.gl,s=e.glShaders[a.CONTEXT_UID];s||(e.glShaderKey?(s=this.shaderCache[e.glShaderKey])||(s=new _Shader2.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[a.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=s,this.managedFilters.push(e)):(s=e.glShaders[a.CONTEXT_UID]=new _Shader2.default(this.gl,e.vertexSrc,e.fragmentSrc),this.managedFilters.push(e)),a.bindVao(null),this.quad.initVao(s)),a.bindVao(this.quad.vao),a.bindRenderTarget(t),i&&(n.disable(n.SCISSOR_TEST),a.clear(),n.enable(n.SCISSOR_TEST)),t===a.maskManager.scissorRenderTarget&&a.maskManager.pushScissorMask(null,a.maskManager.scissorData),a.bindShader(s);var o=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=o,this.syncUniforms(s,e),a.state.setBlendMode(e.blendMode),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),n.bindTexture(n.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)},r.prototype.syncUniforms=function(e,r){var t=r.uniformData,i=r.uniforms,a=1,n=void 0;if(e.uniforms.filterArea){n=this.filterData.stack[this.filterData.index];var s=e.uniforms.filterArea;s[0]=n.renderTarget.size.width,s[1]=n.renderTarget.size.height,s[2]=n.sourceFrame.x,s[3]=n.sourceFrame.y,e.uniforms.filterArea=s}if(e.uniforms.filterClamp){n=n||this.filterData.stack[this.filterData.index];var o=e.uniforms.filterClamp;o[0]=0,o[1]=0,o[2]=(n.sourceFrame.width-1)/n.renderTarget.size.width,o[3]=(n.sourceFrame.height-1)/n.renderTarget.size.height,e.uniforms.filterClamp=o}for(var l in t){var d=t[l].type;if("sampler2d"===d&&0!==i[l]){if(i[l].baseTexture)e.uniforms[l]=this.renderer.bindTexture(i[l].baseTexture,a);else{e.uniforms[l]=a;var h=this.renderer.gl;this.renderer.boundTextures[a]=this.renderer.emptyTextures[a],h.activeTexture(h.TEXTURE0+a),i[l].texture.bind()}a++}else if("mat3"===d)void 0!==i[l].a?e.uniforms[l]=i[l].toArray(!0):e.uniforms[l]=i[l];else if("vec2"===d)if(void 0!==i[l].x){var u=e.uniforms[l]||new Float32Array(2);u[0]=i[l].x,u[1]=i[l].y,e.uniforms[l]=u}else e.uniforms[l]=i[l];else"float"===d?e.uniforms.data[l].value!==t[l]&&(e.uniforms[l]=i[l]):e.uniforms[l]=i[l]}},r.prototype.getRenderTarget=function(e,r){var t=this.filterData.stack[this.filterData.index],i=this.getPotRenderTarget(this.renderer.gl,t.sourceFrame.width,t.sourceFrame.height,r||t.resolution);return i.setFrame(t.destinationFrame,t.sourceFrame),i},r.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},r.prototype.calculateScreenSpaceMatrix=function(e){var r=this.filterData.stack[this.filterData.index];return filterTransforms.calculateScreenSpaceMatrix(e,r.sourceFrame,r.renderTarget.size)},r.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var r=this.filterData.stack[this.filterData.index];return filterTransforms.calculateNormalizedScreenSpaceMatrix(e,r.sourceFrame,r.renderTarget.size,r.destinationFrame)},r.prototype.calculateSpriteMatrix=function(e,r){var t=this.filterData.stack[this.filterData.index];return filterTransforms.calculateSpriteMatrix(e,t.sourceFrame,t.renderTarget.size,r)},r.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.renderer,t=this.managedFilters;r.off("prerender",this.onPrerender,this);for(var i=0;i<t.length;i++)e||t[i].glShaders[r.CONTEXT_UID].destroy(),delete t[i].glShaders[r.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()},r.prototype.getPotRenderTarget=function(e,r,t,i){var a=screenKey;r*=i,t*=i,r===this._screenWidth&&t===this._screenHeight||(r=_bitTwiddle2.default.nextPow2(r),t=_bitTwiddle2.default.nextPow2(t),a=(65535&r)<<16|65535&t),this.pool[a]||(this.pool[a]=[]);var n=this.pool[a].pop();if(!n){var s=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),n=new _RenderTarget2.default(e,r,t,null,1),e.bindTexture(e.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return n.resolution=i,n.defaultFrame.width=n.size.width=r/i,n.defaultFrame.height=n.size.height=t/i,n},r.prototype.emptyPool=function(){for(var e in this.pool){var r=this.pool[e];if(r)for(var t=0;t<r.length;t++)r[t].destroy(!0)}this.pool={}},r.prototype.freePotRenderTarget=function(e){var r=e.size.width*e.resolution,t=e.size.height*e.resolution,i=screenKey;r===this._screenWidth&&t===this._screenHeight||(i=(65535&r)<<16|65535&t),this.pool[i].push(e)},r.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var e=this.pool[screenKey];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0);this.pool[screenKey]=[]}},r}(_WebGLManager3.default);exports.default=FilterManager;
},{"../../../Shader":50,"../../../math":76,"../filters/filterTransforms":94,"../utils/Quad":101,"../utils/RenderTarget":102,"./WebGLManager":99,"bit-twiddle":11}],97:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _WebGLManager2=require("./WebGLManager"),_WebGLManager3=_interopRequireDefault(_WebGLManager2),_SpriteMaskFilter=require("../filters/spriteMask/SpriteMaskFilter"),_SpriteMaskFilter2=_interopRequireDefault(_SpriteMaskFilter),MaskManager=function(e){function t(r){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this,r));return s.scissor=!1,s.scissorData=null,s.scissorRenderTarget=null,s.enableScissor=!0,s.alphaMaskPool=[],s.alphaMaskIndex=0,s}return _inherits(t,e),t.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var r=t.worldTransform,s=Math.atan2(r.b,r.a);s=Math.round(s*(180/Math.PI)),s%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},t.prototype.pushSpriteMask=function(e,t){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new _SpriteMaskFilter2.default(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,r),this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(e,t){t.renderable=!0;var r=this.renderer._activeRenderTarget,s=t.getBounds();s.fit(r.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(s.x*i,(r.root?r.size.height-s.y-s.height:s.y)*i,s.width*i,s.height*i),this.scissorRenderTarget=r,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(_WebGLManager3.default);exports.default=MaskManager;
},{"../filters/spriteMask/SpriteMaskFilter":95,"./WebGLManager":99}],98:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _WebGLManager2=require("./WebGLManager"),_WebGLManager3=_interopRequireDefault(_WebGLManager2),StencilManager=function(e){function t(r){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,e.call(this,r));return n.stencilMaskStack=null,n}return _inherits(t,e),t.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,r,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){_WebGLManager3.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(_WebGLManager3.default);exports.default=StencilManager;
},{"./WebGLManager":99}],99:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var WebGLManager=function(){function e(t){_classCallCheck(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}();exports.default=WebGLManager;
},{}],100:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _WebGLManager2=require("../managers/WebGLManager"),_WebGLManager3=_interopRequireDefault(_WebGLManager2),ObjectRenderer=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,e.apply(this,arguments))}return _inherits(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(e){},t}(_WebGLManager3.default);exports.default=ObjectRenderer;
},{"../managers/WebGLManager":99}],101:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_createIndicesForQuads=require("../../../utils/createIndicesForQuads"),_createIndicesForQuads2=_interopRequireDefault(_createIndicesForQuads),Quad=function(){function e(t,i){_classCallCheck(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,_createIndicesForQuads2.default)(1),this.vertexBuffer=_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=_pixiGlCore2.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new _pixiGlCore2.default.VertexArrayObject(t,i)}return e.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},e.prototype.map=function(e,t){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+t.width/e.width,this.uvs[3]=r,this.uvs[4]=i+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=i,this.uvs[7]=r+t.height/e.height,i=t.x,r=t.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+t.width,this.vertices[3]=r,this.vertices[4]=i+t.width,this.vertices[5]=r+t.height,this.vertices[6]=i,this.vertices[7]=r+t.height,this},e.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e}();exports.default=Quad;
},{"../../../utils/createIndicesForQuads":129,"pixi-gl-core":35}],102:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _math=require("../../../math"),_const=require("../../../const"),_settings=require("../../../settings"),_settings2=_interopRequireDefault(_settings),_pixiGlCore=require("pixi-gl-core"),RenderTarget=function(){function t(e,i,r,s,a,n){_classCallCheck(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new _math.Rectangle(0,0,1,1),this.resolution=a||_settings2.default.RESOLUTION,this.projectionMatrix=new _math.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new _math.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==s?s:_settings2.default.SCALE_MODE,this.root=n,this.root?(this.frameBuffer=new _pixiGlCore.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=_pixiGlCore.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===_const.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,r)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();exports.default=RenderTarget;
},{"../../../const":52,"../../../math":76,"../../../settings":107,"pixi-gl-core":35}],103:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function checkMaxIfStatmentsInShader(e,t){var r=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var a=document.createElement("canvas");a.width=1,a.height=1,t=_pixiGlCore2.default.createContext(a)}for(var o=t.createShader(t.FRAGMENT_SHADER);;){var i=fragTemplate.replace(/%forloop%/gi,generateIfTestSrc(e));if(t.shaderSource(o,i),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))break;e=e/2|0}return r&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext(),e}function generateIfTestSrc(e){for(var t="",r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+="if(test == "+r+".0){}");return t}exports.__esModule=!0,exports.default=checkMaxIfStatmentsInShader;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),fragTemplate=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");
},{"pixi-gl-core":35}],104:[function(require,module,exports){
"use strict";function mapWebGLBlendModesToPixi(_){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return N[_const.BLEND_MODES.NORMAL]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.ADD]=[_.ONE,_.DST_ALPHA],N[_const.BLEND_MODES.MULTIPLY]=[_.DST_COLOR,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.SCREEN]=[_.ONE,_.ONE_MINUS_SRC_COLOR],N[_const.BLEND_MODES.OVERLAY]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.DARKEN]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.LIGHTEN]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.COLOR_DODGE]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.COLOR_BURN]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.HARD_LIGHT]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.SOFT_LIGHT]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.DIFFERENCE]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.EXCLUSION]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.HUE]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.SATURATION]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.COLOR]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.LUMINOSITY]=[_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.NORMAL_NPM]=[_.SRC_ALPHA,_.ONE_MINUS_SRC_ALPHA,_.ONE,_.ONE_MINUS_SRC_ALPHA],N[_const.BLEND_MODES.ADD_NPM]=[_.SRC_ALPHA,_.DST_ALPHA,_.ONE,_.DST_ALPHA],N[_const.BLEND_MODES.SCREEN_NPM]=[_.SRC_ALPHA,_.ONE_MINUS_SRC_COLOR,_.ONE,_.ONE_MINUS_SRC_COLOR],N}exports.__esModule=!0,exports.default=mapWebGLBlendModesToPixi;var _const=require("../../../const");
},{"../../../const":52}],105:[function(require,module,exports){
"use strict";function mapWebGLDrawModesToPixi(_){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E[_const.DRAW_MODES.POINTS]=_.POINTS,E[_const.DRAW_MODES.LINES]=_.LINES,E[_const.DRAW_MODES.LINE_LOOP]=_.LINE_LOOP,E[_const.DRAW_MODES.LINE_STRIP]=_.LINE_STRIP,E[_const.DRAW_MODES.TRIANGLES]=_.TRIANGLES,E[_const.DRAW_MODES.TRIANGLE_STRIP]=_.TRIANGLE_STRIP,E[_const.DRAW_MODES.TRIANGLE_FAN]=_.TRIANGLE_FAN,E}exports.__esModule=!0,exports.default=mapWebGLDrawModesToPixi;var _const=require("../../../const");
},{"../../../const":52}],106:[function(require,module,exports){
"use strict";function validateContext(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}exports.__esModule=!0,exports.default=validateContext;
},{}],107:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _maxRecommendedTextures=require("./utils/maxRecommendedTextures"),_maxRecommendedTextures2=_interopRequireDefault(_maxRecommendedTextures),_canUploadSameBuffer=require("./utils/canUploadSameBuffer"),_canUploadSameBuffer2=_interopRequireDefault(_canUploadSameBuffer);exports.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,_maxRecommendedTextures2.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,_canUploadSameBuffer2.default)(),MESH_CANVAS_PADDING:0};
},{"./utils/canUploadSameBuffer":128,"./utils/maxRecommendedTextures":133}],108:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),_math=require("../math"),_utils=require("../utils"),_const=require("../const"),_Texture=require("../textures/Texture"),_Texture2=_interopRequireDefault(_Texture),_Container2=require("../display/Container"),_Container3=_interopRequireDefault(_Container2),tempPoint=new _math.Point,Sprite=function(t){function e(r){_classCallCheck(this,e);var i=_possibleConstructorReturn(this,t.call(this));return i._anchor=new _math.ObservablePoint(i._onAnchorUpdate,i),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=_const.BLEND_MODES.NORMAL,i.shader=null,i.cachedTint=16777215,i.texture=r||_Texture2.default.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.pluginName="sprite",i}return _inherits(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,_utils.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,_utils.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,s=e.d,o=e.tx,h=e.ty,a=this.vertexData,u=t.trim,_=t.orig,c=this._anchor,l=0,d=0,f=0,x=0;u?(d=u.x-c._x*_.width,l=d+u.width,x=u.y-c._y*_.height,f=x+u.height):(d=-c._x*_.width,l=d+_.width,x=-c._y*_.height,f=x+_.height),a[0]=r*d+n*x+o,a[1]=s*x+i*d+h,a[2]=r*l+n*x+o,a[3]=s*x+i*l+h,a[4]=r*l+n*f+o,a[5]=s*f+i*l+h,a[6]=r*d+n*f+o,a[7]=s*f+i*d+h}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,h=n.c,a=n.d,u=n.tx,_=n.ty,c=-i._x*r.width,l=c+r.width,d=-i._y*r.height,f=d+r.height;e[0]=s*c+h*d+u,e[1]=a*d+o*c+_,e[2]=s*l+h*d+u,e[3]=a*d+o*l+_,e[4]=s*l+h*f+u,e[5]=a*f+o*l+_,e[6]=s*c+h*f+u,e[7]=a*f+o*c+_},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new _math.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,n=0;return tempPoint.x>=i&&tempPoint.x<i+e&&(n=-r*this.anchor.y,tempPoint.y>=n&&tempPoint.y<n+r)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var r="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null,this.shader=null},e.from=function(t){return new e(_Texture2.default.from(t))},e.fromFrame=function(t){var r=_utils.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(r)},e.fromImage=function(t,r,i){return new e(_Texture2.default.fromImage(t,r,i))},_createClass(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,_utils.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,_utils.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(_Container3.default);exports.default=Sprite;
},{"../const":52,"../display/Container":54,"../math":76,"../textures/Texture":121,"../utils":131}],109:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _CanvasRenderer=require("../../renderers/canvas/CanvasRenderer"),_CanvasRenderer2=_interopRequireDefault(_CanvasRenderer),_const=require("../../const"),_math=require("../../math"),_CanvasTinter=require("./CanvasTinter"),_CanvasTinter2=_interopRequireDefault(_CanvasTinter),canvasRenderWorldTransform=new _math.Matrix,CanvasSpriteRenderer=function(){function e(r){_classCallCheck(this,e),this.renderer=r}return e.prototype.render=function(e){var r=e._texture,t=this.renderer,n=r._frame.width,o=r._frame.height,a=e.transform.worldTransform,i=0,s=0;if(!(r.orig.width<=0||r.orig.height<=0)&&r.baseTexture.source&&(t.setBlendMode(e.blendMode),r.valid)){t.context.globalAlpha=e.worldAlpha;var u=r.baseTexture.scaleMode===_const.SCALE_MODES.LINEAR;t.smoothProperty&&t.context[t.smoothProperty]!==u&&(t.context[t.smoothProperty]=u),r.trim?(i=r.trim.width/2+r.trim.x-e.anchor.x*r.orig.width,s=r.trim.height/2+r.trim.y-e.anchor.y*r.orig.height):(i=(.5-e.anchor.x)*r.orig.width,s=(.5-e.anchor.y)*r.orig.height),r.rotate&&(a.copy(canvasRenderWorldTransform),a=canvasRenderWorldTransform,_math.GroupD8.matrixAppendRotationInv(a,r.rotate,i,s),i=0,s=0),i-=n/2,s-=o/2,t.roundPixels?(t.context.setTransform(a.a,a.b,a.c,a.d,a.tx*t.resolution|0,a.ty*t.resolution|0),i|=0,s|=0):t.context.setTransform(a.a,a.b,a.c,a.d,a.tx*t.resolution,a.ty*t.resolution);var d=r.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=_CanvasTinter2.default.getTintedTexture(e,e.tint)),t.context.drawImage(e.tintedTexture,0,0,n*d,o*d,i*t.resolution,s*t.resolution,n*t.resolution,o*t.resolution)):t.context.drawImage(r.baseTexture.source,r._frame.x*d,r._frame.y*d,n*d,o*d,i*t.resolution,s*t.resolution,n*t.resolution,o*t.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();exports.default=CanvasSpriteRenderer,_CanvasRenderer2.default.registerPlugin("sprite",CanvasSpriteRenderer);
},{"../../const":52,"../../math":76,"../../renderers/canvas/CanvasRenderer":83,"./CanvasTinter":110}],110:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _utils=require("../../utils"),_canUseNewCanvasBlendModes=require("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),_canUseNewCanvasBlendModes2=_interopRequireDefault(_canUseNewCanvasBlendModes),CanvasTinter={getTintedTexture:function(e,t){var i=e._texture;t=CanvasTinter.roundColor(t);var a="#"+("00000"+(0|t).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var n=i.tintCache[a],r=void 0;if(n){if(n.tintId===i._updateID)return i.tintCache[a];r=i.tintCache[a]}else r=CanvasTinter.canvas||document.createElement("canvas");if(CanvasTinter.tintMethod(i,t,r),r.tintId=i._updateID,CanvasTinter.convertTintToImage){var h=new Image;h.src=r.toDataURL(),i.tintCache[a]=h}else i.tintCache[a]=r,CanvasTinter.canvas=null;return r},tintWithMultiply:function(e,t,i){var a=i.getContext("2d"),n=e._frame.clone(),r=e.baseTexture.resolution;n.x*=r,n.y*=r,n.width*=r,n.height*=r,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),a.save(),a.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),a.fillRect(0,0,n.width,n.height),a.globalCompositeOperation="multiply",a.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),a.globalCompositeOperation="destination-atop",a.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),a.restore()},tintWithOverlay:function(e,t,i){var a=i.getContext("2d"),n=e._frame.clone(),r=e.baseTexture.resolution;n.x*=r,n.y*=r,n.width*=r,n.height*=r,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),a.save(),a.globalCompositeOperation="copy",a.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),a.fillRect(0,0,n.width,n.height),a.globalCompositeOperation="destination-atop",a.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),a.restore()},tintWithPerPixel:function(e,t,i){var a=i.getContext("2d"),n=e._frame.clone(),r=e.baseTexture.resolution;n.x*=r,n.y*=r,n.width*=r,n.height*=r,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),a.save(),a.globalCompositeOperation="copy",a.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),a.restore();for(var h=(0,_utils.hex2rgb)(t),o=h[0],s=h[1],l=h[2],u=a.getImageData(0,0,n.width,n.height),d=u.data,c=0;c<d.length;c+=4)d[c+0]*=o,d[c+1]*=s,d[c+2]*=l;a.putImageData(u,0,0)},roundColor:function(e){var t=CanvasTinter.cacheStepsPerColorChannel,i=(0,_utils.hex2rgb)(e);return i[0]=Math.min(255,i[0]/t*t),i[1]=Math.min(255,i[1]/t*t),i[2]=Math.min(255,i[2]/t*t),(0,_utils.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,_canUseNewCanvasBlendModes2.default)(),tintMethod:0};CanvasTinter.tintMethod=CanvasTinter.canUseMultiply?CanvasTinter.tintWithMultiply:CanvasTinter.tintWithPerPixel,exports.default=CanvasTinter;
},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":86,"../../utils":131}],111:[function(require,module,exports){
"use strict";function _classCallCheck(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var Buffer=function(){function t(s){_classCallCheck(this,t),this.vertices=new ArrayBuffer(s),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();exports.default=Buffer;
},{}],112:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _ObjectRenderer2=require("../../renderers/webgl/utils/ObjectRenderer"),_ObjectRenderer3=_interopRequireDefault(_ObjectRenderer2),_WebGLRenderer=require("../../renderers/webgl/WebGLRenderer"),_WebGLRenderer2=_interopRequireDefault(_WebGLRenderer),_createIndicesForQuads=require("../../utils/createIndicesForQuads"),_createIndicesForQuads2=_interopRequireDefault(_createIndicesForQuads),_generateMultiTextureShader=require("./generateMultiTextureShader"),_generateMultiTextureShader2=_interopRequireDefault(_generateMultiTextureShader),_checkMaxIfStatmentsInShader=require("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),_checkMaxIfStatmentsInShader2=_interopRequireDefault(_checkMaxIfStatmentsInShader),_BatchBuffer=require("./BatchBuffer"),_BatchBuffer2=_interopRequireDefault(_BatchBuffer),_settings=require("../../settings"),_settings2=_interopRequireDefault(_settings),_utils=require("../../utils"),_pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_bitTwiddle=require("bit-twiddle"),_bitTwiddle2=_interopRequireDefault(_bitTwiddle),TICK=0,TEXTURE_TICK=0,SpriteRenderer=function(e){function t(r){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,r));i.vertSize=5,i.vertByteSize=4*i.vertSize,i.size=_settings2.default.SPRITE_BATCH_SIZE,i.buffers=[];for(var s=1;s<=_bitTwiddle2.default.nextPow2(i.size);s*=2)i.buffers.push(new _BatchBuffer2.default(4*s*i.vertByteSize));i.indices=(0,_createIndicesForQuads2.default)(i.size),i.shader=null,i.currentIndex=0,i.groups=[];for(var n=0;n<i.size;n++)i.groups[n]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return i.sprites=[],i.vertexBuffers=[],i.vaos=[],i.vaoMax=2,i.vertexCount=0,i.renderer.on("prerender",i.onPrerender,i),i}return _inherits(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),_settings2.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,_checkMaxIfStatmentsInShader2.default)(this.MAX_TEXTURES,e)),this.shader=(0,_generateMultiTextureShader2.default)(e,this.MAX_TEXTURES),this.indexBuffer=_pixiGlCore2.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,r=0;r<this.vaoMax;r++){var i=this.vertexBuffers[r]=_pixiGlCore2.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),s=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(i,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(i,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(i,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&s.addAttribute(i,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=s}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,r=_bitTwiddle2.default.nextPow2(this.currentIndex),i=_bitTwiddle2.default.log2(r),s=this.buffers[i],n=this.sprites,u=this.groups,d=s.float32View,a=s.uint32View,o=this.boundTextures,l=this.renderer.boundTextures,h=this.renderer.textureGC.count,f=0,_=void 0,x=void 0,c=1,p=0,v=u[0],T=void 0,b=void 0,I=_utils.premultiplyBlendMode[n[0]._texture.baseTexture.premultipliedAlpha?1:0][n[0].blendMode];v.textureCount=0,v.start=0,v.blend=I,TICK++;var B=void 0;for(B=0;B<t;++B){var S=l[B];S._enabled!==TICK?(o[B]=S,S._virtalBoundId=B,S._enabled=TICK):o[B]=this.renderer.emptyTextures[B]}for(TICK++,B=0;B<this.currentIndex;++B){var C=n[B];_=C._texture.baseTexture;var R=_utils.premultiplyBlendMode[Number(_.premultipliedAlpha)][C.blendMode];if(I!==R&&(I=R,x=null,p=t,TICK++),x!==_&&(x=_,_._enabled!==TICK)){if(p===t&&(TICK++,v.size=B-v.start,p=0,v=u[c++],v.blend=I,v.textureCount=0,v.start=B),_.touched=h,-1===_._virtalBoundId)for(var E=0;E<t;++E){var y=(E+TEXTURE_TICK)%t,A=o[y];if(A._enabled!==TICK){TEXTURE_TICK++,A._virtalBoundId=-1,_._virtalBoundId=y,o[y]=_;break}}_._enabled=TICK,v.textureCount++,v.ids[p]=_._virtalBoundId,v.textures[p++]=_}if(T=C.vertexData,b=C._texture._uvs.uvsUint32,this.renderer.roundPixels){var M=this.renderer.resolution;d[f]=(T[0]*M|0)/M,d[f+1]=(T[1]*M|0)/M,d[f+5]=(T[2]*M|0)/M,d[f+6]=(T[3]*M|0)/M,d[f+10]=(T[4]*M|0)/M,d[f+11]=(T[5]*M|0)/M,d[f+15]=(T[6]*M|0)/M,d[f+16]=(T[7]*M|0)/M}else d[f]=T[0],d[f+1]=T[1],d[f+5]=T[2],d[f+6]=T[3],d[f+10]=T[4],d[f+11]=T[5],d[f+15]=T[6],d[f+16]=T[7];a[f+2]=b[0],a[f+7]=b[1],a[f+12]=b[2],a[f+17]=b[3];var g=Math.min(C.worldAlpha,1),w=g<1&&_.premultipliedAlpha?(0,_utils.premultiplyTint)(C._tintRGB,g):C._tintRGB+(255*g<<24);a[f+3]=a[f+8]=a[f+13]=a[f+18]=w,d[f+4]=d[f+9]=d[f+14]=d[f+19]=_._virtalBoundId,f+=20}if(v.size=B-v.start,_settings2.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(s.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var G=this.shader.attributes,U=this.vertexBuffers[this.vertexCount]=_pixiGlCore2.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),z=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(U,G.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(U,G.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(U,G.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);G.aTextureId&&z.addAttribute(U,G.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=z}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(s.vertices,0,!1),this.vertexCount++}for(B=0;B<t;++B)l[B]._virtalBoundId=-1;for(B=0;B<c;++B){for(var D=u[B],X=D.textureCount,q=0;q<X;q++)x=D.textures[q],l[D.ids[q]]!==x&&this.renderer.bindTexture(x,D.ids[q],!0),x._virtalBoundId=-1;this.renderer.state.setBlendMode(D.blend),e.drawElements(e.TRIANGLES,6*D.size,e.UNSIGNED_SHORT,6*D.start*2)}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),_settings2.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var r=0;r<this.buffers.length;++r)this.buffers[r].destroy()},t}(_ObjectRenderer3.default);exports.default=SpriteRenderer,_WebGLRenderer2.default.registerPlugin("sprite",SpriteRenderer);
},{"../../renderers/webgl/WebGLRenderer":90,"../../renderers/webgl/utils/ObjectRenderer":100,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":103,"../../settings":107,"../../utils":131,"../../utils/createIndicesForQuads":129,"./BatchBuffer":111,"./generateMultiTextureShader":113,"bit-twiddle":11,"pixi-gl-core":35}],113:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function generateMultiTextureShader(e,r){var o=fragTemplate;o=o.replace(/%count%/gi,r),o=o.replace(/%forloop%/gi,generateSampleSrc(r));for(var t=new _Shader2.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",o),n=[],a=0;a<r;a++)n[a]=a;return t.bind(),t.uniforms.uSamplers=n,t}function generateSampleSrc(e){var r="";r+="\n",r+="\n";for(var o=0;o<e;o++)o>0&&(r+="\nelse "),o<e-1&&(r+="if(textureId == "+o+".0)"),r+="\n{",r+="\n\tcolor = texture2D(uSamplers["+o+"], vTextureCoord);",r+="\n}";return r+="\n",r+="\n"}exports.__esModule=!0,exports.default=generateMultiTextureShader;var _Shader=require("../../Shader"),_Shader2=_interopRequireDefault(_Shader),_path=require("path"),fragTemplate=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");
},{"../../Shader":50,"path":28}],114:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),_Sprite2=require("../sprites/Sprite"),_Sprite3=_interopRequireDefault(_Sprite2),_Texture=require("../textures/Texture"),_Texture2=_interopRequireDefault(_Texture),_math=require("../math"),_utils=require("../utils"),_const=require("../const"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_TextStyle=require("./TextStyle"),_TextStyle2=_interopRequireDefault(_TextStyle),_TextMetrics=require("./TextMetrics"),_TextMetrics2=_interopRequireDefault(_TextMetrics),_trimCanvas=require("../utils/trimCanvas"),_trimCanvas2=_interopRequireDefault(_trimCanvas),defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Text=function(t){function e(i,r,s){_classCallCheck(this,e),s=s||document.createElement("canvas"),s.width=3,s.height=3;var n=_Texture2.default.fromCanvas(s,_settings2.default.SCALE_MODE,"text");n.orig=new _math.Rectangle,n.trim=new _math.Rectangle;var o=_possibleConstructorReturn(this,t.call(this,n));return _Texture2.default.addToCache(o._texture,o._texture.baseTexture.textureCacheIds[0]),o.canvas=s,o.context=o.canvas.getContext("2d"),o.resolution=_settings2.default.RESOLUTION,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=i,o.style=r,o.localStyleID=-1,o}return _inherits(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,r=_TextMetrics2.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),s=r.width,n=r.height,o=r.lines,a=r.lineHeight,l=r.lineWidths,h=r.maxLineWidth,u=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,n)+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var d=void 0,c=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var p=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,f=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,_=0;_<o.length;_++)d=e.strokeThickness/2,c=e.strokeThickness/2+_*a+u.ascent,"right"===e.align?d+=h-l[_]:"center"===e.align&&(d+=(h-l[_])/2),e.fill&&(this.drawLetterSpacing(o[_],d+p+e.padding,c+f+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(o[_],d+p+e.padding,c+f+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,o);for(var g=0;g<o.length;g++)d=e.strokeThickness/2,c=e.strokeThickness/2+g*a+u.ascent,"right"===e.align?d+=h-l[g]:"center"===e.align&&(d+=(h-l[g])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[g],d+e.padding,c+e.padding,!0),e.fill&&this.drawLetterSpacing(o[g],d+e.padding,c+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this._style,n=s.letterSpacing;if(0===n)return void(r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var o=String.prototype.split.call(t,""),a=e,l=0,h="";l<t.length;)h=o[l++],r?this.context.strokeText(h,a,i):this.context.fillText(h,a,i),a+=this.context.measureText(h).width+n},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,_trimCanvas2.default)(t);t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)}var i=this._texture,r=this._style,s=r.trim?0:r.padding,n=i.baseTexture;n.hasLoaded=!0,n.resolution=this.resolution,n.realWidth=t.width,n.realHeight=t.height,n.width=t.width/this.resolution,n.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-s,i.trim.y=-s,i.orig.width=i._frame.width-2*s,i.orig.height=i._frame.height-2*s,this._onTextureUpdate(),n.emit("update",n),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,r=void 0,s=void 0,n=void 0,o=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,l=t.fill.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var u=l.length+1,d=1;d<u;++d)h.push(d/u);if(l.unshift(t.fill[0]),h.unshift(0),l.push(t.fill[t.fill.length-1]),h.push(1),t.fillGradientType===_const.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(o/2,0,o/2,a),r=(l.length+1)*e.length,s=0;for(var c=0;c<e.length;c++){s+=1;for(var p=0;p<l.length;p++)n="number"==typeof h[p]?h[p]/e.length+c/e.length:s/r,i.addColorStop(n,l[p]),s++}}else{i=this.context.createLinearGradient(0,a/2,o,a/2),r=l.length+1,s=1;for(var f=0;f<l.length;f++)n="number"==typeof h[f]?h[f]:s/r,i.addColorStop(n,l[f]),s++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},defaultDestroyOptions,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},_createClass(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,_utils.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,_utils.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof _TextStyle2.default?this._style=t:this._style=new _TextStyle2.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(_Sprite3.default);exports.default=Text;
},{"../const":52,"../math":76,"../settings":107,"../sprites/Sprite":108,"../textures/Texture":121,"../utils":131,"../utils/trimCanvas":136,"./TextMetrics":115,"./TextStyle":116}],115:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var TextMetrics=function(){function e(t,a,n,r,i,s,o,h,c){_classCallCheck(this,e),this.text=t,this.style=a,this.width=n,this.height=r,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=h,this.fontProperties=c}return e.measureText=function(t,a,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;n=n||a.wordWrap;var i=a.toFontString(),s=e.measureFont(i),o=r.getContext("2d");o.font=i;for(var h=n?e.wordWrap(t,a,r):t,c=h.split(/(?:\r\n|\r|\n)/),l=new Array(c.length),d=0,f=0;f<c.length;f++){var g=o.measureText(c[f]).width+(c[f].length-1)*a.letterSpacing;l[f]=g,d=Math.max(d,g)}var v=d+a.strokeThickness;a.dropShadow&&(v+=a.dropShadowDistance);var u=a.lineHeight||s.fontSize+a.strokeThickness,x=Math.max(u,s.fontSize+a.strokeThickness)+(c.length-1)*(u+a.leading);return a.dropShadow&&(x+=a.dropShadowDistance),new e(t,a,v,x,c,l,u+a.leading,d,s)},e.wordWrap=function(t,a){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas,r=n.getContext("2d"),i="",s=0,o="",h={},c=a.letterSpacing,l=a.wordWrapWidth+a.letterSpacing,d=e.getFromCache(" ",c,h,r),f=t.split(" "),g=0;g<f.length;g++){var v=f[g],u=e.getFromCache(v,c,h,r);if(u>l)if(a.breakWords)for(var x=i.length>0?" "+v:v,p=x.split(""),w=0;w<p.length;w++){var m=p[w],T=e.getFromCache(m,c,h,r);T+s>l&&(o+=e.addLine(i),i="",s=0),i+=m,s+=T}else i.length>0&&(o+=e.addLine(i),i="",s=0),o+=e.addLine(v),i="",s=0;else u+s>l&&(o+=e.addLine(i),i="",s=0),i.length>0?i+=" "+v:i+=v,s+=u+d}return o+=e.addLine(i,!1)},e.addLine=function(e){return e=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?e:e+"\n"},e.getFromCache=function(e,t,a,n){var r=a[e];if(void 0===r){var i=e.length*t;r=n.measureText(e).width+i,a[e]=r}return r},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var a={},n=e._canvas,r=e._context;r.font=t;var i=Math.ceil(r.measureText("|MÉq").width),s=Math.ceil(r.measureText("M").width),o=2*s;s=1.4*s|0,n.width=i,n.height=o,r.fillStyle="#f00",r.fillRect(0,0,i,o),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|MÉq",0,s);var h=r.getImageData(0,0,i,o).data,c=h.length,l=4*i,d=0,f=0,g=!1;for(d=0;d<s;++d){for(var v=0;v<l;v+=4)if(255!==h[f+v]){g=!0;break}if(g)break;f+=l}for(a.ascent=s-d,f=c-l,g=!1,d=o;d>s;--d){for(var u=0;u<l;u+=4)if(255!==h[f+u]){g=!0;break}if(g)break;f-=l}return a.descent=d-s,a.fontSize=a.ascent+a.descent,e._fonts[t]=a,a},e}();exports.default=TextMetrics;var canvas=document.createElement("canvas");canvas.width=canvas.height=10,TextMetrics._canvas=canvas,TextMetrics._context=canvas.getContext("2d"),TextMetrics._fonts={};
},{}],116:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function getSingleColor(t){return"number"==typeof t?(0,_utils.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function getColor(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=getSingleColor(t[e]);return t}return getSingleColor(t)}function areArraysEqual(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}function deepCopyProperties(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_const=require("../const"),_utils=require("../utils"),defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:_const.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},TextStyle=function(){function t(e){_classCallCheck(this,t),this.styleID=0,this.reset(),deepCopyProperties(this,e,e)}return t.prototype.clone=function(){var e={};return deepCopyProperties(e,this,defaultStyle),new t(e)},t.prototype.reset=function(){deepCopyProperties(this,defaultStyle,defaultStyle)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();/([\"\'])[^\'\"]+\1/.test(n)||(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},_createClass(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=getColor(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=getColor(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){areArraysEqual(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=getColor(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();exports.default=TextStyle;
},{"../const":52,"../utils":131}],117:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _BaseTexture2=require("./BaseTexture"),_BaseTexture3=_interopRequireDefault(_BaseTexture2),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),BaseRenderTexture=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments[2],n=arguments[3];_classCallCheck(this,t);var o=_possibleConstructorReturn(this,e.call(this,null,s));return o.resolution=n||_settings2.default.RESOLUTION,o.width=Math.ceil(i),o.height=Math.ceil(r),o.realWidth=o.width*o.resolution,o.realHeight=o.height*o.resolution,o.scaleMode=void 0!==s?s:_settings2.default.SCALE_MODE,o.hasLoaded=!0,o._glRenderTargets={},o._canvasRenderTarget=null,o.valid=!1,o}return _inherits(t,e),t.prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(_BaseTexture3.default);exports.default=BaseRenderTexture;
},{"../settings":107,"./BaseTexture":118}],118:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _utils=require("../utils"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_determineCrossOrigin=require("../utils/determineCrossOrigin"),_determineCrossOrigin2=_interopRequireDefault(_determineCrossOrigin),_bitTwiddle=require("bit-twiddle"),_bitTwiddle2=_interopRequireDefault(_bitTwiddle),BaseTexture=function(e){function t(i,r,s){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,e.call(this));return o.uid=(0,_utils.uid)(),o.touched=0,o.resolution=s||_settings2.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=void 0!==r?r:_settings2.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=_settings2.default.MIPMAP_TEXTURES,o.wrapMode=_settings2.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,o._destroyed=!1,o.textureCacheIds=[],i&&o.loadSource(i),o}return _inherits(t,e),t.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=_bitTwiddle2.default.isPow2(this.realWidth)&&_bitTwiddle2.default.isPow2(this.realHeight)},t.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var r=this;if(e.onload=function(){if(r._updateImageType(),e.onload=null,e.onerror=null,r.isLoading){if(r.isLoading=!1,r._sourceLoaded(),"svg"===r.imageType)return void r._loadSvgSource();r.emit("loaded",r)}},e.onerror=function(){e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},t.prototype._updateImageType=function(){if(this.imageUrl){var e=(0,_utils.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var i=e.subType.split("+")[0];if(!(t=(0,_utils.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(t=(0,_utils.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}},t.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=(0,_utils.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},t.prototype._loadSvgSourceUsingString=function(e){var i=(0,_utils.getSvgSize)(e),r=i.width,s=i.height;if(!r||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(s*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,_utils.uid)(),o.getContext("2d").drawImage(this.source,0,0,r,s,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,t.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete _utils.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},t.fromImage=function(e,i,r,s){var o=_utils.BaseTextureCache[e];if(!o){var a=new Image;void 0===i&&0!==e.indexOf("data:")?a.crossOrigin=(0,_determineCrossOrigin2.default)(e):i&&(a.crossOrigin="string"==typeof i?i:"anonymous"),o=new t(a,r),o.imageUrl=e,s&&(o.sourceScale=s),o.resolution=(0,_utils.getResolutionOfUrl)(e),a.src=e,t.addToCache(o,e)}return o},t.fromCanvas=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=r+"_"+(0,_utils.uid)());var s=_utils.BaseTextureCache[e._pixiId];return s||(s=new t(e,i),t.addToCache(s,e._pixiId)),s},t.from=function(e,i,r){if("string"==typeof e)return t.fromImage(e,void 0,i,r);if(e instanceof HTMLImageElement){var s=e.src,o=_utils.BaseTextureCache[s];return o||(o=new t(e,i),o.imageUrl=s,r&&(o.sourceScale=r),o.resolution=(0,_utils.getResolutionOfUrl)(s),t.addToCache(o,s)),o}return e instanceof HTMLCanvasElement?t.fromCanvas(e,i):e},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),_utils.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),_utils.BaseTextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=_utils.BaseTextureCache[e];if(t){var i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete _utils.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete _utils.BaseTextureCache[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t}(_eventemitter2.default);exports.default=BaseTexture;
},{"../settings":107,"../utils":131,"../utils/determineCrossOrigin":130,"bit-twiddle":11,"eventemitter3":21}],119:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _BaseRenderTexture=require("./BaseRenderTexture"),_BaseRenderTexture2=_interopRequireDefault(_BaseRenderTexture),_Texture2=require("./Texture"),_Texture3=_interopRequireDefault(_Texture2),RenderTexture=function(e){function t(r,n){_classCallCheck(this,t);var u=null;if(!(r instanceof _BaseRenderTexture2.default)){var i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4];console.warn("Please use RenderTexture.create("+i+", "+o+") instead of the ctor directly."),u=arguments[0],n=null,r=new _BaseRenderTexture2.default(i,o,s,a)}var l=_possibleConstructorReturn(this,e.call(this,r,n));return l.legacyRenderer=u,l.valid=!0,l._updateUvs(),l}return _inherits(t,e),t.prototype.resize=function(e,t,r){e=Math.ceil(e),t=Math.ceil(t),this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,r||this.baseTexture.resize(e,t),this._updateUvs()},t.create=function(e,r,n,u){return new t(new _BaseRenderTexture2.default(e,r,n,u))},t}(_Texture3.default);exports.default=RenderTexture;
},{"./BaseRenderTexture":117,"./Texture":121}],120:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,s,r){return s&&t(e.prototype,s),r&&t(e,r),e}}(),_=require("../"),_utils=require("../utils"),Spritesheet=function(){function t(e,s){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;_classCallCheck(this,t),this.baseTexture=e,this.textures={},this.data=s,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return _createClass(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,s=(0,_utils.getResolutionOfUrl)(t,null);return null===s&&(s=void 0!==e?parseFloat(e):1),1!==s&&(this.baseTexture.resolution=s,this.baseTexture.update()),s},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var s=e,r=t.BATCH_SIZE,o=this.baseTexture.sourceScale;s-e<r&&s<this._frameKeys.length;){var i=this._frameKeys[s],a=this._frames[i],l=a.frame;if(l){var n=null,h=null,u=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,c=new _.Rectangle(0,0,Math.floor(u.w*o)/this.resolution,Math.floor(u.h*o)/this.resolution);n=a.rotated?new _.Rectangle(Math.floor(l.x*o)/this.resolution,Math.floor(l.y*o)/this.resolution,Math.floor(l.h*o)/this.resolution,Math.floor(l.w*o)/this.resolution):new _.Rectangle(Math.floor(l.x*o)/this.resolution,Math.floor(l.y*o)/this.resolution,Math.floor(l.w*o)/this.resolution,Math.floor(l.h*o)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(h=new _.Rectangle(Math.floor(a.spriteSourceSize.x*o)/this.resolution,Math.floor(a.spriteSourceSize.y*o)/this.resolution,Math.floor(l.w*o)/this.resolution,Math.floor(l.h*o)/this.resolution)),this.textures[i]=new _.Texture(this.baseTexture,n,c,h,a.rotated?2:0),_.Texture.addToCache(this.textures[i],i)}s++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();exports.default=Spritesheet;
},{"../":71,"../utils":131}],121:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function createWhiteTexture(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new Texture(new _BaseTexture2.default(e))}function removeAllHandlers(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_BaseTexture=require("./BaseTexture"),_BaseTexture2=_interopRequireDefault(_BaseTexture),_VideoBaseTexture=require("./VideoBaseTexture"),_VideoBaseTexture2=_interopRequireDefault(_VideoBaseTexture),_TextureUvs=require("./TextureUvs"),_TextureUvs2=_interopRequireDefault(_TextureUvs),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_math=require("../math"),_utils=require("../utils"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),Texture=function(e){function t(r,a,i,u,n){_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this));if(s.noFrame=!1,a||(s.noFrame=!0,a=new _math.Rectangle(0,0,1,1)),r instanceof t&&(r=r.baseTexture),s.baseTexture=r,s._frame=a,s.trim=u,s.valid=!1,s.requiresUpdate=!1,s._uvs=null,s.orig=i||a,s._rotate=Number(n||0),!0===n)s._rotate=2;else if(s._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return r.hasLoaded?(s.noFrame&&(a=new _math.Rectangle(0,0,r.width,r.height),r.on("update",s.onBaseTextureUpdated,s)),s.frame=a):r.once("loaded",s.onBaseTextureLoaded,s),s._updateID=0,s.transform=null,s.textureCacheIds=[],s}return _inherits(t,e),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new _math.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},t.prototype.destroy=function(e){this.baseTexture&&(e&&(_utils.TextureCache[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new _TextureUvs2.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(e,r,a,i){var u=_utils.TextureCache[e];return u||(u=new t(_BaseTexture2.default.fromImage(e,r,a,i)),t.addToCache(u,e)),u},t.fromFrame=function(e){var t=_utils.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},t.fromCanvas=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new t(_BaseTexture2.default.fromCanvas(e,r,a))},t.fromVideo=function(e,r){return"string"==typeof e?t.fromVideoUrl(e,r):new t(_VideoBaseTexture2.default.fromVideo(e,r))},t.fromVideoUrl=function(e,r){return new t(_VideoBaseTexture2.default.fromUrl(e,r))},t.from=function(e){if("string"==typeof e){var r=_utils.TextureCache[e];if(!r){return null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?t.fromVideoUrl(e):t.fromImage(e)}return r}return e instanceof HTMLImageElement?new t(_BaseTexture2.default.from(e)):e instanceof HTMLCanvasElement?t.fromCanvas(e,_settings2.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?t.fromVideo(e):e instanceof _BaseTexture2.default?new t(e):e},t.fromLoader=function(e,r,a){var i=new _BaseTexture2.default(e,void 0,(0,_utils.getResolutionOfUrl)(r)),u=new t(i);return i.imageUrl=r,a||(a=r),_BaseTexture2.default.addToCache(u.baseTexture,a),t.addToCache(u,a),a!==r&&(_BaseTexture2.default.addToCache(u.baseTexture,r),t.addToCache(u,r)),u},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),_utils.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),_utils.TextureCache[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=_utils.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete _utils.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var a=0;a<e.textureCacheIds.length;++a)_utils.TextureCache[e.textureCacheIds[a]]===e&&delete _utils.TextureCache[e.textureCacheIds[a]];return e.textureCacheIds.length=0,e}return null},_createClass(t,[{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,r=e.y,a=e.width,i=e.height,u=t+a>this.baseTexture.width,n=r+i>this.baseTexture.height;if(u||n){var s=u&&n?"and":"or",o="X: "+t+" + "+a+" = "+(t+a)+" > "+this.baseTexture.width,h="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+o+" "+s+" "+h)}this.valid=a&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(_eventemitter2.default);exports.default=Texture,Texture.EMPTY=new Texture(new _BaseTexture2.default),removeAllHandlers(Texture.EMPTY),removeAllHandlers(Texture.EMPTY.baseTexture),Texture.WHITE=createWhiteTexture(),removeAllHandlers(Texture.WHITE),removeAllHandlers(Texture.WHITE.baseTexture);
},{"../math":76,"../settings":107,"../utils":131,"./BaseTexture":118,"./TextureUvs":123,"./VideoBaseTexture":124,"eventemitter3":21}],122:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),_Matrix=require("../math/Matrix"),_Matrix2=_interopRequireDefault(_Matrix),tempMat=new _Matrix2.default,TextureMatrix=function(){function t(e,r){_classCallCheck(this,t),this._texture=e,this.mapCoord=new _Matrix2.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===r?.5:r}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,a=0;a<t.length;a+=2){var i=t[a],u=t[a+1];e[a]=i*r.a+u*r.c+r.tx,e[a+1]=i*r.b+u*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var a=e.orig,i=e.trim;i&&(tempMat.set(a.width/i.width,0,0,a.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(tempMat));var u=e.baseTexture,s=this.uClampFrame,n=this.clampMargin/u.resolution,h=this.clampOffset;return s[0]=(e._frame.x+n+h)/u.width,s[1]=(e._frame.y+n+h)/u.height,s[2]=(e._frame.x+e._frame.width-n+h)/u.width,s[3]=(e._frame.y+e._frame.height-n+h)/u.height,this.uClampOffset[0]=h/u.realWidth,this.uClampOffset[1]=h/u.realHeight,!0},_createClass(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();exports.default=TextureMatrix;
},{"../math/Matrix":73}],123:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _GroupD=require("../math/GroupD8"),_GroupD2=_interopRequireDefault(_GroupD),TextureUvs=function(){function t(){_classCallCheck(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,i,u){var s=i.width,h=i.height;if(u){var e=t.width/2/s,r=t.height/2/h,a=t.x/s+e,o=t.y/h+r;u=_GroupD2.default.add(u,_GroupD2.default.NW),this.x0=a+e*_GroupD2.default.uX(u),this.y0=o+r*_GroupD2.default.uY(u),u=_GroupD2.default.add(u,2),this.x1=a+e*_GroupD2.default.uX(u),this.y1=o+r*_GroupD2.default.uY(u),u=_GroupD2.default.add(u,2),this.x2=a+e*_GroupD2.default.uX(u),this.y2=o+r*_GroupD2.default.uY(u),u=_GroupD2.default.add(u,2),this.x3=a+e*_GroupD2.default.uX(u),this.y3=o+r*_GroupD2.default.uY(u)}else this.x0=t.x/s,this.y0=t.y/h,this.x1=(t.x+t.width)/s,this.y1=t.y/h,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/h,this.x3=t.x/s,this.y3=(t.y+t.height)/h;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();exports.default=TextureUvs;
},{"../math/GroupD8":72}],124:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function createSource(e,t){t||(t="video/"+e.substr(e.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=e,i.type=t,i}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_BaseTexture2=require("./BaseTexture"),_BaseTexture3=_interopRequireDefault(_BaseTexture2),_utils=require("../utils"),_ticker=require("../ticker"),_const=require("../const"),_determineCrossOrigin=require("../utils/determineCrossOrigin"),_determineCrossOrigin2=_interopRequireDefault(_determineCrossOrigin),VideoBaseTexture=function(e){function t(i,r){if(_classCallCheck(this,t),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var o=_possibleConstructorReturn(this,e.call(this,i,r));return o.width=i.videoWidth,o.height=i.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=!0,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),i.addEventListener("play",o._onPlayStart.bind(o)),i.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(i.addEventListener("canplay",o._onCanPlay),i.addEventListener("canplaythrough",o._onCanPlay)),o}return _inherits(t,e),t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(_ticker.shared.add(this.update,this,_const.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(_ticker.shared.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&_ticker.shared.remove(this.update,this),this.source&&this.source._pixiId&&(_BaseTexture3.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),e.prototype.destroy.call(this)},t.fromVideo=function(e,i){e._pixiId||(e._pixiId="video_"+(0,_utils.uid)());var r=_utils.BaseTextureCache[e._pixiId];return r||(r=new t(e,i),_BaseTexture3.default.addToCache(r,e._pixiId)),r},t.fromUrl=function(e,i,r){var o=document.createElement("video");o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline","");var s=Array.isArray(e)?e[0].src||e[0]:e.src||e;if(void 0===r&&0!==s.indexOf("data:")?o.crossOrigin=(0,_determineCrossOrigin2.default)(s):r&&(o.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(e))for(var a=0;a<e.length;++a)o.appendChild(createSource(e[a].src||e[a],e[a].mime));else o.appendChild(createSource(s,e.mime));return o.load(),t.fromVideo(o,i)},_createClass(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(_ticker.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(_ticker.shared.add(this.update,this,_const.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),t}(_BaseTexture3.default);exports.default=VideoBaseTexture,VideoBaseTexture.fromUrls=VideoBaseTexture.fromUrl;
},{"../const":52,"../ticker":127,"../utils":131,"../utils/determineCrossOrigin":130,"./BaseTexture":118}],125:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_const=require("../const"),_TickerListener=require("./TickerListener"),_TickerListener2=_interopRequireDefault(_TickerListener),Ticker=function(){function e(){var t=this;_classCallCheck(this,e),this._head=new _TickerListener2.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/_settings2.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_const.UPDATE_PRIORITY.NORMAL;return this._addListener(new _TickerListener2.default(e,t,s))},e.prototype.addOnce=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_const.UPDATE_PRIORITY.NORMAL;return this._addListener(new _TickerListener2.default(e,t,s,!0))},e.prototype._addListener=function(e){var t=this._head.next,s=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(s);break}s=t,t=t.next}e.previous||e.connect(s)}else e.connect(s);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var s=this._head.next;s;)s=s.match(e,t)?s.destroy():s.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*_settings2.default.TARGET_FPMS*this.speed;for(var s=this._head,i=s.next;i;)i=i.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},_createClass(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,_settings2.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();exports.default=Ticker;
},{"../const":52,"../settings":107,"./TickerListener":126}],126:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var TickerListener=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,t),this.fn=e,this.context=n,this.priority=i,this.once=s,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},t}();exports.default=TickerListener;
},{}],127:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.Ticker=exports.shared=void 0;var _Ticker=require("./Ticker"),_Ticker2=_interopRequireDefault(_Ticker),shared=new _Ticker2.default;shared.autoStart=!0,shared.destroy=function(){},exports.shared=shared,exports.Ticker=_Ticker2.default;
},{"./Ticker":125}],128:[function(require,module,exports){
"use strict";function canUploadSameBuffer(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}exports.__esModule=!0,exports.default=canUploadSameBuffer;
},{}],129:[function(require,module,exports){
"use strict";function createIndicesForQuads(e){for(var r=6*e,t=new Uint16Array(r),s=0,a=0;s<r;s+=6,a+=4)t[s+0]=a+0,t[s+1]=a+1,t[s+2]=a+2,t[s+3]=a+0,t[s+4]=a+2,t[s+5]=a+3;return t}exports.__esModule=!0,exports.default=createIndicesForQuads;
},{}],130:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function determineCrossOrigin(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";r=r||window.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=e,e=_url3.default.parse(tempAnchor.href);var o=!e.port&&""===r.port||e.port===r.port;return e.hostname===r.hostname&&o&&e.protocol===r.protocol?"":"anonymous"}exports.__esModule=!0,exports.default=determineCrossOrigin;var _url2=require("url"),_url3=_interopRequireDefault(_url2),tempAnchor=void 0;
},{"url":209}],131:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function uid(){return++nextUid}function hex2rgb(e,t){return t=t||[],t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function hex2string(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)}function rgb2hex(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)}function getResolutionOfUrl(e,t){var r=_settings2.default.RETINA_PREFIX.exec(e);return r?parseFloat(r[1]):void 0!==t?t:1}function decomposeDataUri(e){var t=_const.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,encoding:t[3]?t[3].toLowerCase():void 0,data:t[4]}}function getUrlFileExtension(e){var t=_const.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase()}function getSvgSize(e){var t=_const.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}function skipHello(){saidHello=!0}function sayHello(e){if(!saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c PixiJS "+_const.VERSION+" - ✰ "+e+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+_const.VERSION+" - "+e+" - http://www.pixijs.com/");saidHello=!0}}function isWebGLSupported(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),o=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,o}catch(e){return!1}}function sign(e){return 0===e?0:e<0?-1:1}function destroyTextureCache(){var e=void 0;for(e in TextureCache)TextureCache[e].destroy();for(e in BaseTextureCache)BaseTextureCache[e].destroy()}function clearTextureCache(){var e=void 0;for(e in TextureCache)delete TextureCache[e];for(e in BaseTextureCache)delete BaseTextureCache[e]}function correctBlendMode(e,t){return premultiplyBlendMode[t?1:0][e]}function premultiplyTint(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var r=e>>16&255,o=e>>8&255,i=255&e;return r=r*t+.5|0,o=o*t+.5|0,i=i*t+.5|0,(255*t<<24)+(r<<16)+(o<<8)+i}function premultiplyRgba(e,t,r,o){return r=r||new Float32Array(4),o||void 0===o?(r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t):(r[0]=e[0],r[1]=e[1],r[2]=e[2]),r[3]=t,r}function premultiplyTintToRgba(e,t,r,o){return r=r||new Float32Array(4),r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(o||void 0===o)&&(r[0]*=t,r[1]*=t,r[2]*=t),r[3]=t,r}exports.__esModule=!0,exports.premultiplyBlendMode=exports.BaseTextureCache=exports.TextureCache=exports.earcut=exports.mixins=exports.pluginTarget=exports.EventEmitter=exports.removeItems=exports.isMobile=void 0,exports.uid=uid,exports.hex2rgb=hex2rgb,exports.hex2string=hex2string,exports.rgb2hex=rgb2hex,exports.getResolutionOfUrl=getResolutionOfUrl,exports.decomposeDataUri=decomposeDataUri,exports.getUrlFileExtension=getUrlFileExtension,exports.getSvgSize=getSvgSize,exports.skipHello=skipHello,exports.sayHello=sayHello,exports.isWebGLSupported=isWebGLSupported,exports.sign=sign,exports.destroyTextureCache=destroyTextureCache,exports.clearTextureCache=clearTextureCache,exports.correctBlendMode=correctBlendMode,exports.premultiplyTint=premultiplyTint,exports.premultiplyRgba=premultiplyRgba,exports.premultiplyTintToRgba=premultiplyTintToRgba;var _const=require("../const"),_settings=require("../settings"),_settings2=_interopRequireDefault(_settings),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_pluginTarget=require("./pluginTarget"),_pluginTarget2=_interopRequireDefault(_pluginTarget),_mixin=require("./mixin"),mixins=_interopRequireWildcard(_mixin),_ismobilejs=require("ismobilejs"),isMobile=_interopRequireWildcard(_ismobilejs),_removeArrayItems=require("remove-array-items"),_removeArrayItems2=_interopRequireDefault(_removeArrayItems),_mapPremultipliedBlendModes=require("./mapPremultipliedBlendModes"),_mapPremultipliedBlendModes2=_interopRequireDefault(_mapPremultipliedBlendModes),_earcut=require("earcut"),_earcut2=_interopRequireDefault(_earcut),nextUid=0,saidHello=!1;exports.isMobile=isMobile,exports.removeItems=_removeArrayItems2.default,exports.EventEmitter=_eventemitter2.default,exports.pluginTarget=_pluginTarget2.default,exports.mixins=mixins,exports.earcut=_earcut2.default;var TextureCache=exports.TextureCache=Object.create(null),BaseTextureCache=exports.BaseTextureCache=Object.create(null),premultiplyBlendMode=exports.premultiplyBlendMode=(0,_mapPremultipliedBlendModes2.default)();
},{"../const":52,"../settings":107,"./mapPremultipliedBlendModes":132,"./mixin":134,"./pluginTarget":135,"earcut":20,"eventemitter3":21,"ismobilejs":23,"remove-array-items":201}],132:[function(require,module,exports){
"use strict";function mapPremultipliedBlendModes(){for(var _=[],D=[],E=0;E<32;E++)_[E]=E,D[E]=E;_[_const.BLEND_MODES.NORMAL_NPM]=_const.BLEND_MODES.NORMAL,_[_const.BLEND_MODES.ADD_NPM]=_const.BLEND_MODES.ADD,_[_const.BLEND_MODES.SCREEN_NPM]=_const.BLEND_MODES.SCREEN,D[_const.BLEND_MODES.NORMAL]=_const.BLEND_MODES.NORMAL_NPM,D[_const.BLEND_MODES.ADD]=_const.BLEND_MODES.ADD_NPM,D[_const.BLEND_MODES.SCREEN]=_const.BLEND_MODES.SCREEN_NPM;var N=[];return N.push(D),N.push(_),N}exports.__esModule=!0,exports.default=mapPremultipliedBlendModes;var _const=require("../const");
},{"../const":52}],133:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function maxRecommendedTextures(e){return _ismobilejs2.default.tablet||_ismobilejs2.default.phone?4:e}exports.__esModule=!0,exports.default=maxRecommendedTextures;var _ismobilejs=require("ismobilejs"),_ismobilejs2=_interopRequireDefault(_ismobilejs);
},{"ismobilejs":23}],134:[function(require,module,exports){
"use strict";function mixin(i,n){if(i&&n)for(var e=Object.keys(n),r=0;r<e.length;++r){var x=e[r];Object.defineProperty(i,x,Object.getOwnPropertyDescriptor(n,x))}}function delayMixin(i,n){mixins.push(i,n)}function performMixins(){for(var i=0;i<mixins.length;i+=2)mixin(mixins[i],mixins[i+1]);mixins.length=0}exports.__esModule=!0,exports.mixin=mixin,exports.delayMixin=delayMixin,exports.performMixins=performMixins;var mixins=[];
},{}],135:[function(require,module,exports){
"use strict";function pluginTarget(i){i.__plugins={},i.registerPlugin=function(n,s){i.__plugins[n]=s},i.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var n in i.__plugins)this.plugins[n]=new i.__plugins[n](this)},i.prototype.destroyPlugins=function(){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;this.plugins=null}}exports.__esModule=!0,exports.default={mixin:function(i){pluginTarget(i)}};
},{}],136:[function(require,module,exports){
"use strict";function trimCanvas(t){var l=t.width,o=t.height,e=t.getContext("2d"),i=e.getImageData(0,0,l,o),a=i.data,n=a.length,r={top:null,left:null,right:null,bottom:null},g=void 0,h=void 0,u=void 0;for(g=0;g<n;g+=4)0!==a[g+3]&&(h=g/4%l,u=~~(g/4/l),null===r.top&&(r.top=u),null===r.left?r.left=h:h<r.left&&(r.left=h),null===r.right?r.right=h+1:r.right<h&&(r.right=h+1),null===r.bottom?r.bottom=u:r.bottom<u&&(r.bottom=u));return l=r.right-r.left,o=r.bottom-r.top+1,{height:o,width:l,data:e.getImageData(r.left,r.top,l,o)}}exports.__esModule=!0,exports.default=trimCanvas;
},{}],137:[function(require,module,exports){
"use strict";function warn(e){if(!warnings[e]){var t=(new Error).stack;void 0===t?console.warn("Deprecation Warning: ",e):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t))),warnings[e]=!0}}function deprecation(e){var t=e.mesh,r=e.particles,n=e.extras,s=e.filters,a=e.prepare,o=e.loaders,i=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return warn("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return warn("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return warn("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return warn("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return warn("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return warn("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return warn("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(t){warn("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return warn("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(t){warn("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return warn("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(t){warn("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return warn("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(t){warn("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return warn("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(t){warn("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return warn("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(t){warn("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return warn("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(t){warn("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return warn("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],p=0;p<u.length;p++)!function(t){var r=u[t];Object.defineProperty(e[r.parent],"DEFAULT",{get:function(){return warn("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]},set:function(t){warn("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),e.settings[r.target]=t}})}(p);Object.defineProperties(e.settings,{PRECISION:{get:function(){return warn("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(t){warn("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=t}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return warn("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}}),n&&Object.defineProperties(n,{TextureTransform:{get:function(){return warn("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),e.TextureMatrix}}}),e.DisplayObject.prototype.generateTexture=function(e,t,r){return warn("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,r)},e.Graphics.prototype.generateTexture=function(e,t){return warn("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},e.GroupD8.isSwapWidthHeight=function(t){return warn("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),e.GroupD8.isVertical(t)},e.RenderTexture.prototype.render=function(e,t,r,n){this.legacyRenderer.render(e,this,r,t,!n),warn("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return warn("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return warn("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return warn("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return warn("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(e){this.text=e,warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),e.Text.prototype.setText=function(e){this.text=e,warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(t){return warn("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return warn("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return warn("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return warn("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(t){return warn("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return warn("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),t=t||{},t instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){warn("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){warn("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),r=-1;this._fontSize=26;for(var n=0;n<t.length;++n)if(t[n].match(/(px|pt|em|%)/)){r=n,this._fontSize=t[n];break}this._fontWeight="normal";for(var s=0;s<r;++s)if(t[s].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[s];break}if(r>-1&&r<t.length-1){this._fontFamily="";for(var a=r+1;a<t.length;++a)this._fontFamily+=t[a]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,warn("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(t,r){e.Texture.addToCache(t,r),warn("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(t){return warn("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(s,{AbstractFilter:{get:function(){return warn("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}},VoidFilter:{get:function(){return warn("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),s.AlphaFilter}}}),e.utils.uuid=function(){return warn("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return warn("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var c=!0;if(Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(warn("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=e},get:function(){return c}}),a.BasePrepare&&(a.BasePrepare.prototype.register=function(e,t){return warn("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this}),a.canvas&&Object.defineProperty(a.canvas,"UPLOADS_PER_FRAME",{set:function(){warn("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return warn("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.webgl&&Object.defineProperty(a.webgl,"UPLOADS_PER_FRAME",{set:function(){warn("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return warn("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.Loader){var l=o.Resource,d=o.Loader;Object.defineProperties(l.prototype,{isJson:{get:function(){return warn("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===l.TYPE.JSON}},isXml:{get:function(){return warn("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===l.TYPE.XML}},isImage:{get:function(){return warn("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===l.TYPE.IMAGE}},isAudio:{get:function(){return warn("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===l.TYPE.AUDIO}},isVideo:{get:function(){return warn("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===l.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return warn("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return warn("The after() method is deprecated, please use use()."),this.use}}})}i.interactiveTarget&&Object.defineProperty(i.interactiveTarget,"defaultCursor",{set:function(e){warn("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return warn("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),i.InteractionManager&&(Object.defineProperty(i.InteractionManager,"defaultCursorStyle",{set:function(e){warn("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return warn("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(i.InteractionManager,"currentCursorStyle",{set:function(e){warn("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return warn("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}exports.__esModule=!0,exports.default=deprecation;var warnings={};
},{}],138:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),TEMP_RECT=new core.Rectangle,CanvasExtract=function(){function e(t){_classCallCheck(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,r=void 0,a=void 0,n=void 0,o=void 0;e&&(o=e instanceof core.RenderTexture?e:t.generateTexture(e)),o?(r=o.baseTexture._canvasRenderTarget.context,a=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(r=t.rootContext,n=TEMP_RECT,n.width=this.renderer.width,n.height=this.renderer.height);var i=n.width*a,s=n.height*a,c=new core.CanvasRenderTarget(i,s),u=r.getImageData(n.x*a,n.y*a,i,s);return c.context.putImageData(u,0,0),c.canvas},e.prototype.pixels=function(e){var t=this.renderer,r=void 0,a=void 0,n=void 0,o=void 0;return e&&(o=e instanceof core.RenderTexture?e:t.generateTexture(e)),o?(r=o.baseTexture._canvasRenderTarget.context,a=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(r=t.rootContext,n=TEMP_RECT,n.width=t.width,n.height=t.height),r.getImageData(0,0,n.width*a,n.height*a).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();exports.default=CanvasExtract,core.CanvasRenderer.registerPlugin("extract",CanvasExtract);
},{"../../core":71}],139:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _WebGLExtract=require("./webgl/WebGLExtract");Object.defineProperty(exports,"webgl",{enumerable:!0,get:function(){return _interopRequireDefault(_WebGLExtract).default}});var _CanvasExtract=require("./canvas/CanvasExtract");Object.defineProperty(exports,"canvas",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasExtract).default}});
},{"./canvas/CanvasExtract":138,"./webgl/WebGLExtract":140}],140:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),TEMP_RECT=new core.Rectangle,BYTES_PER_PIXEL=4,WebGLExtract=function(){function e(r){_classCallCheck(this,e),this.renderer=r,r.extract=this}return e.prototype.image=function(e){var r=new Image;return r.src=this.base64(e),r},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var r=this.renderer,t=void 0,n=void 0,a=void 0,i=!1,o=void 0,s=!1;e&&(e instanceof core.RenderTexture?o=e:(o=this.renderer.generateTexture(e),s=!0)),o?(t=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=t.resolution,a=o.frame,i=!1):(t=this.renderer.rootRenderTarget,n=t.resolution,i=!0,a=TEMP_RECT,a.width=t.size.width,a.height=t.size.height);var d=a.width*n,c=a.height*n,u=new core.CanvasRenderTarget(d,c);if(t){r.bindRenderTarget(t);var h=new Uint8Array(BYTES_PER_PIXEL*d*c),l=r.gl;l.readPixels(a.x*n,a.y*n,d,c,l.RGBA,l.UNSIGNED_BYTE,h);var T=u.context.getImageData(0,0,d,c);T.data.set(h),u.context.putImageData(T,0,0),i&&(u.context.scale(1,-1),u.context.drawImage(u.canvas,0,-c))}return s&&o.destroy(!0),u.canvas},e.prototype.pixels=function(e){var r=this.renderer,t=void 0,n=void 0,a=void 0,i=void 0,o=!1;e&&(e instanceof core.RenderTexture?i=e:(i=this.renderer.generateTexture(e),o=!0)),i?(t=i.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],n=t.resolution,a=i.frame):(t=this.renderer.rootRenderTarget,n=t.resolution,a=TEMP_RECT,a.width=t.size.width,a.height=t.size.height);var s=a.width*n,d=a.height*n,c=new Uint8Array(BYTES_PER_PIXEL*s*d);if(t){r.bindRenderTarget(t);var u=r.gl;u.readPixels(a.x*n,a.y*n,s,d,u.RGBA,u.UNSIGNED_BYTE,c)}return o&&i.destroy(!0),c},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();exports.default=WebGLExtract,core.WebGLRenderer.registerPlugin("extract",WebGLExtract);
},{"../../core":71}],141:[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),_core=require("../core"),core=_interopRequireWildcard(_core),AnimatedSprite=function(t){function e(r,i){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this,r[0]instanceof core.Texture?r[0]:r[0].texture));return n._textures=null,n._durations=null,n.textures=r,n._autoUpdate=!1!==i,n.animationSpeed=1,n.loop=!0,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n.playing=!1,n}return _inherits(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&core.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&core.ticker.shared.add(this.update,this,core.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var r=[],i=0;i<t.length;++i)r.push(core.Texture.fromFrame(t[i]));return new e(r)},e.fromImages=function(t){for(var r=[],i=0;i<t.length;++i)r.push(core.Texture.fromImage(t[i]));return new e(r)},_createClass(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof core.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(core.Sprite);exports.default=AnimatedSprite;
},{"../core":71}],142:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_core=require("../core"),core=_interopRequireWildcard(_core),_ObservablePoint=require("../core/math/ObservablePoint"),_ObservablePoint2=_interopRequireDefault(_ObservablePoint),_utils=require("../core/utils"),_settings=require("../core/settings"),_settings2=_interopRequireDefault(_settings),BitmapText=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e);var r=_possibleConstructorReturn(this,t.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},r.font=n.font,r._text=i,r._maxWidth=0,r._maxLineHeight=0,r._anchor=new _ObservablePoint2.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return _inherits(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new core.Point,r=[],s=[],o=null,a=0,h=0,u=0,f=-1,l=0,c=0,g=0,p=0;p<this.text.length;p++){var _=this.text.charCodeAt(p);if(/(\s)/.test(this.text.charAt(p))&&(f=p,l=a),/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))s.push(a),h=Math.max(h,a),u++,n.x=0,n.y+=t.lineHeight,o=null;else if(-1!==f&&this._maxWidth>0&&n.x*i>this._maxWidth)core.utils.removeItems(r,f-c,p-f),p=f,f=-1,++c,s.push(l),h=Math.max(h,l),u++,n.x=0,n.y+=t.lineHeight,o=null;else{var x=t.chars[_];x&&(o&&x.kerning[o]&&(n.x+=x.kerning[o]),r.push({texture:x.texture,line:u,charCode:_,position:new core.Point(n.x+x.xOffset,n.y+x.yOffset)}),a=n.x+(x.texture.width+x.xOffset),n.x+=x.xAdvance,g=Math.max(g,x.yOffset+x.texture.height),o=_)}}s.push(a),h=Math.max(h,a);for(var y=[],d=0;d<=u;d++){var m=0;"right"===this._font.align?m=h-s[d]:"center"===this._font.align&&(m=(h-s[d])/2),y.push(m)}for(var b=r.length,v=this.tint,O=0;O<b;O++){var A=this._glyphs[O];A?A.texture=r[O].texture:(A=new core.Sprite(r[O].texture),this._glyphs.push(A)),A.position.x=(r[O].position.x+y[r[O].line])*i,A.position.y=r[O].position.y*i,A.scale.x=A.scale.y=i,A.tint=v,A.parent||this.addChild(A)}for(var T=b;T<this._glyphs.length;++T)this.removeChild(this._glyphs[T]);if(this._textWidth=h*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var k=0;k<b;k++)this._glyphs[k].x-=this._textWidth*this.anchor.x,this._glyphs[k].y-=this._textHeight*this.anchor.y;this._maxLineHeight=g*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var n={},r=t.getElementsByTagName("info")[0],s=t.getElementsByTagName("common")[0],o=t.getElementsByTagName("page")[0].getAttribute("file"),a=(0,_utils.getResolutionOfUrl)(o,_settings2.default.RESOLUTION);n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(s.getAttribute("lineHeight"),10)/a,n.chars={};for(var h=t.getElementsByTagName("char"),u=0;u<h.length;u++){var f=h[u],l=parseInt(f.getAttribute("id"),10),c=new core.Rectangle(parseInt(f.getAttribute("x"),10)/a+i.frame.x/a,parseInt(f.getAttribute("y"),10)/a+i.frame.y/a,parseInt(f.getAttribute("width"),10)/a,parseInt(f.getAttribute("height"),10)/a);n.chars[l]={xOffset:parseInt(f.getAttribute("xoffset"),10)/a,yOffset:parseInt(f.getAttribute("yoffset"),10)/a,xAdvance:parseInt(f.getAttribute("xadvance"),10)/a,kerning:{},texture:new core.Texture(i.baseTexture,c)}}for(var g=t.getElementsByTagName("kerning"),p=0;p<g.length;p++){var _=g[p],x=parseInt(_.getAttribute("first"),10)/a,y=parseInt(_.getAttribute("second"),10)/a,d=parseInt(_.getAttribute("amount"),10)/a;n.chars[y]&&(n.chars[y].kerning[x]=d)}return e.fonts[n.font]=n,n},_createClass(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(core.Container);exports.default=BitmapText,BitmapText.fonts={};
},{"../core":71,"../core/math/ObservablePoint":74,"../core/settings":107,"../core/utils":131}],143:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),_core=require("../core"),core=_interopRequireWildcard(_core),_CanvasTinter=require("../core/sprites/canvas/CanvasTinter"),_CanvasTinter2=_interopRequireDefault(_CanvasTinter),tempPoint=new core.Point,TilingSprite=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;_classCallCheck(this,e);var o=_possibleConstructorReturn(this,t.call(this,i));return o.tileTransform=new core.TransformStatic,o._width=r,o._height=n,o._canvasPattern=null,o.uvTransform=i.transform||new core.TextureMatrix(i),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return _inherits(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,r=this.worldTransform,n=t.resolution,o=e.baseTexture,s=o.resolution,a=this.tilePosition.x/this.tileScale.x%e._frame.width*s,h=this.tilePosition.y/this.tileScale.y%e._frame.height*s;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new core.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this.tintedTexture=_CanvasTinter2.default.getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(o.source,-e._frame.x*s,-e._frame.y*s),this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/s,this.tileScale.y/s);var u=this.anchor.x*-this._width,l=this.anchor.y*-this._height;this.uvRespectAnchor?(i.translate(a,h),i.fillRect(-a+u,-h+l,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(i.translate(a+u,h+l),i.fillRect(-a,-h,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new core.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);var e=this._width,i=this._height,r=-e*this.anchor._x;if(tempPoint.x>=r&&tempPoint.x<r+e){var n=-i*this.anchor._y;if(tempPoint.y>=n&&tempPoint.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,r){return new e(core.Texture.from(t),i,r)},e.fromFrame=function(t,i,r){var n=core.utils.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(n,i,r)},e.fromImage=function(t,i,r,n,o){return new e(core.Texture.fromImage(t,n,o),i,r)},_createClass(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(core.Sprite);exports.default=TilingSprite;
},{"../core":71,"../core/sprites/canvas/CanvasTinter":110}],144:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _core=require("../core"),core=_interopRequireWildcard(_core),_Texture=require("../core/textures/Texture"),_Texture2=_interopRequireDefault(_Texture),_BaseTexture=require("../core/textures/BaseTexture"),_BaseTexture2=_interopRequireDefault(_BaseTexture),_utils=require("../core/utils"),DisplayObject=core.DisplayObject,_tempMatrix=new core.Matrix;DisplayObject.prototype._cacheAsBitmap=!1,DisplayObject.prototype._cacheData=!1;var CacheData=function t(){_classCallCheck(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(DisplayObject.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new CacheData),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),DisplayObject.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},DisplayObject.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var a=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;a.pad(i)}var r=t._activeRenderTarget,s=t.filterManager.filterStack,n=core.RenderTexture.create(0|a.width,0|a.height),h="cacheAsBitmap_"+(0,_utils.uid)();this._cacheData.textureCacheId=h,_BaseTexture2.default.addToCache(n.baseTexture,h),_Texture2.default.addToCache(n,h);var c=_tempMatrix;c.tx=-a.x,c.ty=-a.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,n,!0,c,!0),t.bindRenderTarget(r),t.filterManager.filterStack=s,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var o=new core.Sprite(n);o.transform.worldTransform=this.transform.worldTransform,o.anchor.x=-a.x/a.width,o.anchor.y=-a.y/a.height,o.alpha=e,o._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=o,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=o.containsPoint.bind(o)}},DisplayObject.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},DisplayObject.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),a=this.alpha;this.alpha=1;var i=t.context,r=core.RenderTexture.create(0|e.width,0|e.height),s="cacheAsBitmap_"+(0,_utils.uid)();this._cacheData.textureCacheId=s,_BaseTexture2.default.addToCache(r.baseTexture,s),_Texture2.default.addToCache(r,s);var n=_tempMatrix;this.transform.localTransform.copy(n),n.invert(),n.tx-=e.x,n.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,r,!0,n,!1),t.context=i,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var h=new core.Sprite(r);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h._bounds=this._bounds,h.alpha=a,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=h,this.containsPoint=h.containsPoint.bind(h)}},DisplayObject.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_BaseTexture2.default.removeFromCache(this._cacheData.textureCacheId),_Texture2.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},DisplayObject.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};
},{"../core":71,"../core/textures/BaseTexture":118,"../core/textures/Texture":121,"../core/utils":131}],145:[function(require,module,exports){
"use strict";function _interopRequireWildcard(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}var _core=require("../core"),core=_interopRequireWildcard(_core);core.DisplayObject.prototype.name=null,core.Container.prototype.getChildByName=function(r){for(var e=0;e<this.children.length;e++)if(this.children[e].name===r)return this.children[e];return null};
},{"../core":71}],146:[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}var _core=require("../core"),core=_interopRequireWildcard(_core);core.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new core.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};
},{"../core":71}],147:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.BitmapText=exports.TilingSpriteRenderer=exports.TilingSprite=exports.AnimatedSprite=void 0;var _AnimatedSprite=require("./AnimatedSprite");Object.defineProperty(exports,"AnimatedSprite",{enumerable:!0,get:function(){return _interopRequireDefault(_AnimatedSprite).default}});var _TilingSprite=require("./TilingSprite");Object.defineProperty(exports,"TilingSprite",{enumerable:!0,get:function(){return _interopRequireDefault(_TilingSprite).default}});var _TilingSpriteRenderer=require("./webgl/TilingSpriteRenderer");Object.defineProperty(exports,"TilingSpriteRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_TilingSpriteRenderer).default}});var _BitmapText=require("./BitmapText");Object.defineProperty(exports,"BitmapText",{enumerable:!0,get:function(){return _interopRequireDefault(_BitmapText).default}}),require("./cacheAsBitmap"),require("./getChildByName"),require("./getGlobalPosition");
},{"./AnimatedSprite":141,"./BitmapText":142,"./TilingSprite":143,"./cacheAsBitmap":144,"./getChildByName":145,"./getGlobalPosition":146,"./webgl/TilingSpriteRenderer":148}],148:[function(require,module,exports){
"use strict";function _interopRequireWildcard(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e.default=r,e}function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(r,e){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?r:e}function _inherits(r,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(r,e):r.__proto__=e)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_const=require("../../core/const"),_path=require("path"),tempMat=new core.Matrix,TilingSpriteRenderer=function(r){function e(o){_classCallCheck(this,e);var t=_possibleConstructorReturn(this,r.call(this,o));return t.shader=null,t.simpleShader=null,t.quad=null,t}return _inherits(e,r),e.prototype.onContextChange=function(){var r=this.renderer.gl;this.shader=new core.Shader(r,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new core.Shader(r,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new core.Quad(r,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(r){var e=this.renderer,o=this.quad;e.bindVao(o.vao);var t=o.vertices;t[0]=t[6]=r._width*-r.anchor.x,t[1]=t[3]=r._height*-r.anchor.y,t[2]=t[4]=r._width*(1-r.anchor.x),t[5]=t[7]=r._height*(1-r.anchor.y),r.uvRespectAnchor&&(t=o.uvs,t[0]=t[6]=-r.anchor.x,t[1]=t[3]=-r.anchor.y,t[2]=t[4]=1-r.anchor.x,t[5]=t[7]=1-r.anchor.y),o.upload();var n=r._texture,a=n.baseTexture,i=r.tileTransform.localTransform,u=r.uvTransform,s=a.isPowerOfTwo&&n.frame.width===a.width&&n.frame.height===a.height;s&&(a._glTextures[e.CONTEXT_UID]?s=a.wrapMode!==_const.WRAP_MODES.CLAMP:a.wrapMode===_const.WRAP_MODES.CLAMP&&(a.wrapMode=_const.WRAP_MODES.REPEAT));var l=s?this.simpleShader:this.shader;e.bindShader(l);var c=n.width,d=n.height,p=r._width,m=r._height;tempMat.set(i.a*c/p,i.b*c/m,i.c*d/p,i.d*d/m,i.tx/p,i.ty/m),tempMat.invert(),s?tempMat.prepend(u.mapCoord):(l.uniforms.uMapCoord=u.mapCoord.toArray(!0),l.uniforms.uClampFrame=u.uClampFrame,l.uniforms.uClampOffset=u.uClampOffset),l.uniforms.uTransform=tempMat.toArray(!0),l.uniforms.uColor=core.utils.premultiplyTintToRgba(r.tint,r.worldAlpha,l.uniforms.uColor,a.premultipliedAlpha),l.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),l.uniforms.uSampler=e.bindTexture(n),e.setBlendMode(core.utils.correctBlendMode(r.blendMode,a.premultipliedAlpha)),o.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(core.ObjectRenderer);exports.default=TilingSpriteRenderer,core.WebGLRenderer.registerPlugin("tilingSprite",TilingSpriteRenderer);
},{"../../core":71,"../../core/const":52,"path":28}],149:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),AlphaFilter=function(e){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;_classCallCheck(this,r);var n=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return n.alpha=t,n.glShaderKey="alpha",n}return _inherits(r,e),_createClass(r,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),r}(core.Filter);exports.default=AlphaFilter;
},{"../../core":71,"path":28}],150:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var l=e[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}return function(e,r,l){return r&&t(e.prototype,r),l&&t(e,l),e}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_BlurXFilter=require("./BlurXFilter"),_BlurXFilter2=_interopRequireDefault(_BlurXFilter),_BlurYFilter=require("./BlurYFilter"),_BlurYFilter2=_interopRequireDefault(_BlurYFilter),BlurFilter=function(t){function e(r,l,i,u){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,t.call(this));return n.blurXFilter=new _BlurXFilter2.default(r,l,i,u),n.blurYFilter=new _BlurYFilter2.default(r,l,i,u),n.padding=0,n.resolution=i||core.settings.RESOLUTION,n.quality=l||4,n.blur=r||8,n}return _inherits(e,t),e.prototype.apply=function(t,e,r){var l=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,l,!0),this.blurYFilter.apply(t,l,r,!1),t.returnRenderTarget(l)},_createClass(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(core.Filter);exports.default=BlurFilter;
},{"../../core":71,"./BlurXFilter":151,"./BlurYFilter":152}],151:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_generateBlurVertSource=require("./generateBlurVertSource"),_generateBlurVertSource2=_interopRequireDefault(_generateBlurVertSource),_generateBlurFragSource=require("./generateBlurFragSource"),_generateBlurFragSource2=_interopRequireDefault(_generateBlurFragSource),_getMaxBlurKernelSize=require("./getMaxBlurKernelSize"),_getMaxBlurKernelSize2=_interopRequireDefault(_getMaxBlurKernelSize),BlurXFilter=function(e){function r(t,n,i,u){_classCallCheck(this,r),u=u||5;var o=(0,_generateBlurVertSource2.default)(u,!0),a=(0,_generateBlurFragSource2.default)(u),s=_possibleConstructorReturn(this,e.call(this,o,a));return s.resolution=i||core.settings.RESOLUTION,s._quality=0,s.quality=n||4,s.strength=t||8,s.firstRun=!0,s}return _inherits(r,e),r.prototype.apply=function(e,r,t,n){if(this.firstRun){var i=e.renderer.gl,u=(0,_getMaxBlurKernelSize2.default)(i);this.vertexSrc=(0,_generateBlurVertSource2.default)(u,!0),this.fragmentSrc=(0,_generateBlurFragSource2.default)(u),this.firstRun=!1}if(this.uniforms.strength=1/t.size.width*(t.size.width/r.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,r,t,n);else{for(var o=e.getRenderTarget(!0),a=r,s=o,l=0;l<this.passes-1;l++){e.applyFilter(this,a,s,!0);var c=s;s=a,a=c}e.applyFilter(this,a,t,n),e.returnRenderTarget(o)}},_createClass(r,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),r}(core.Filter);exports.default=BlurXFilter;
},{"../../core":71,"./generateBlurFragSource":153,"./generateBlurVertSource":154,"./getMaxBlurKernelSize":155}],152:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_generateBlurVertSource=require("./generateBlurVertSource"),_generateBlurVertSource2=_interopRequireDefault(_generateBlurVertSource),_generateBlurFragSource=require("./generateBlurFragSource"),_generateBlurFragSource2=_interopRequireDefault(_generateBlurFragSource),_getMaxBlurKernelSize=require("./getMaxBlurKernelSize"),_getMaxBlurKernelSize2=_interopRequireDefault(_getMaxBlurKernelSize),BlurYFilter=function(e){function r(t,n,i,u){_classCallCheck(this,r),u=u||5;var o=(0,_generateBlurVertSource2.default)(u,!1),a=(0,_generateBlurFragSource2.default)(u),s=_possibleConstructorReturn(this,e.call(this,o,a));return s.resolution=i||core.settings.RESOLUTION,s._quality=0,s.quality=n||4,s.strength=t||8,s.firstRun=!0,s}return _inherits(r,e),r.prototype.apply=function(e,r,t,n){if(this.firstRun){var i=e.renderer.gl,u=(0,_getMaxBlurKernelSize2.default)(i);this.vertexSrc=(0,_generateBlurVertSource2.default)(u,!1),this.fragmentSrc=(0,_generateBlurFragSource2.default)(u),this.firstRun=!1}if(this.uniforms.strength=1/t.size.height*(t.size.height/r.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,r,t,n);else{for(var o=e.getRenderTarget(!0),a=r,s=o,l=0;l<this.passes-1;l++){e.applyFilter(this,a,s,!0);var c=s;s=a,a=c}e.applyFilter(this,a,t,n),e.returnRenderTarget(o)}},_createClass(r,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),r}(core.Filter);exports.default=BlurYFilter;
},{"../../core":71,"./generateBlurFragSource":153,"./generateBlurVertSource":154,"./getMaxBlurKernelSize":155}],153:[function(require,module,exports){
"use strict";function generateFragBlurSource(e){for(var r=GAUSSIAN_VALUES[e],a=r.length,l=fragTemplate,o="",u="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",n=void 0,t=0;t<e;t++){var i=u.replace("%index%",t);n=t,t>=a&&(n=e-t-1),i=i.replace("%value%",r[n]),o+=i,o+="\n"}return l=l.replace("%blur%",o),l=l.replace("%size%",e)}exports.__esModule=!0,exports.default=generateFragBlurSource;var GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");
},{}],154:[function(require,module,exports){
"use strict";function generateVertBlurSource(e,r){var t=Math.ceil(e/2),o=vertTemplate,a="",i=void 0;i=r?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var n=0;n<e;n++){var l=i.replace("%index%",n);l=l.replace("%sampleIndex%",n-(t-1)+".0"),a+=l,a+="\n"}return o=o.replace("%blur%",a),o=o.replace("%size%",e)}exports.__esModule=!0,exports.default=generateVertBlurSource;var vertTemplate=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n");
},{}],155:[function(require,module,exports){
"use strict";function getMaxKernelSize(e){for(var r=e.getParameter(e.MAX_VARYING_VECTORS),t=15;t>r;)t-=2;return t}exports.__esModule=!0,exports.default=getMaxKernelSize;
},{}],156:[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,r){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?t:r}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(t,r):t.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function t(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(r,e,o){return e&&t(r.prototype,e),o&&t(r,o),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),ColorMatrixFilter=function(t){function r(){_classCallCheck(this,r);var e=_possibleConstructorReturn(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return e.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],e.alpha=1,e}return _inherits(r,t),r.prototype._loadMatrix=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=t;r&&(this._multiply(e,this.uniforms.m,t),e=this._colorMatrix(e)),this.uniforms.m=e},r.prototype._multiply=function(t,r,e){return t[0]=r[0]*e[0]+r[1]*e[5]+r[2]*e[10]+r[3]*e[15],t[1]=r[0]*e[1]+r[1]*e[6]+r[2]*e[11]+r[3]*e[16],t[2]=r[0]*e[2]+r[1]*e[7]+r[2]*e[12]+r[3]*e[17],t[3]=r[0]*e[3]+r[1]*e[8]+r[2]*e[13]+r[3]*e[18],t[4]=r[0]*e[4]+r[1]*e[9]+r[2]*e[14]+r[3]*e[19]+r[4],t[5]=r[5]*e[0]+r[6]*e[5]+r[7]*e[10]+r[8]*e[15],t[6]=r[5]*e[1]+r[6]*e[6]+r[7]*e[11]+r[8]*e[16],t[7]=r[5]*e[2]+r[6]*e[7]+r[7]*e[12]+r[8]*e[17],t[8]=r[5]*e[3]+r[6]*e[8]+r[7]*e[13]+r[8]*e[18],t[9]=r[5]*e[4]+r[6]*e[9]+r[7]*e[14]+r[8]*e[19]+r[9],t[10]=r[10]*e[0]+r[11]*e[5]+r[12]*e[10]+r[13]*e[15],t[11]=r[10]*e[1]+r[11]*e[6]+r[12]*e[11]+r[13]*e[16],t[12]=r[10]*e[2]+r[11]*e[7]+r[12]*e[12]+r[13]*e[17],t[13]=r[10]*e[3]+r[11]*e[8]+r[12]*e[13]+r[13]*e[18],t[14]=r[10]*e[4]+r[11]*e[9]+r[12]*e[14]+r[13]*e[19]+r[14],t[15]=r[15]*e[0]+r[16]*e[5]+r[17]*e[10]+r[18]*e[15],t[16]=r[15]*e[1]+r[16]*e[6]+r[17]*e[11]+r[18]*e[16],t[17]=r[15]*e[2]+r[16]*e[7]+r[17]*e[12]+r[18]*e[17],t[18]=r[15]*e[3]+r[16]*e[8]+r[17]*e[13]+r[18]*e[18],t[19]=r[15]*e[4]+r[16]*e[9]+r[17]*e[14]+r[18]*e[19]+r[19],t},r.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},r.prototype.brightness=function(t,r){var e=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.greyscale=function(t,r){var e=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.blackAndWhite=function(t){var r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var e=Math.cos(t),o=Math.sin(t),n=Math.sqrt,i=1/3,a=n(i),u=e+(1-e)*i,l=i*(1-e)-a*o,s=i*(1-e)+a*o,c=i*(1-e)+a*o,p=e+i*(1-e),f=i*(1-e)-a*o,h=i*(1-e)-a*o,m=i*(1-e)+a*o,y=e+i*(1-e),v=[u,l,s,0,0,c,p,f,0,0,h,m,y,0,0,0,0,0,1,0];this._loadMatrix(v,r)},r.prototype.contrast=function(t,r){var e=(t||0)+1,o=-.5*(e-1),n=[e,0,0,0,o,0,e,0,0,o,0,0,e,0,o,0,0,0,1,0];this._loadMatrix(n,r)},r.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments[1],e=2*t/3+1,o=-.5*(e-1),n=[e,o,o,0,0,o,e,o,0,0,o,o,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(t){var r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.sepia=function(t){var r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.technicolor=function(t){var r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.polaroid=function(t){var r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.toBGR=function(t){var r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.kodachrome=function(t){var r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.browni=function(t){var r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.vintage=function(t){var r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.colorTone=function(t,r,e,o,n){t=t||.2,r=r||.15,e=e||16770432,o=o||3375104;var i=(e>>16&255)/255,a=(e>>8&255)/255,u=(255&e)/255,l=(o>>16&255)/255,s=(o>>8&255)/255,c=(255&o)/255,p=[.3,.59,.11,0,0,i,a,u,t,0,l,s,c,r,0,i-l,a-s,u-c,0,0];this._loadMatrix(p,n)},r.prototype.night=function(t,r){t=t||.1;var e=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.predator=function(t,r){var e=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(e,r)},r.prototype.lsd=function(t){var r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)},r.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},_createClass(r,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),r}(core.Filter);exports.default=ColorMatrixFilter,ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;
},{"../../core":71,"path":28}],157:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),DisplacementFilter=function(e){function r(t,n){_classCallCheck(this,r);var i=new core.Matrix;t.renderable=!1;var o=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return o.maskSprite=t,o.maskMatrix=i,o.uniforms.mapSampler=t._texture,o.uniforms.filterMatrix=i,o.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),o.scale=new core.Point(n,n),o}return _inherits(r,e),r.prototype.apply=function(e,r,t){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,e.applyFilter(this,r,t)},_createClass(r,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),r}(core.Filter);exports.default=DisplacementFilter;
},{"../../core":71,"path":28}],158:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),FXAAFilter=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return _inherits(r,e),r}(core.Filter);exports.default=FXAAFilter;
},{"../../core":71,"path":28}],159:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _FXAAFilter=require("./fxaa/FXAAFilter");Object.defineProperty(exports,"FXAAFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_FXAAFilter).default}});var _NoiseFilter=require("./noise/NoiseFilter");Object.defineProperty(exports,"NoiseFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_NoiseFilter).default}});var _DisplacementFilter=require("./displacement/DisplacementFilter");Object.defineProperty(exports,"DisplacementFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_DisplacementFilter).default}});var _BlurFilter=require("./blur/BlurFilter");Object.defineProperty(exports,"BlurFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_BlurFilter).default}});var _BlurXFilter=require("./blur/BlurXFilter");Object.defineProperty(exports,"BlurXFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_BlurXFilter).default}});var _BlurYFilter=require("./blur/BlurYFilter");Object.defineProperty(exports,"BlurYFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_BlurYFilter).default}});var _ColorMatrixFilter=require("./colormatrix/ColorMatrixFilter");Object.defineProperty(exports,"ColorMatrixFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_ColorMatrixFilter).default}});var _AlphaFilter=require("./alpha/AlphaFilter");Object.defineProperty(exports,"AlphaFilter",{enumerable:!0,get:function(){return _interopRequireDefault(_AlphaFilter).default}});
},{"./alpha/AlphaFilter":149,"./blur/BlurFilter":150,"./blur/BlurXFilter":151,"./blur/BlurYFilter":152,"./colormatrix/ColorMatrixFilter":156,"./displacement/DisplacementFilter":157,"./fxaa/FXAAFilter":158,"./noise/NoiseFilter":160}],160:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,n,o){return n&&e(r.prototype,n),o&&e(r,o),r}}(),_core=require("../../core"),core=_interopRequireWildcard(_core),_path=require("path"),NoiseFilter=function(e){function r(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();_classCallCheck(this,r);var t=_possibleConstructorReturn(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return t.noise=n,t.seed=o,t}return _inherits(r,e),_createClass(r,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),r}(core.Filter);exports.default=NoiseFilter;
},{"../../core":71,"path":28}],161:[function(require,module,exports){
(function (global){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.loader=exports.prepare=exports.particles=exports.mesh=exports.loaders=exports.interaction=exports.filters=exports.extras=exports.extract=exports.accessibility=void 0;var _polyfill=require("./polyfill");Object.keys(_polyfill).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _polyfill[e]}})});var _core=require("./core");Object.keys(_core).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _core[e]}})});var _deprecation=require("./deprecation"),_deprecation2=_interopRequireDefault(_deprecation),_accessibility=require("./accessibility"),accessibility=_interopRequireWildcard(_accessibility),_extract=require("./extract"),extract=_interopRequireWildcard(_extract),_extras=require("./extras"),extras=_interopRequireWildcard(_extras),_filters=require("./filters"),filters=_interopRequireWildcard(_filters),_interaction=require("./interaction"),interaction=_interopRequireWildcard(_interaction),_loaders=require("./loaders"),loaders=_interopRequireWildcard(_loaders),_mesh=require("./mesh"),mesh=_interopRequireWildcard(_mesh),_particles=require("./particles"),particles=_interopRequireWildcard(_particles),_prepare=require("./prepare"),prepare=_interopRequireWildcard(_prepare);_core.utils.mixins.performMixins();var loader=loaders.shared||null;exports.accessibility=accessibility,exports.extract=extract,exports.extras=extras,exports.filters=filters,exports.interaction=interaction,exports.loaders=loaders,exports.mesh=mesh,exports.particles=particles,exports.prepare=prepare,exports.loader=loader,"function"==typeof _deprecation2.default&&(0,_deprecation2.default)(exports),global.PIXI=exports;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./accessibility":48,"./core":71,"./deprecation":137,"./extract":139,"./extras":147,"./filters":159,"./interaction":166,"./loaders":169,"./mesh":178,"./particles":181,"./polyfill":188,"./prepare":192}],162:[function(require,module,exports){
"use strict";function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i.default=t,i}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var r=i[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(i,e,r){return e&&t(i.prototype,e),r&&t(i,r),i}}(),_core=require("../core"),core=_interopRequireWildcard(_core),InteractionData=function(){function t(){_classCallCheck(this,t),this.global=new core.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,i,e){return t.worldTransform.applyInverse(e||this.global,i)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},_createClass(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();exports.default=InteractionData;
},{"../core":71}],163:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var InteractionEvent=function(){function t(){_classCallCheck(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();exports.default=InteractionEvent;
},{}],164:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_core=require("../core"),core=_interopRequireWildcard(_core),_InteractionData=require("./InteractionData"),_InteractionData2=_interopRequireDefault(_InteractionData),_InteractionEvent=require("./InteractionEvent"),_InteractionEvent2=_interopRequireDefault(_InteractionEvent),_InteractionTrackingData=require("./InteractionTrackingData"),_InteractionTrackingData2=_interopRequireDefault(_InteractionTrackingData),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_interactiveTarget=require("./interactiveTarget"),_interactiveTarget2=_interopRequireDefault(_interactiveTarget);core.utils.mixins.delayMixin(core.DisplayObject.prototype,_interactiveTarget2.default);var MOUSE_POINTER_ID=1,hitTestEvent={target:null,data:{global:null}},InteractionManager=function(t){function e(n,i){_classCallCheck(this,e);var o=_possibleConstructorReturn(this,t.call(this));return i=i||{},o.renderer=n,o.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,o.interactionFrequency=i.interactionFrequency||10,o.mouse=new _InteractionData2.default,o.mouse.identifier=MOUSE_POINTER_ID,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[MOUSE_POINTER_ID]=o.mouse,o.interactionDataPool=[],o.eventData=new _InteractionEvent2.default,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o._tempPoint=new core.Point,o.resolution=1,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return _inherits(e,t),e.prototype.hitTest=function(t,e){return hitTestEvent.target=null,hitTestEvent.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(hitTestEvent,e,null,!0),hitTestEvent.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(core.ticker.shared.add(this.update,this,core.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(core.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var n=this.activeInteractionData[e];if(n.originalEvent&&"touch"!==n.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":_typeof(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopped||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.mapPositionToPoint=function(t,e,n){var i=void 0;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var o=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*o,t.y=(n-i.top)*(this.interactionDOMElement.height/i.height)*o},e.prototype.processInteractive=function(t,e,n,i,o){if(!e||!e.visible)return!1;var r=t.data.global;o=e.interactive||o;var s=!1,a=o,c=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(r,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(i=!1,c=!1)),a=!1):e._mask&&i&&(e._mask.containsPoint(r)||(i=!1,c=!1)),c&&e.interactiveChildren&&e.children)for(var h=e.children,p=h.length-1;p>=0;p--){var u=h[p],l=this.processInteractive(t,u,n,i,a);if(l){if(!u.parent)continue;a=!1,l&&(t.target&&(i=!1),s=!0)}}return o&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(r)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),n&&n(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var n=e.length,i=0;i<n;i++){var o=e[i],r=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,r);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===o.pointerType)this.emit("touchstart",s);else if("mouse"===o.pointerType||"pen"===o.pointerType){var a=2===o.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var i=t.data,o=t.data.identifier;if(n)if(e.trackedPointers[o]||(e.trackedPointers[o]=new _InteractionTrackingData2.default(o)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var r=2===i.button;r?e.trackedPointers[o].rightDown=!0:e.trackedPointers[o].leftDown=!0,this.dispatchEvent(e,r?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var i=this.normalizeToPointerData(t),o=i.length,r=t.target!==this.interactionDOMElement?"outside":"",s=0;s<o;s++){var a=i[s],c=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,c);if(h.data.originalEvent=t,this.processInteractive(h,this.renderer._lastObjectRendered,n,e||!r),this.emit(e?"pointercancel":"pointerup"+r,h),"mouse"===a.pointerType||"pen"===a.pointerType){var p=2===a.button;this.emit(p?"rightup"+r:"mouseup"+r,h)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+r,h),this.releaseInteractionDataForPointerId(a.pointerId,c))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var i=t.data,o=t.data.identifier,r=e.trackedPointers[o],s="touch"===i.pointerType;if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button,c=_InteractionTrackingData2.default.FLAGS,h=a?c.RIGHT_DOWN:c.LEFT_DOWN,p=void 0!==r&&r.flags&h;n?(this.dispatchEvent(e,a?"rightup":"mouseup",t),p&&this.dispatchEvent(e,a?"rightclick":"click",t)):p&&this.dispatchEvent(e,a?"rightupoutside":"mouseupoutside",t),r&&(a?r.rightDown=!1:r.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),r&&(this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),r.over=!1))):r&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),r&&r.none&&delete e.trackedPointers[o]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var n=e.length,i=0;i<n;i++){var o=e[i],r=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,r);s.data.originalEvent=t;var a="touch"!==o.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===o.pointerType&&this.emit("touchmove",s),"mouse"!==o.pointerType&&"pen"!==o.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var i=t.data,o="touch"===i.pointerType,r="mouse"===i.pointerType||"pen"===i.pointerType;r&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),o&&this.dispatchEvent(e,"touchmove",t),r&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t),n=e[0];"mouse"===n.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,i);o.data.originalEvent=n,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",o),"mouse"===n.pointerType||"pen"===n.pointerType?this.emit("mouseout",o):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var i=t.data,o=t.data.identifier,r="mouse"===i.pointerType||"pen"===i.pointerType,s=e.trackedPointers[o];n&&!s&&(s=e.trackedPointers[o]=new _InteractionTrackingData2.default(o)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),r&&this.dispatchEvent(e,"mouseover",t)),r&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),r&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[o]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),n=e[0],i=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,i);o.data.originalEvent=n,"mouse"===n.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",o),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mouseover",o)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,n=void 0;return e===MOUSE_POINTER_ID||"mouse"===t.pointerType?n=this.mouse:this.activeInteractionData[e]?n=this.activeInteractionData[e]:(n=this.interactionDataPool.pop()||new _InteractionData2.default,n.identifier=e,this.activeInteractionData[e]=n),n.copyEvent(t),n},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(n.global.x=n.global.x/this.resolution,n.global.y=n.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,i=t.changedTouches.length;n<i;n++){var o=t.changedTouches[n];void 0===o.button&&(o.button=t.touches.length?1:0),void 0===o.buttons&&(o.buttons=t.touches.length?1:0),void 0===o.isPrimary&&(o.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===o.width&&(o.width=o.radiusX||1),void 0===o.height&&(o.height=o.radiusY||1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="touch"),void 0===o.pointerId&&(o.pointerId=o.identifier||0),void 0===o.pressure&&(o.pressure=o.force||.5),o.twist=0,o.tangentialPressure=0,void 0===o.layerX&&(o.layerX=o.offsetX=o.clientX),void 0===o.layerY&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,e.push(o)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=MOUSE_POINTER_ID),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(_eventemitter2.default);exports.default=InteractionManager,core.WebGLRenderer.registerPlugin("interaction",InteractionManager),core.CanvasRenderer.registerPlugin("interaction",InteractionManager);
},{"../core":71,"./InteractionData":162,"./InteractionEvent":163,"./InteractionTrackingData":165,"./interactiveTarget":167,"eventemitter3":21}],165:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),InteractionTrackingData=function(){function t(n){_classCallCheck(this,t),this._pointerId=n,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,n){this._flags=n?this._flags|t:this._flags&~t},_createClass(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();exports.default=InteractionTrackingData,InteractionTrackingData.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});
},{}],166:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _InteractionData=require("./InteractionData");Object.defineProperty(exports,"InteractionData",{enumerable:!0,get:function(){return _interopRequireDefault(_InteractionData).default}});var _InteractionManager=require("./InteractionManager");Object.defineProperty(exports,"InteractionManager",{enumerable:!0,get:function(){return _interopRequireDefault(_InteractionManager).default}});var _interactiveTarget=require("./interactiveTarget");Object.defineProperty(exports,"interactiveTarget",{enumerable:!0,get:function(){return _interopRequireDefault(_interactiveTarget).default}});var _InteractionTrackingData=require("./InteractionTrackingData");Object.defineProperty(exports,"InteractionTrackingData",{enumerable:!0,get:function(){return _interopRequireDefault(_InteractionTrackingData).default}});var _InteractionEvent=require("./InteractionEvent");Object.defineProperty(exports,"InteractionEvent",{enumerable:!0,get:function(){return _interopRequireDefault(_InteractionEvent).default}});
},{"./InteractionData":162,"./InteractionEvent":163,"./InteractionManager":164,"./InteractionTrackingData":165,"./interactiveTarget":167}],167:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};
},{}],168:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function parse(e,r){e.bitmapFont=_extras.BitmapText.registerFont(e.data,r)}exports.__esModule=!0,exports.parse=parse,exports.default=function(){return function(e,r){if(!e.data||e.type!==_resourceLoader.Resource.TYPE.XML)return void r();if(0===e.data.getElementsByTagName("page").length||0===e.data.getElementsByTagName("info").length||null===e.data.getElementsByTagName("info")[0].getAttribute("face"))return void r();var t=e.isDataUrl?"":path.dirname(e.url);e.isDataUrl&&("."===t&&(t=""),this.baseUrl&&t&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(t+="/")),(t=t.replace(this.baseUrl,""))&&"/"!==t.charAt(t.length-1)&&(t+="/");var a=t+e.data.getElementsByTagName("page")[0].getAttribute("file");if(_core.utils.TextureCache[a])parse(e,_core.utils.TextureCache[a]),r();else{var i={crossOrigin:e.crossOrigin,loadType:_resourceLoader.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+"_image",a,i,function(t){parse(e,t.texture),r()})}}};var _path=require("path"),path=_interopRequireWildcard(_path),_core=require("../core"),_resourceLoader=require("resource-loader"),_extras=require("../extras");
},{"../core":71,"../extras":147,"path":28,"resource-loader":206}],169:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.shared=exports.Resource=exports.textureParser=exports.getResourcePath=exports.spritesheetParser=exports.parseBitmapFontData=exports.bitmapFontParser=exports.Loader=void 0;var _bitmapFontParser=require("./bitmapFontParser");Object.defineProperty(exports,"bitmapFontParser",{enumerable:!0,get:function(){return _interopRequireDefault(_bitmapFontParser).default}}),Object.defineProperty(exports,"parseBitmapFontData",{enumerable:!0,get:function(){return _bitmapFontParser.parse}});var _spritesheetParser=require("./spritesheetParser");Object.defineProperty(exports,"spritesheetParser",{enumerable:!0,get:function(){return _interopRequireDefault(_spritesheetParser).default}}),Object.defineProperty(exports,"getResourcePath",{enumerable:!0,get:function(){return _spritesheetParser.getResourcePath}});var _textureParser=require("./textureParser");Object.defineProperty(exports,"textureParser",{enumerable:!0,get:function(){return _interopRequireDefault(_textureParser).default}});var _resourceLoader=require("resource-loader");Object.defineProperty(exports,"Resource",{enumerable:!0,get:function(){return _resourceLoader.Resource}});var _Application=require("../core/Application"),_Application2=_interopRequireDefault(_Application),_loader=require("./loader"),_loader2=_interopRequireDefault(_loader);exports.Loader=_loader2.default;var shared=new _loader2.default;shared.destroy=function(){},exports.shared=shared;var AppPrototype=_Application2.default.prototype;AppPrototype._loader=null,Object.defineProperty(AppPrototype,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?shared:new _loader2.default}return this._loader}}),AppPrototype._parentDestroy=AppPrototype.destroy,AppPrototype.destroy=function(e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e)};
},{"../core/Application":49,"./bitmapFontParser":168,"./loader":170,"./spritesheetParser":171,"./textureParser":172,"resource-loader":206}],170:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _resourceLoader=require("resource-loader"),_resourceLoader2=_interopRequireDefault(_resourceLoader),_blob=require("resource-loader/lib/middlewares/parsing/blob"),_eventemitter=require("eventemitter3"),_eventemitter2=_interopRequireDefault(_eventemitter),_textureParser=require("./textureParser"),_textureParser2=_interopRequireDefault(_textureParser),_spritesheetParser=require("./spritesheetParser"),_spritesheetParser2=_interopRequireDefault(_spritesheetParser),_bitmapFontParser=require("./bitmapFontParser"),_bitmapFontParser2=_interopRequireDefault(_bitmapFontParser),Loader=function(e){function r(t,o){_classCallCheck(this,r);var i=_possibleConstructorReturn(this,e.call(this,t,o));_eventemitter2.default.call(i);for(var n=0;n<r._pixiMiddleware.length;++n)i.use(r._pixiMiddleware[n]());return i.onStart.add(function(e){return i.emit("start",e)}),i.onProgress.add(function(e,r){return i.emit("progress",e,r)}),i.onError.add(function(e,r,t){return i.emit("error",e,r,t)}),i.onLoad.add(function(e,r){return i.emit("load",e,r)}),i.onComplete.add(function(e,r){return i.emit("complete",e,r)}),i}return _inherits(r,e),r.addPixiMiddleware=function(e){r._pixiMiddleware.push(e)},r.prototype.destroy=function(){this.removeAllListeners(),this.reset()},r}(_resourceLoader2.default);exports.default=Loader;for(var k in _eventemitter2.default.prototype)Loader.prototype[k]=_eventemitter2.default.prototype[k];Loader._pixiMiddleware=[_blob.blobMiddlewareFactory,_textureParser2.default,_spritesheetParser2.default,_bitmapFontParser2.default];var Resource=_resourceLoader2.default.Resource;Resource.setExtensionXhrType("fnt",Resource.XHR_RESPONSE_TYPE.DOCUMENT);
},{"./bitmapFontParser":168,"./spritesheetParser":171,"./textureParser":172,"eventemitter3":21,"resource-loader":206,"resource-loader/lib/middlewares/parsing/blob":207}],171:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getResourcePath(e,r){return e.isDataUrl?e.data.meta.image:_url2.default.resolve(e.url.replace(r,""),e.data.meta.image)}exports.__esModule=!0,exports.default=function(){return function(e,r){var t=e.name+"_image";if(!e.data||e.type!==_resourceLoader.Resource.TYPE.JSON||!e.data.frames||this.resources[t])return void r();var a={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},u=getResourcePath(e,this.baseUrl);this.add(t,u,a,function(t){if(t.error)return void r(t.error);var a=new _core.Spritesheet(t.texture.baseTexture,e.data,e.url);a.parse(function(){e.spritesheet=a,e.textures=a.textures,r()})})}},exports.getResourcePath=getResourcePath;var _resourceLoader=require("resource-loader"),_url=require("url"),_url2=_interopRequireDefault(_url),_core=require("../core");
},{"../core":71,"resource-loader":206,"url":209}],172:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0,exports.default=function(){return function(e,r){e.data&&e.type===_resourceLoader.Resource.TYPE.IMAGE&&(e.texture=_Texture2.default.fromLoader(e.data,e.url,e.name)),r()}};var _resourceLoader=require("resource-loader"),_Texture=require("../core/textures/Texture"),_Texture2=_interopRequireDefault(_Texture);
},{"../core/textures/Texture":121,"resource-loader":206}],173:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_core=require("../core"),core=_interopRequireWildcard(_core),_Texture=require("../core/textures/Texture"),_Texture2=_interopRequireDefault(_Texture),tempPoint=new core.Point,tempPolygon=new core.Polygon,Mesh=function(e){function t(r,n,o,i,s){_classCallCheck(this,t);var u=_possibleConstructorReturn(this,e.call(this));return u._texture=r||_Texture2.default.EMPTY,u.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]),u.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),u.indices=i||new Uint16Array([0,1,3,2]),u.dirty=0,u.indexDirty=0,u.blendMode=core.BLEND_MODES.NORMAL,u.canvasPadding=core.settings.MESH_CANVAS_PADDING,u.drawMode=s||t.DRAW_MODES.TRIANGLE_MESH,u.shader=null,u.tintRgb=new Float32Array([1,1,1]),u._glDatas={},u._uvTransform=new core.TextureMatrix(u._texture),u.uploadUvTransform=!1,u.pluginName="mesh",u}return _inherits(t,e),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,tempPoint);for(var r=this.vertices,n=tempPolygon.points,o=this.indices,i=this.indices.length,s=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,u=0;u+2<i;u+=s){var a=2*o[u],c=2*o[u+1],l=2*o[u+2];if(n[0]=r[a],n[1]=r[a+1],n[2]=r[c],n[3]=r[c+1],n[4]=r[l],n[5]=r[l+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1},_createClass(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return core.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=core.utils.hex2rgb(e,this.tintRgb)}}]),t}(core.Container);exports.default=Mesh,Mesh.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1};
},{"../core":71,"../core/textures/Texture":121}],174:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),_Plane2=require("./Plane"),_Plane3=_interopRequireDefault(_Plane2),DEFAULT_BORDER_SIZE=10,NineSlicePlane=function(t){function e(i,r,h,o,n){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this,i,4,4));return s._origWidth=i.orig.width,s._origHeight=i.orig.height,s._width=s._origWidth,s._height=s._origHeight,s.leftWidth=void 0!==r?r:DEFAULT_BORDER_SIZE,s.rightWidth=void 0!==o?o:DEFAULT_BORDER_SIZE,s.topHeight=void 0!==h?h:DEFAULT_BORDER_SIZE,s.bottomHeight=void 0!==n?n:DEFAULT_BORDER_SIZE,s.refresh(!0),s}return _inherits(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode);var i=this.worldTransform,r=t.resolution;t.roundPixels?e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r);var h=this._texture.baseTexture,o=h.source,n=h.width*h.resolution,s=h.height*h.resolution;this.drawSegment(e,o,n,s,0,1,10,11),this.drawSegment(e,o,n,s,2,3,12,13),this.drawSegment(e,o,n,s,4,5,14,15),this.drawSegment(e,o,n,s,8,9,18,19),this.drawSegment(e,o,n,s,10,11,20,21),this.drawSegment(e,o,n,s,12,13,22,23),this.drawSegment(e,o,n,s,16,17,26,27),this.drawSegment(e,o,n,s,18,19,28,29),this.drawSegment(e,o,n,s,20,21,30,31)},e.prototype.drawSegment=function(t,e,i,r,h,o,n,s){var a=this.uvs,u=this.vertices,_=(a[n]-a[h])*i,l=(a[s]-a[o])*r,c=u[n]-u[h],f=u[s]-u[o];_<1&&(_=1),l<1&&(l=1),c<1&&(c=1),f<1&&(f=1),t.drawImage(e,a[h]*i,a[o]*r,_,l,u[h],u[o],c,f)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var r=1/this._origWidth,h=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=h*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-h*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},_createClass(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(_Plane3.default);exports.default=NineSlicePlane;
},{"./Plane":175}],175:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _Mesh2=require("./Mesh"),_Mesh3=_interopRequireDefault(_Mesh2),Plane=function(e){function t(r,s,i){_classCallCheck(this,t);var o=_possibleConstructorReturn(this,e.call(this,r));return o._ready=!0,o.verticesX=s||10,o.verticesY=i||10,o.drawMode=_Mesh3.default.DRAW_MODES.TRIANGLES,o.refresh(),o}return _inherits(t,e),t.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,r=[],s=[],i=[],o=[],n=this.verticesX-1,h=this.verticesY-1,u=e.width/n,a=e.height/h,c=0;c<t;c++){var l=c%this.verticesX,f=c/this.verticesX|0;r.push(l*u,f*a),i.push(l/n,f/h)}for(var p=n*h,_=0;_<p;_++){var v=_%n,y=_/n|0,d=y*this.verticesX+v,w=y*this.verticesX+v+1,b=(y+1)*this.verticesX+v,M=(y+1)*this.verticesX+v+1;o.push(d,w,b),o.push(w,M,b)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(i),this.colors=new Float32Array(s),this.indices=new Uint16Array(o),this.dirty++,this.indexDirty++,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){_Mesh3.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(_Mesh3.default);exports.default=Plane;
},{"./Mesh":173}],176:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}exports.__esModule=!0;var _Mesh2=require("./Mesh"),_Mesh3=_interopRequireDefault(_Mesh2),Rope=function(t){function e(r,n){_classCallCheck(this,e);var s=_possibleConstructorReturn(this,t.call(this,r));return s.points=n,s.vertices=new Float32Array(4*n.length),s.uvs=new Float32Array(4*n.length),s.colors=new Float32Array(2*n.length),s.indices=new Uint16Array(2*n.length),s.autoUpdate=!0,s.refresh(),s}return _inherits(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,r=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,r[0]=0,r[1]=1;for(var s=t.length,i=1;i<s;i++){var o=4*i,a=i/(s-1);e[o]=a,e[o+1]=0,e[o+2]=a,e[o+3]=1,o=2*i,n[o]=1,n[o+1]=1,o=2*i,r[o]=o,r[o+1]=o+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],r=void 0,n=0,s=0,i=this.vertices,o=t.length,a=0;a<o;a++){var h=t[a],l=4*a;r=a<t.length-1?t[a+1]:h,s=-(r.x-e.x),n=r.y-e.y;var u=10*(1-a/(o-1));u>1&&(u=1);var c=Math.sqrt(n*n+s*s),f=this._texture.height/2;n/=c,s/=c,n*=f,s*=f,i[l]=h.x+n,i[l+1]=h.y+s,i[l+2]=h.x-n,i[l+3]=h.y-s,e=h}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(_Mesh3.default);exports.default=Rope;
},{"./Mesh":173}],177:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_Mesh=require("../Mesh"),_Mesh2=_interopRequireDefault(_Mesh),MeshSpriteRenderer=function(){function e(r){_classCallCheck(this,e),this.renderer=r}return e.prototype.render=function(e){var r=this.renderer,t=r.context,n=e.worldTransform,o=r.resolution;r.roundPixels?t.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o|0,n.ty*o|0):t.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),r.context.globalAlpha=e.worldAlpha,r.setBlendMode(e.blendMode),e.drawMode===_Mesh2.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var r=e.vertices.length/2,t=0;t<r-2;t++){var n=2*t;this._renderDrawTriangle(e,n,n+2,n+4)}},e.prototype._renderTriangles=function(e){for(var r=e.indices,t=r.length,n=0;n<t;n+=3){var o=2*r[n],i=2*r[n+1],a=2*r[n+2];this._renderDrawTriangle(e,o,i,a)}},e.prototype._renderDrawTriangle=function(e,r,t,n){var o=this.renderer.context,i=e.uvs,a=e.vertices,s=e._texture;if(s.valid){var d=s.baseTexture,l=d.source,h=d.width,c=d.height,u=void 0,f=void 0,v=void 0,p=void 0,_=void 0,M=void 0;if(e.uploadUvTransform){var g=e._uvTransform.mapCoord;u=(i[r]*g.a+i[r+1]*g.c+g.tx)*d.width,f=(i[t]*g.a+i[t+1]*g.c+g.tx)*d.width,v=(i[n]*g.a+i[n+1]*g.c+g.tx)*d.width,p=(i[r]*g.b+i[r+1]*g.d+g.ty)*d.height,_=(i[t]*g.b+i[t+1]*g.d+g.ty)*d.height,M=(i[n]*g.b+i[n+1]*g.d+g.ty)*d.height}else u=i[r]*d.width,f=i[t]*d.width,v=i[n]*d.width,p=i[r+1]*d.height,_=i[t+1]*d.height,M=i[n+1]*d.height;var T=a[r],w=a[t],y=a[n],x=a[r+1],b=a[t+1],m=a[n+1],R=e.canvasPadding/this.renderer.resolution;if(R>0){var q=R/Math.abs(e.worldTransform.a),P=R/Math.abs(e.worldTransform.d),C=(T+w+y)/3,D=(x+b+m)/3,S=T-C,A=x-D,E=Math.sqrt(S*S+A*A);T=C+S/E*(E+q),x=D+A/E*(E+P),S=w-C,A=b-D,E=Math.sqrt(S*S+A*A),w=C+S/E*(E+q),b=D+A/E*(E+P),S=y-C,A=m-D,E=Math.sqrt(S*S+A*A),y=C+S/E*(E+q),m=D+A/E*(E+P)}o.save(),o.beginPath(),o.moveTo(T,x),o.lineTo(w,b),o.lineTo(y,m),o.closePath(),o.clip();var F=u*_+p*v+f*M-_*v-p*f-u*M,O=T*_+p*y+w*M-_*y-p*w-T*M,W=u*w+T*v+f*y-w*v-T*f-u*y,k=u*_*y+p*w*v+T*f*M-T*_*v-p*f*y-u*w*M,B=x*_+p*m+b*M-_*m-p*b-x*M,I=u*b+x*v+f*m-b*v-x*f-u*m,j=u*_*m+p*b*v+x*f*M-x*_*v-p*f*m-u*b*M;o.transform(O/F,B/F,W/F,I/F,k/F,j/F),o.drawImage(l,0,0,h*d.resolution,c*d.resolution,0,0,h,c),o.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(e){var r=this.renderer.context,t=e.vertices,n=t.length/2;r.beginPath();for(var o=1;o<n-2;++o){var i=2*o,a=t[i],s=t[i+1],d=t[i+2],l=t[i+3],h=t[i+4],c=t[i+5];r.moveTo(a,s),r.lineTo(d,l),r.lineTo(h,c)}r.fillStyle="#FF0000",r.fill(),r.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();exports.default=MeshSpriteRenderer,core.CanvasRenderer.registerPlugin("mesh",MeshSpriteRenderer);
},{"../../core":71,"../Mesh":173}],178:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _Mesh=require("./Mesh");Object.defineProperty(exports,"Mesh",{enumerable:!0,get:function(){return _interopRequireDefault(_Mesh).default}});var _MeshRenderer=require("./webgl/MeshRenderer");Object.defineProperty(exports,"MeshRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_MeshRenderer).default}});var _CanvasMeshRenderer=require("./canvas/CanvasMeshRenderer");Object.defineProperty(exports,"CanvasMeshRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasMeshRenderer).default}});var _Plane=require("./Plane");Object.defineProperty(exports,"Plane",{enumerable:!0,get:function(){return _interopRequireDefault(_Plane).default}});var _NineSlicePlane=require("./NineSlicePlane");Object.defineProperty(exports,"NineSlicePlane",{enumerable:!0,get:function(){return _interopRequireDefault(_NineSlicePlane).default}});var _Rope=require("./Rope");Object.defineProperty(exports,"Rope",{enumerable:!0,get:function(){return _interopRequireDefault(_Rope).default}});
},{"./Mesh":173,"./NineSlicePlane":174,"./Plane":175,"./Rope":176,"./canvas/CanvasMeshRenderer":177,"./webgl/MeshRenderer":179}],179:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_Mesh=require("../Mesh"),_Mesh2=_interopRequireDefault(_Mesh),_path=require("path"),matrixIdentity=core.Matrix.IDENTITY,MeshRenderer=function(e){function r(t){_classCallCheck(this,r);var o=_possibleConstructorReturn(this,e.call(this,t));return o.shader=null,o}return _inherits(r,e),r.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new core.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},r.prototype.render=function(e){var r=this.renderer,t=r.gl,o=e._texture;if(o.valid){var i=e._glDatas[r.CONTEXT_UID];i||(r.bindVao(null),i={shader:this.shader,vertexBuffer:_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,e.vertices,t.STREAM_DRAW),uvBuffer:_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,e.uvs,t.STREAM_DRAW),indexBuffer:_pixiGlCore2.default.GLBuffer.createIndexBuffer(t,e.indices,t.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty},i.vao=new _pixiGlCore2.default.VertexArrayObject(t).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,t.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,t.FLOAT,!1,8,0),e._glDatas[r.CONTEXT_UID]=i),r.bindVao(i.vao),e.dirty!==i.dirty&&(i.dirty=e.dirty,i.uvBuffer.upload(e.uvs)),e.indexDirty!==i.indexDirty&&(i.indexDirty=e.indexDirty,i.indexBuffer.upload(e.indices)),i.vertexBuffer.upload(e.vertices),r.bindShader(i.shader),i.shader.uniforms.uSampler=r.bindTexture(o),r.state.setBlendMode(core.utils.correctBlendMode(e.blendMode,o.baseTexture.premultipliedAlpha)),i.shader.uniforms.uTransform&&(e.uploadUvTransform?i.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):i.shader.uniforms.uTransform=matrixIdentity.toArray(!0)),i.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),i.shader.uniforms.uColor=core.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,i.shader.uniforms.uColor,o.baseTexture.premultipliedAlpha);var n=e.drawMode===_Mesh2.default.DRAW_MODES.TRIANGLE_MESH?t.TRIANGLE_STRIP:t.TRIANGLES;i.vao.draw(n,e.indices.length,0)}},r}(core.ObjectRenderer);exports.default=MeshRenderer,core.WebGLRenderer.registerPlugin("mesh",MeshRenderer);
},{"../../core":71,"../Mesh":173,"path":28,"pixi-gl-core":35}],180:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_core=require("../core"),core=_interopRequireWildcard(_core),_utils=require("../core/utils"),ParticleContainer=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,i=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,t);var s=_possibleConstructorReturn(this,e.call(this));return o>16384&&(o=16384),o>r&&(o=r),s._properties=[!1,!0,!1,!1,!1],s._maxSize=r,s._batchSize=o,s._glBuffers={},s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=core.BLEND_MODES.NORMAL,s.autoResize=n,s.roundPixels=!0,s.baseTexture=null,s.setProperties(i),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return _inherits(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return t.onChildrenChange(0)})),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,r=this.worldTransform,i=!0,o=0,n=0,s=0,a=0;e.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var u=h._texture.frame;if(t.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)i&&(t.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution,r.ty*e.resolution),i=!1),o=h.anchor.x*(-u.width*h.scale.x)+h.position.x+.5,n=h.anchor.y*(-u.height*h.scale.y)+h.position.y+.5,s=u.width*h.scale.x,a=u.height*h.scale.y;else{i||(i=!0),h.displayObjectUpdateTransform();var p=h.worldTransform;e.roundPixels?t.setTransform(p.a,p.b,p.c,p.d,p.tx*e.resolution|0,p.ty*e.resolution|0):t.setTransform(p.a,p.b,p.c,p.d,p.tx*e.resolution,p.ty*e.resolution),o=h.anchor.x*-u.width+.5,n=h.anchor.y*-u.height+.5,s=u.width,a=u.height}var c=h._texture.baseTexture.resolution;t.drawImage(h._texture.baseTexture.source,u.x*c,u.y*c,u.width*c,u.height*c,o*e.resolution,n*e.resolution,s*e.resolution,a*e.resolution)}}}},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},_createClass(t,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,(0,_utils.hex2rgb)(e,this.tintRgb)}}]),t}(core.Container);exports.default=ParticleContainer;
},{"../core":71,"../core/utils":131}],181:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _ParticleContainer=require("./ParticleContainer");Object.defineProperty(exports,"ParticleContainer",{enumerable:!0,get:function(){return _interopRequireDefault(_ParticleContainer).default}});var _ParticleRenderer=require("./webgl/ParticleRenderer");Object.defineProperty(exports,"ParticleRenderer",{enumerable:!0,get:function(){return _interopRequireDefault(_ParticleRenderer).default}});
},{"./ParticleContainer":180,"./webgl/ParticleRenderer":183}],182:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _pixiGlCore=require("pixi-gl-core"),_pixiGlCore2=_interopRequireDefault(_pixiGlCore),_createIndicesForQuads=require("../../core/utils/createIndicesForQuads"),_createIndicesForQuads2=_interopRequireDefault(_createIndicesForQuads),ParticleBuffer=function(){function t(i,e,s,a){_classCallCheck(this,t),this.gl=i,this.size=a,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;++r){var n=e[r];n={attribute:n.attribute,size:n.size,uploadFunction:n.uploadFunction,unsignedByte:n.unsignedByte,offset:n.offset},s[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,i=0;this.indices=(0,_createIndicesForQuads2.default)(this.size),this.indexBuffer=_pixiGlCore2.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var e=0;e<this.dynamicProperties.length;++e){var s=this.dynamicProperties[e];s.offset=i,i+=s.size,this.dynamicStride+=s.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,a,t.STREAM_DRAW);var r=0;this.staticStride=0;for(var n=0;n<this.staticProperties.length;++n){var u=this.staticProperties[n];u.offset=r,r+=u.size,this.staticStride+=u.size}var c=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=_pixiGlCore2.default.GLBuffer.createVertexBuffer(t,c,t.STATIC_DRAW),this.vao=new _pixiGlCore2.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var f=0;f<this.dynamicProperties.length;++f){var o=this.dynamicProperties[f];o.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,o.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*o.offset):this.vao.addAttribute(this.dynamicBuffer,o.attribute,t.FLOAT,!1,4*this.dynamicStride,4*o.offset)}for(var d=0;d<this.staticProperties.length;++d){var h=this.staticProperties[d];h.unsignedByte?this.vao.addAttribute(this.staticBuffer,h.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*h.offset):this.vao.addAttribute(this.staticBuffer,h.attribute,t.FLOAT,!1,4*this.staticStride,4*h.offset)}},t.prototype.uploadDynamic=function(t,i,e){for(var s=0;s<this.dynamicProperties.length;s++){var a=this.dynamicProperties[s];a.uploadFunction(t,i,e,a.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,i,e){for(var s=0;s<this.staticProperties.length;s++){var a=this.staticProperties[s];a.uploadFunction(t,i,e,a.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();exports.default=ParticleBuffer;
},{"../../core/utils/createIndicesForQuads":129,"pixi-gl-core":35}],183:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_ParticleShader=require("./ParticleShader"),_ParticleShader2=_interopRequireDefault(_ParticleShader),_ParticleBuffer=require("./ParticleBuffer"),_ParticleBuffer2=_interopRequireDefault(_ParticleBuffer),_utils=require("../../core/utils"),ParticleRenderer=function(e){function t(r){_classCallCheck(this,t);var i=_possibleConstructorReturn(this,e.call(this,r));return i.shader=null,i.indexBuffer=null,i.properties=null,i.tempMatrix=new core.Matrix,i.CONTEXT_UID=0,i}return _inherits(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new _ParticleShader2.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(e){var t=e.children,r=e._maxSize,i=e._batchSize,o=this.renderer,a=t.length;if(0!==a){a>r&&(a=r);var n=e._glBuffers[o.CONTEXT_UID];n||(n=e._glBuffers[o.CONTEXT_UID]=this.generateBuffers(e));var u=t[0]._texture.baseTexture;this.renderer.setBlendMode(core.utils.correctBlendMode(e.blendMode,u.premultipliedAlpha));var s=o.gl,l=e.worldTransform.copy(this.tempMatrix);l.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=core.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(u);for(var p=!1,f=0,h=0;f<a;f+=i,h+=1){var c=a-f;if(c>i&&(c=i),h>=n.length){if(!e.autoResize)break;n.push(this._generateOneMoreBuffer(e))}var d=n[h];d.uploadDynamic(t,f,c);var _=e._bufferUpdateIDs[f]||0;p=p||d._updateID<_,p&&(d._updateID=e._updateID,d.uploadStatic(t,f,c)),o.bindVao(d.vao),d.vao.draw(s.TRIANGLES,6*c)}}},t.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,r=[],i=e._maxSize,o=e._batchSize,a=e._properties,n=0;n<i;n+=o)r.push(new _ParticleBuffer2.default(t,this.properties,a,o));return r},t.prototype._generateOneMoreBuffer=function(e){var t=this.renderer.gl,r=e._batchSize,i=e._properties;return new _ParticleBuffer2.default(t,this.properties,i,r)},t.prototype.uploadVertices=function(e,t,r,i,o,a){for(var n=0,u=0,s=0,l=0,p=0;p<r;++p){var f=e[t+p],h=f._texture,c=f.scale.x,d=f.scale.y,_=h.trim,y=h.orig;_?(u=_.x-f.anchor.x*y.width,n=u+_.width,l=_.y-f.anchor.y*y.height,s=l+_.height):(n=y.width*(1-f.anchor.x),u=y.width*-f.anchor.x,s=y.height*(1-f.anchor.y),l=y.height*-f.anchor.y),i[a]=u*c,i[a+1]=l*d,i[a+o]=n*c,i[a+o+1]=l*d,i[a+2*o]=n*c,i[a+2*o+1]=s*d,i[a+3*o]=u*c,i[a+3*o+1]=s*d,a+=4*o}},t.prototype.uploadPosition=function(e,t,r,i,o,a){for(var n=0;n<r;n++){var u=e[t+n].position;i[a]=u.x,i[a+1]=u.y,i[a+o]=u.x,i[a+o+1]=u.y,i[a+2*o]=u.x,i[a+2*o+1]=u.y,i[a+3*o]=u.x,i[a+3*o+1]=u.y,a+=4*o}},t.prototype.uploadRotation=function(e,t,r,i,o,a){for(var n=0;n<r;n++){var u=e[t+n].rotation;i[a]=u,i[a+o]=u,i[a+2*o]=u,i[a+3*o]=u,a+=4*o}},t.prototype.uploadUvs=function(e,t,r,i,o,a){for(var n=0;n<r;++n){var u=e[t+n]._texture._uvs;u?(i[a]=u.x0,i[a+1]=u.y0,i[a+o]=u.x1,i[a+o+1]=u.y1,i[a+2*o]=u.x2,i[a+2*o+1]=u.y2,i[a+3*o]=u.x3,i[a+3*o+1]=u.y3,a+=4*o):(i[a]=0,i[a+1]=0,i[a+o]=0,i[a+o+1]=0,i[a+2*o]=0,i[a+2*o+1]=0,i[a+3*o]=0,i[a+3*o+1]=0,a+=4*o)}},t.prototype.uploadTint=function(e,t,r,i,o,a){for(var n=0;n<r;++n){var u=e[t+n],s=u._texture.baseTexture.premultipliedAlpha,l=u.alpha,p=l<1&&s?(0,_utils.premultiplyTint)(u._tintRGB,l):u._tintRGB+(255*l<<24);i[a]=p,i[a+o]=p,i[a+2*o]=p,i[a+3*o]=p,a+=4*o}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(core.ObjectRenderer);exports.default=ParticleRenderer,core.WebGLRenderer.registerPlugin("particle",ParticleRenderer);
},{"../../core":71,"../../core/utils":131,"./ParticleBuffer":182,"./ParticleShader":184}],184:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?e:o}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}exports.__esModule=!0;var _Shader2=require("../../core/Shader"),_Shader3=_interopRequireDefault(_Shader2),ParticleShader=function(e){function o(t){return _classCallCheck(this,o),_possibleConstructorReturn(this,e.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return _inherits(o,e),o}(_Shader3.default);exports.default=ParticleShader;
},{"../../core/Shader":50}],185:[function(require,module,exports){
"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1});
},{}],186:[function(require,module,exports){
"use strict";Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e});
},{}],187:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign);Object.assign||(Object.assign=_objectAssign2.default);
},{"object-assign":26}],188:[function(require,module,exports){
"use strict";require("./Object.assign"),require("./requestAnimationFrame"),require("./Math.sign"),require("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array);
},{"./Math.sign":185,"./Number.isInteger":186,"./Object.assign":187,"./requestAnimationFrame":189}],189:[function(require,module,exports){
(function (global){
"use strict";var ONE_FRAME_TIME=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!global.performance||!global.performance.now){var startTime=Date.now();global.performance||(global.performance={}),global.performance.now=function(){return Date.now()-startTime}}for(var lastTime=Date.now(),vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!global.requestAnimationFrame;++x){var p=vendors[x];global.requestAnimationFrame=global[p+"RequestAnimationFrame"],global.cancelAnimationFrame=global[p+"CancelAnimationFrame"]||global[p+"CancelRequestAnimationFrame"]}global.requestAnimationFrame||(global.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var a=Date.now(),n=ONE_FRAME_TIME+lastTime-a;return n<0&&(n=0),lastTime=a,setTimeout(function(){lastTime=Date.now(),e(performance.now())},n)}),global.cancelAnimationFrame||(global.cancelAnimationFrame=function(e){return clearTimeout(e)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],190:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function findMultipleBaseTextures(e,t){var i=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof core.Texture){var o=e._textures[r].baseTexture;-1===t.indexOf(o)&&(t.push(o),i=!0)}return i}function findBaseTexture(e,t){return e instanceof core.BaseTexture&&(-1===t.indexOf(e)&&t.push(e),!0)}function findTexture(e,t){if(e._texture&&e._texture instanceof core.Texture){var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function drawText(e,t){return t instanceof core.Text&&(t.updateText(!0),!0)}function calculateTextStyle(e,t){if(t instanceof core.TextStyle){var i=t.toFontString();return core.TextMetrics.measureFont(i),!0}return!1}function findText(e,t){if(e instanceof core.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function findTextStyle(e,t){return e instanceof core.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}exports.__esModule=!0;var _core=require("../core"),core=_interopRequireWildcard(_core),_CountLimiter=require("./limiters/CountLimiter"),_CountLimiter2=_interopRequireDefault(_CountLimiter),SharedTicker=core.ticker.shared;core.settings.UPLOADS_PER_FRAME=4;var BasePrepare=function(){function e(t){var i=this;_classCallCheck(this,e),this.limiter=new _CountLimiter2.default(core.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,SharedTicker.addOnce(this.tick,this,core.UPDATE_PRIORITY.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)SharedTicker.addOnce(this.tick,this,core.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var n=0,s=o.length;n<s;n++)o[n]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof core.Container)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},e.prototype.destroy=function(){this.ticking&&SharedTicker.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();exports.default=BasePrepare;
},{"../core":71,"./limiters/CountLimiter":193}],191:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function uploadBaseTextures(e,t){if(t instanceof core.BaseTexture){var r=t.source,a=0===r.width?e.canvas.width:Math.min(e.canvas.width,r.width),n=0===r.height?e.canvas.height:Math.min(e.canvas.height,r.height);return e.ctx.drawImage(r,0,0,a,n,0,0,e.canvas.width,e.canvas.height),!0}return!1}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_BasePrepare2=require("../BasePrepare"),_BasePrepare3=_interopRequireDefault(_BasePrepare2),CANVAS_START_SIZE=16,CanvasPrepare=function(e){function t(r){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,e.call(this,r));return a.uploadHookHelper=a,a.canvas=document.createElement("canvas"),a.canvas.width=CANVAS_START_SIZE,a.canvas.height=CANVAS_START_SIZE,a.ctx=a.canvas.getContext("2d"),a.registerUploadHook(uploadBaseTextures),a}return _inherits(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(_BasePrepare3.default);exports.default=CanvasPrepare,core.CanvasRenderer.registerPlugin("prepare",CanvasPrepare);
},{"../../core":71,"../BasePrepare":190}],192:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _WebGLPrepare=require("./webgl/WebGLPrepare");Object.defineProperty(exports,"webgl",{enumerable:!0,get:function(){return _interopRequireDefault(_WebGLPrepare).default}});var _CanvasPrepare=require("./canvas/CanvasPrepare");Object.defineProperty(exports,"canvas",{enumerable:!0,get:function(){return _interopRequireDefault(_CanvasPrepare).default}});var _BasePrepare=require("./BasePrepare");Object.defineProperty(exports,"BasePrepare",{enumerable:!0,get:function(){return _interopRequireDefault(_BasePrepare).default}});var _CountLimiter=require("./limiters/CountLimiter");Object.defineProperty(exports,"CountLimiter",{enumerable:!0,get:function(){return _interopRequireDefault(_CountLimiter).default}});var _TimeLimiter=require("./limiters/TimeLimiter");Object.defineProperty(exports,"TimeLimiter",{enumerable:!0,get:function(){return _interopRequireDefault(_TimeLimiter).default}});
},{"./BasePrepare":190,"./canvas/CanvasPrepare":191,"./limiters/CountLimiter":193,"./limiters/TimeLimiter":194,"./webgl/WebGLPrepare":195}],193:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var CountLimiter=function(){function t(e){_classCallCheck(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();exports.default=CountLimiter;
},{}],194:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var TimeLimiter=function(){function t(e){_classCallCheck(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();exports.default=TimeLimiter;
},{}],195:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function uploadBaseTextures(e,r){return r instanceof core.BaseTexture&&(r._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(r),!0)}function uploadGraphics(e,r){return r instanceof core.Graphics&&((r.dirty||r.clearDirty||!r._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(r),!0)}function findGraphics(e,r){return e instanceof core.Graphics&&(r.push(e),!0)}exports.__esModule=!0;var _core=require("../../core"),core=_interopRequireWildcard(_core),_BasePrepare2=require("../BasePrepare"),_BasePrepare3=_interopRequireDefault(_BasePrepare2),WebGLPrepare=function(e){function r(t){_classCallCheck(this,r);var o=_possibleConstructorReturn(this,e.call(this,t));return o.uploadHookHelper=o.renderer,o.registerFindHook(findGraphics),o.registerUploadHook(uploadBaseTextures),o.registerUploadHook(uploadGraphics),o}return _inherits(r,e),r}(_BasePrepare3.default);exports.default=WebGLPrepare,core.WebGLRenderer.registerPlugin("prepare",WebGLPrepare);
},{"../../core":71,"../BasePrepare":190}],196:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],197:[function(require,module,exports){
(function (global){
!function(e){function o(e){throw new RangeError(T[e])}function n(e,o){for(var n=e.length,t=[];n--;)t[n]=o(e[n]);return t}function t(e,o){var t=e.split("@"),r="";return t.length>1&&(r=t[0]+"@",e=t[1]),e=e.replace(S,"."),r+n(e.split("."),o).join(".")}function r(e){for(var o,n,t=[],r=0,u=e.length;r<u;)o=e.charCodeAt(r++),o>=55296&&o<=56319&&r<u?(n=e.charCodeAt(r++),56320==(64512&n)?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),r--)):t.push(o);return t}function u(e){return n(e,function(e){var o="";return e>65535&&(e-=65536,o+=P(e>>>10&1023|55296),e=56320|1023&e),o+=P(e)}).join("")}function i(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:b}function f(e,o){return e+22+75*(e<26)-((0!=o)<<5)}function c(e,o,n){var t=0;for(e=n?M(e/j):e>>1,e+=M(e/o);e>L*C>>1;t+=b)e=M(e/L);return M(t+(L+1)*e/(e+m))}function l(e){var n,t,r,f,l,s,d,p,a,h,v=[],g=e.length,w=0,m=I,j=A;for(t=e.lastIndexOf(E),t<0&&(t=0),r=0;r<t;++r)e.charCodeAt(r)>=128&&o("not-basic"),v.push(e.charCodeAt(r));for(f=t>0?t+1:0;f<g;){for(l=w,s=1,d=b;f>=g&&o("invalid-input"),p=i(e.charCodeAt(f++)),(p>=b||p>M((x-w)/s))&&o("overflow"),w+=p*s,a=d<=j?y:d>=j+C?C:d-j,!(p<a);d+=b)h=b-a,s>M(x/h)&&o("overflow"),s*=h;n=v.length+1,j=c(w-l,n,0==l),M(w/n)>x-m&&o("overflow"),m+=M(w/n),w%=n,v.splice(w++,0,m)}return u(v)}function s(e){var n,t,u,i,l,s,d,p,a,h,v,g,w,m,j,F=[];for(e=r(e),g=e.length,n=I,t=0,l=A,s=0;s<g;++s)(v=e[s])<128&&F.push(P(v));for(u=i=F.length,i&&F.push(E);u<g;){for(d=x,s=0;s<g;++s)(v=e[s])>=n&&v<d&&(d=v);for(w=u+1,d-n>M((x-t)/w)&&o("overflow"),t+=(d-n)*w,n=d,s=0;s<g;++s)if(v=e[s],v<n&&++t>x&&o("overflow"),v==n){for(p=t,a=b;h=a<=l?y:a>=l+C?C:a-l,!(p<h);a+=b)j=p-h,m=b-h,F.push(P(f(h+j%m,0))),p=M(j/m);F.push(P(f(p,0))),l=c(t,w,u==i),t=0,++u}++t,++n}return F.join("")}function d(e){return t(e,function(e){return F.test(e)?l(e.slice(4).toLowerCase()):e})}function p(e){return t(e,function(e){return O.test(e)?"xn--"+s(e):e})}var a="object"==typeof exports&&exports&&!exports.nodeType&&exports,h="object"==typeof module&&module&&!module.nodeType&&module,v="object"==typeof global&&global;v.global!==v&&v.window!==v&&v.self!==v||(e=v);var g,w,x=2147483647,b=36,y=1,C=26,m=38,j=700,A=72,I=128,E="-",F=/^xn--/,O=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=b-y,M=Math.floor,P=String.fromCharCode;if(g={version:"1.4.1",ucs2:{decode:r,encode:u},decode:l,encode:s,toASCII:p,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return g});else if(a&&h)if(module.exports==a)h.exports=g;else for(w in g)g.hasOwnProperty(w)&&(a[w]=g[w]);else e.punycode=g}(this);
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],198:[function(require,module,exports){
"use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;y<p;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
},{}],199:[function(require,module,exports){
"use strict";function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?map(r[n],function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};
},{}],200:[function(require,module,exports){
"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");
},{"./decode":198,"./encode":199}],201:[function(require,module,exports){
"use strict";module.exports=function(t,e,r){var n,o=t.length;if(!(e>=o||0===r)){r=e+r>o?o-e:r;var f=o-r;for(n=e;n<f;++n)t[n]=t[n+r];t.length=f}};
},{}],202:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(r,t,s){return t&&e(r.prototype,t),s&&e(r,s),r}}(),_miniSignals=require("mini-signals"),_miniSignals2=_interopRequireDefault(_miniSignals),_parseUri=require("parse-uri"),_parseUri2=_interopRequireDefault(_parseUri),_async=require("./async"),async=_interopRequireWildcard(_async),_Resource=require("./Resource"),_Resource2=_interopRequireDefault(_Resource),MAX_PROGRESS=100,rgxExtractUrlHash=/(#[\w-]+)?$/,Loader=function(){function e(){var r=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;_classCallCheck(this,e),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,t){return r._loadResource(e,t)},this._queue=async.queue(this._boundLoadResource,s),this._queue.pause(),this.resources={},this.onProgress=new _miniSignals2.default,this.onError=new _miniSignals2.default,this.onLoad=new _miniSignals2.default,this.onStart=new _miniSignals2.default,this.onComplete=new _miniSignals2.default}return e.prototype.add=function(e,r,t,s){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}if("object"===(void 0===e?"undefined":_typeof(e))&&(s=r||e.callback||e.onComplete,t=e,r=e.url,e=e.name||e.key||e.url),"string"!=typeof r&&(s=t,t=r,r=e),"string"!=typeof r)throw new Error("No url passed to add resource to loader.");if("function"==typeof t&&(s=t,t=null),this.loading&&(!t||!t.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new _Resource2.default(e,r,t),"function"==typeof s&&this.resources[e].onAfterMiddleware.once(s),this.loading){for(var o=t.parentResource,n=[],u=0;u<o.children.length;++u)o.children[u].isComplete||n.push(o.children[u]);var a=o.progressChunk*(n.length+1),l=a/(n.length+2);o.children.push(this.resources[e]),o.progressChunk=l;for(var h=0;h<n.length;++h)n[h].progressChunk=l;this.resources[e].progressChunk=l}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort()}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,t=100/r,s=0;s<this._queue._tasks.length;++s)this._queue._tasks[s].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},e.prototype._prepareUrl=function(e){var r=(0,_parseUri2.default)(e,{strictMode:!0}),t=void 0;if(t=r.protocol||!r.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var s=rgxExtractUrlHash.exec(t)[0];t=t.substr(0,t.length-s.length),-1!==t.indexOf("?")?t+="&"+this.defaultQueryString:t+="?"+this.defaultQueryString,t+=s}return t},e.prototype._loadResource=function(e,r){var t=this;e._dequeue=r,async.eachSeries(this._beforeMiddleware,function(r,s){r.call(t,e,function(){s(e.isComplete?{}:null)})},function(){e.isComplete?t._onLoad(e):(e._onLoadBinding=e.onComplete.once(t._onLoad,t),e.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=MAX_PROGRESS,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),async.eachSeries(this._afterMiddleware,function(t,s){t.call(r,e,s)},function(){e.onAfterMiddleware.dispatch(e),r.progress+=e.progressChunk,r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&0===r._resourcesParsing.length&&r._onComplete()},!0)},_createClass(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),e}();exports.default=Loader;
},{"./Resource":203,"./async":204,"mini-signals":25,"parse-uri":27}],203:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _noop(){}function setExtMap(e,t,r){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=r)}function reqType(e){return e.toString().replace("object ","")}exports.__esModule=!0;var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),_parseUri=require("parse-uri"),_parseUri2=_interopRequireDefault(_parseUri),_miniSignals=require("mini-signals"),_miniSignals2=_interopRequireDefault(_miniSignals),useXdr=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),tempAnchor=null,STATUS_NONE=0,STATUS_OK=200,STATUS_EMPTY=204,STATUS_IE_BUG_EMPTY=1223,STATUS_TYPE_OK=2,Resource=function(){function e(t,r,s){if(_classCallCheck(this,e),"string"!=typeof t||"string"!=typeof r)throw new Error("Both name and url are required for constructing a resource.");s=s||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=t,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===s.crossOrigin?"anonymous":s.crossOrigin,this.loadType=s.loadType||this._determineLoadType(),this.xhrType=s.xhrType,this.metadata=s.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_noop,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new _miniSignals2.default,this.onProgress=new _miniSignals2.default,this.onComplete=new _miniSignals2.default,this.onAfterMiddleware=new _miniSignals2.default}return e.setExtensionLoadType=function(t,r){setExtMap(e._loadTypeMap,t,r)},e.setExtensionXhrType=function(t,r){setExtMap(e._xhrTypeMap,t,r)},e.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},e.prototype.load=function(t){var r=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout(function(){return t(r)},1));switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:useXdr&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},e.prototype._hasFlag=function(e){return!!(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null===this.data)return void this.abort("Unsupported element: "+e);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(e,this.url[r],Array.isArray(t)?t[r]:t));else{var s=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(s)?s[0]:s))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},e.prototype._createSource=function(e,t,r){r||(r=e+"/"+this._getExtension(t));var s=document.createElement("source");return s.src=t,s.type=r,s},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(reqType(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnAbort=function(){this.abort(reqType(this.xhr)+" Request was aborted by the user.")},e.prototype._xdrOnTimeout=function(){this.abort(reqType(this.xhr)+" Request timed out.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,r="",s=void 0===t.status?STATUS_OK:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(r=t.responseText),s===STATUS_NONE&&(r.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?s=STATUS_OK:s===STATUS_IE_BUG_EMPTY&&(s=STATUS_EMPTY),(s/100|0)!==STATUS_TYPE_OK)return void this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL);if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||r;this.complete()},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,tempAnchor||(tempAnchor=document.createElement("a")),tempAnchor.href=e,e=(0,_parseUri2.default)(tempAnchor.href,{strictMode:!0});var r=!e.port&&""===t.port||e.port===t.port,s=e.protocol?e.protocol+":":"";return e.host===t.hostname&&r&&s===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var r=e.indexOf("/");t=e.substring(r+1,e.indexOf(";",r))}else{var s=e.indexOf("?"),i=e.indexOf("#"),o=Math.min(s>-1?s:e.length,i>-1?i:e.length);e=e.substring(0,o),t=e.substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},_createClass(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();exports.default=Resource,Resource.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Resource.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Resource.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Resource.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Resource._loadTypeMap={gif:Resource.LOAD_TYPE.IMAGE,png:Resource.LOAD_TYPE.IMAGE,bmp:Resource.LOAD_TYPE.IMAGE,jpg:Resource.LOAD_TYPE.IMAGE,jpeg:Resource.LOAD_TYPE.IMAGE,tif:Resource.LOAD_TYPE.IMAGE,tiff:Resource.LOAD_TYPE.IMAGE,webp:Resource.LOAD_TYPE.IMAGE,tga:Resource.LOAD_TYPE.IMAGE,svg:Resource.LOAD_TYPE.IMAGE,"svg+xml":Resource.LOAD_TYPE.IMAGE,mp3:Resource.LOAD_TYPE.AUDIO,ogg:Resource.LOAD_TYPE.AUDIO,wav:Resource.LOAD_TYPE.AUDIO,mp4:Resource.LOAD_TYPE.VIDEO,webm:Resource.LOAD_TYPE.VIDEO},Resource._xhrTypeMap={xhtml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,html:Resource.XHR_RESPONSE_TYPE.DOCUMENT,htm:Resource.XHR_RESPONSE_TYPE.DOCUMENT,xml:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,svg:Resource.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Resource.XHR_RESPONSE_TYPE.DOCUMENT,gif:Resource.XHR_RESPONSE_TYPE.BLOB,png:Resource.XHR_RESPONSE_TYPE.BLOB,bmp:Resource.XHR_RESPONSE_TYPE.BLOB,jpg:Resource.XHR_RESPONSE_TYPE.BLOB,jpeg:Resource.XHR_RESPONSE_TYPE.BLOB,tif:Resource.XHR_RESPONSE_TYPE.BLOB,tiff:Resource.XHR_RESPONSE_TYPE.BLOB,webp:Resource.XHR_RESPONSE_TYPE.BLOB,tga:Resource.XHR_RESPONSE_TYPE.BLOB,json:Resource.XHR_RESPONSE_TYPE.JSON,text:Resource.XHR_RESPONSE_TYPE.TEXT,txt:Resource.XHR_RESPONSE_TYPE.TEXT,ttf:Resource.XHR_RESPONSE_TYPE.BUFFER,otf:Resource.XHR_RESPONSE_TYPE.BUFFER},Resource.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
},{"mini-signals":25,"parse-uri":27}],204:[function(require,module,exports){
"use strict";function _noop(){}function eachSeries(n,e,t,r){var u=0,o=n.length;!function s(a){if(a||u===o)return void(t&&t(a));r?setTimeout(function(){e(n[u++],s)},1):e(n[u++],s)}()}function onlyOnce(n){return function(){if(null===n)throw new Error("Callback was already called.");var e=n;n=null,e.apply(this,arguments)}}function queue(n,e){function t(n,e,t){if(null!=t&&"function"!=typeof t)throw new Error("task callback must be a function");if(o.started=!0,null==n&&o.idle())return void setTimeout(function(){return o.drain()},1);var r={data:n,callback:"function"==typeof t?t:_noop};e?o._tasks.unshift(r):o._tasks.push(r),setTimeout(function(){return o.process()},1)}function r(n){return function(){u-=1,n.callback.apply(n,arguments),null!=arguments[0]&&o.error(arguments[0],n.data),u<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var u=0,o={_tasks:[],concurrency:e,saturated:_noop,unsaturated:_noop,buffer:e/4,empty:_noop,drain:_noop,error:_noop,started:!1,paused:!1,push:function(n,e){t(n,!1,e)},kill:function(){u=0,o.drain=_noop,o.started=!1,o._tasks=[]},unshift:function(n,e){t(n,!0,e)},process:function(){for(;!o.paused&&u<o.concurrency&&o._tasks.length;){var e=o._tasks.shift();0===o._tasks.length&&o.empty(),u+=1,u===o.concurrency&&o.saturated(),n(e.data,onlyOnce(r(e)))}},length:function(){return o._tasks.length},running:function(){return u},idle:function(){return o._tasks.length+u===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var n=1;n<=o.concurrency;n++)o.process()}}};return o}exports.__esModule=!0,exports.eachSeries=eachSeries,exports.queue=queue;
},{}],205:[function(require,module,exports){
"use strict";function encodeBinary(e){for(var r="",t=0;t<e.length;){for(var n=[0,0,0],a=[0,0,0,0],o=0;o<n.length;++o)t<e.length?n[o]=255&e.charCodeAt(t++):n[o]=0;a[0]=n[0]>>2,a[1]=(3&n[0])<<4|n[1]>>4,a[2]=(15&n[1])<<2|n[2]>>6,a[3]=63&n[2];switch(t-(e.length-1)){case 2:a[3]=64,a[2]=64;break;case 1:a[3]=64}for(var c=0;c<a.length;++c)r+=_keyStr.charAt(a[c])}return r}exports.__esModule=!0,exports.encodeBinary=encodeBinary;var _keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
},{}],206:[function(require,module,exports){
"use strict";var Loader=require("./Loader").default,Resource=require("./Resource").default,async=require("./async"),b64=require("./b64");Loader.Resource=Resource,Loader.async=async,Loader.base64=b64,module.exports=Loader,module.exports.default=Loader;
},{"./Loader":202,"./Resource":203,"./async":204,"./b64":205}],207:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function blobMiddlewareFactory(){return function(e,t){if(!e.data)return void t();if(e.xhr&&e.xhrType===_Resource2.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var o=function(){var o=Url.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=o,e.type=_Resource2.default.TYPE.IMAGE,e.data.onload=function(){Url.revokeObjectURL(o),e.data.onload=null,t()},{v:void 0}}();if("object"===(void 0===o?"undefined":_typeof(o)))return o.v}}else{var r=e.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return e.data=new Image,e.data.src="data:"+r+";base64,"+_b2.default.encodeBinary(e.xhr.responseText),e.type=_Resource2.default.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.blobMiddlewareFactory=blobMiddlewareFactory;var _Resource=require("../../Resource"),_Resource2=_interopRequireDefault(_Resource),_b=require("../../b64"),_b2=_interopRequireDefault(_b),Url=window.URL||window.webkitURL;
},{"../../Resource":203,"../../b64":205}],208:[function(require,module,exports){
var si="function"==typeof setImmediate,tick;tick=si?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},module.exports=tick;
},{}],209:[function(require,module,exports){
"use strict";function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(t,s,e){if(t&&util.isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}function urlFormat(t){return util.isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,s){return urlParse(t,!1,!0).resolve(s)}function urlResolveObject(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s}var punycode=require("punycode"),util=require("./util");exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");Url.prototype.parse=function(t,s,e){if(!util.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t.indexOf("?"),r=-1!==h&&h<t.indexOf("#")?"?":"#",a=t.split(r),o=/\\/g;a[0]=a[0].replace(o,"/"),t=a.join(r);var n=t;if(n=n.trim(),!e&&1===t.split("#").length){var i=simplePathPattern.exec(n);if(i)return this.path=n,this.href=n,this.pathname=i[1],i[2]?(this.search=i[2],this.query=s?querystring.parse(this.search.substr(1)):this.search.substr(1)):s&&(this.search="",this.query={}),this}var l=protocolPattern.exec(n);if(l){l=l[0];var u=l.toLowerCase();this.protocol=u,n=n.substr(l.length)}if(e||l||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var p="//"===n.substr(0,2);!p||l&&hostlessProtocol[l]||(n=n.substr(2),this.slashes=!0)}if(!hostlessProtocol[l]&&(p||l&&!slashedProtocol[l])){for(var c=-1,f=0;f<hostEndingChars.length;f++){var m=n.indexOf(hostEndingChars[f]);-1!==m&&(-1===c||m<c)&&(c=m)}var v,g;g=-1===c?n.lastIndexOf("@"):n.lastIndexOf("@",c),-1!==g&&(v=n.slice(0,g),n=n.slice(g+1),this.auth=decodeURIComponent(v)),c=-1;for(var f=0;f<nonHostChars.length;f++){var m=n.indexOf(nonHostChars[f]);-1!==m&&(-1===c||m<c)&&(c=m)}-1===c&&(c=n.length),this.host=n.slice(0,c),n=n.slice(c),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var P=this.hostname.split(/\./),f=0,d=P.length;f<d;f++){var b=P[f];if(b&&!b.match(hostnamePartPattern)){for(var q="",O=0,j=b.length;O<j;O++)b.charCodeAt(O)>127?q+="x":q+=b[O];if(!q.match(hostnamePartPattern)){var x=P.slice(0,f),U=P.slice(f+1),C=b.match(hostnamePartStart);C&&(x.push(C[1]),U.unshift(C[2])),U.length&&(n="/"+U.join(".")+n),this.hostname=x.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=punycode.toASCII(this.hostname));var A=this.port?":"+this.port:"",w=this.hostname||"";this.host=w+A,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!unsafeProtocol[u])for(var f=0,d=autoEscape.length;f<d;f++){var E=autoEscape[f];if(-1!==n.indexOf(E)){var I=encodeURIComponent(E);I===E&&(I=escape(E)),n=n.split(E).join(I)}}var R=n.indexOf("#");-1!==R&&(this.hash=n.substr(R),n=n.slice(0,R));var S=n.indexOf("?");if(-1!==S?(this.search=n.substr(S),this.query=n.substr(S+1),s&&(this.query=querystring.parse(this.query)),n=n.slice(0,S)):s&&(this.search="",this.query={}),n&&(this.pathname=n),slashedProtocol[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var A=this.pathname||"",k=this.search||"";this.path=A+k}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,a="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(a=querystring.stringify(this.query));var o=this.search||a&&"?"+a||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&!1!==r?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),o&&"?"!==o.charAt(0)&&(o="?"+o),e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),o=o.replace("#","%23"),s+r+e+o+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(util.isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}for(var e=new Url,h=Object.keys(this),r=0;r<h.length;r++){var a=h[r];e[a]=this[a]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),n=0;n<o.length;n++){var i=o[n];"protocol"!==i&&(e[i]=t[i])}return slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var p=l[u];e[p]=t[p]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(var c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var f=e.pathname||"",m=e.search||"";e.path=f+m}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var v=e.pathname&&"/"===e.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=g||v||e.host&&t.pathname,P=y,d=e.pathname&&e.pathname.split("/")||[],c=t.pathname&&t.pathname.split("/")||[],b=e.protocol&&!slashedProtocol[e.protocol];if(b&&(e.hostname="",e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),y=y&&(""===c[0]||""===d[0])),g)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,d=c;else if(c.length)d||(d=[]),d.pop(),d=d.concat(c),e.search=t.search,e.query=t.query;else if(!util.isNullOrUndefined(t.search)){if(b){e.hostname=e.host=d.shift();var q=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@");q&&(e.auth=q.shift(),e.host=e.hostname=q.shift())}return e.search=t.search,e.query=t.query,util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!d.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var O=d.slice(-1)[0],j=(e.host||t.host||d.length>1)&&("."===O||".."===O)||""===O,x=0,U=d.length;U>=0;U--)O=d[U],"."===O?d.splice(U,1):".."===O?(d.splice(U,1),x++):x&&(d.splice(U,1),x--);if(!y&&!P)for(;x--;x)d.unshift("..");!y||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),j&&"/"!==d.join("/").substr(-1)&&d.push("");var C=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(b){e.hostname=e.host=C?"":d.length?d.shift():"";var q=!!(e.host&&e.host.indexOf("@")>0)&&e.host.split("@");q&&(e.auth=q.shift(),e.host=e.hostname=q.shift())}return y=y||e.host&&d.length,y&&!C&&d.unshift(""),d.length?e.pathname=d.join("/"):(e.pathname=null,e.path=null),util.isNull(e.pathname)&&util.isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(s=s[0],":"!==s&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};
},{"./util":210,"punycode":197,"querystring":200}],210:[function(require,module,exports){
"use strict";module.exports={isString:function(n){return"string"==typeof n},isObject:function(n){return"object"==typeof n&&null!==n},isNull:function(n){return null===n},isNullOrUndefined:function(n){return null==n}};
},{}]},{},[8])

